import{de as ra,df as is,dg as os,dh as na,d2 as qr,d3 as sa,d0 as Ut,d1 as gn,d4 as ot,d5 as ia,d6 as oa,d7 as as,d8 as aa,d9 as ca,di as ua,dj as da,dk as Cs,dl as Ls,dm as Ii}from"./privy-provider-8kKbowq5-BuyGVQSK.js";import{y as la,z as Ai}from"./index-2mstak85.js";var ve;(function(t){t.assertEqual=s=>{};function e(s){}t.assertIs=e;function r(s){throw new Error}t.assertNever=r,t.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},t.getValidEnumValues=s=>{const i=t.objectKeys(s).filter(u=>typeof s[s[u]]!="number"),o={};for(const u of i)o[u]=s[u];return t.objectValues(o)},t.objectValues=s=>t.objectKeys(s).map(function(i){return s[i]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},t.find=(s,i)=>{for(const o of s)if(i(o))return o},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}t.joinValues=n,t.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(ve||(ve={}));var Ns;(function(t){t.mergeShapes=(e,r)=>({...e,...r})})(Ns||(Ns={}));const Q=ve.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Et=t=>{switch(typeof t){case"undefined":return Q.undefined;case"string":return Q.string;case"number":return Number.isNaN(t)?Q.nan:Q.number;case"boolean":return Q.boolean;case"function":return Q.function;case"bigint":return Q.bigint;case"symbol":return Q.symbol;case"object":return Array.isArray(t)?Q.array:t===null?Q.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Q.promise:typeof Map<"u"&&t instanceof Map?Q.map:typeof Set<"u"&&t instanceof Set?Q.set:typeof Date<"u"&&t instanceof Date?Q.date:Q.object;default:return Q.unknown}},V=ve.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class wt extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=e}format(e){const r=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let u=n,d=0;for(;d<o.path.length;){const m=o.path[d];d===o.path.length-1?(u[m]=u[m]||{_errors:[]},u[m]._errors.push(r(o))):u[m]=u[m]||{_errors:[]},u=u[m],d++}}};return s(this),n}static assert(e){if(!(e instanceof wt))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ve.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=r=>r.message){const r={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];r[i]=r[i]||[],r[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}wt.create=t=>new wt(t);const Vn=(t,e)=>{let r;switch(t.code){case V.invalid_type:t.received===Q.undefined?r="Required":r=`Expected ${t.expected}, received ${t.received}`;break;case V.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(t.expected,ve.jsonStringifyReplacer)}`;break;case V.unrecognized_keys:r=`Unrecognized key(s) in object: ${ve.joinValues(t.keys,", ")}`;break;case V.invalid_union:r="Invalid input";break;case V.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${ve.joinValues(t.options)}`;break;case V.invalid_enum_value:r=`Invalid enum value. Expected ${ve.joinValues(t.options)}, received '${t.received}'`;break;case V.invalid_arguments:r="Invalid function arguments";break;case V.invalid_return_type:r="Invalid function return type";break;case V.invalid_date:r="Invalid date";break;case V.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(r=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?r=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?r=`Invalid input: must end with "${t.validation.endsWith}"`:ve.assertNever(t.validation):t.validation!=="regex"?r=`Invalid ${t.validation}`:r="Invalid";break;case V.too_small:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="bigint"?r=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:r="Invalid input";break;case V.too_big:t.type==="array"?r=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?r=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?r=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?r=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?r=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:r="Invalid input";break;case V.custom:r="Invalid input";break;case V.invalid_intersection_types:r="Intersection results could not be merged";break;case V.not_multiple_of:r=`Number must be a multiple of ${t.multipleOf}`;break;case V.not_finite:r="Number must be finite";break;default:r=e.defaultError,ve.assertNever(t)}return{message:r}};let fa=Vn;function ha(){return fa}const pa=t=>{const{data:e,path:r,errorMaps:n,issueData:s}=t,i=[...r,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let u="";const d=n.filter(m=>!!m).slice().reverse();for(const m of d)u=m(o,{data:e,defaultError:u}).message;return{...s,path:i,message:u}};function W(t,e){const r=ha(),n=pa({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,r,r===Vn?void 0:Vn].filter(s=>!!s)});t.common.issues.push(n)}class et{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,r){const n=[];for(const s of r){if(s.status==="aborted")return ue;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,r){const n=[];for(const s of r){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return et.mergeObjectSync(e,n)}static mergeObjectSync(e,r){const n={};for(const s of r){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return ue;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const ue=Object.freeze({status:"aborted"}),fr=t=>({status:"dirty",value:t}),tt=t=>({status:"valid",value:t}),Fs=t=>t.status==="aborted",Ps=t=>t.status==="dirty",Xt=t=>t.status==="valid",Zr=t=>typeof Promise<"u"&&t instanceof Promise;var ne;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(ne||(ne={}));class At{constructor(e,r,n,s){this._cachedPath=[],this.parent=e,this.data=r,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ms=(t,e)=>{if(Xt(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new wt(t.common.issues);return this._error=r,this._error}}};function pe(t){if(!t)return{};const{errorMap:e,invalid_type_error:r,required_error:n,description:s}=t;if(e&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,u)=>{const{message:d}=t;return o.code==="invalid_enum_value"?{message:d??u.defaultError}:typeof u.data>"u"?{message:d??n??u.defaultError}:o.code!=="invalid_type"?{message:u.defaultError}:{message:d??r??u.defaultError}},description:s}}class be{get description(){return this._def.description}_getType(e){return Et(e.data)}_getOrReturnCtx(e,r){return r||{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new et,ctx:{common:e.parent.common,data:e.data,parsedType:Et(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const r=this._parse(e);if(Zr(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(e){const r=this._parse(e);return Promise.resolve(r)}parse(e,r){const n=this.safeParse(e,r);if(n.success)return n.data;throw n.error}safeParse(e,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},s=this._parseSync({data:e,path:n.path,parent:n});return Ms(n,s)}"~validate"(e){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:r});return Xt(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:r}).then(n=>Xt(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(e,r){const n=await this.safeParseAsync(e,r);if(n.success)return n.data;throw n.error}async safeParseAsync(e,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Et(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Zr(s)?s:Promise.resolve(s));return Ms(n,i)}refine(e,r){const n=s=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(s):r;return this._refinement((s,i)=>{const o=e(s),u=()=>i.addIssue({code:V.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(u(),!1)):o?!0:(u(),!1)})}refinement(e,r){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof r=="function"?r(n,s):r),!1))}_refinement(e){return new Ft({schema:this,typeName:de.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return yt.create(this,this._def)}nullable(){return Pt.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return at.create(this)}promise(){return Gr.create(this,this._def)}or(e){return Kr.create([this,e],this._def)}and(e){return Wr.create(this,e,this._def)}transform(e){return new Ft({...pe(this._def),schema:this,typeName:de.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const r=typeof e=="function"?e:()=>e;return new Yr({...pe(this._def),innerType:this,defaultValue:r,typeName:de.ZodDefault})}brand(){return new Ti({typeName:de.ZodBranded,type:this,...pe(this._def)})}catch(e){const r=typeof e=="function"?e:()=>e;return new Hr({...pe(this._def),innerType:this,catchValue:r,typeName:de.ZodCatch})}describe(e){const r=this.constructor;return new r({...this._def,description:e})}pipe(e){return us.create(this,e)}readonly(){return Xr.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const ma=/^c[^\s-]{8,}$/i,ga=/^[0-9a-z]+$/,ya=/^[0-9A-HJKMNP-TV-Z]{26}$/i,wa=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,ba=/^[a-z0-9_-]{21}$/i,va=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,xa=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Ea=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_a="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let An;const Sa=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Ia=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Aa=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,Ba=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ka=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Ra=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Bi="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Ta=new RegExp(`^${Bi}$`);function ki(t){let e="[0-5]\\d";t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`);const r=t.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${r}`}function Oa(t){return new RegExp(`^${ki(t)}$`)}function Ua(t){let e=`${Bi}T${ki(t)}`;const r=[];return r.push(t.local?"Z?":"Z"),t.offset&&r.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${r.join("|")})`,new RegExp(`^${e}$`)}function Ca(t,e){return!!((e==="v4"||!e)&&Sa.test(t)||(e==="v6"||!e)&&Aa.test(t))}function La(t,e){if(!va.test(t))return!1;try{const[r]=t.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Na(t,e){return!!((e==="v4"||!e)&&Ia.test(t)||(e==="v6"||!e)&&Ba.test(t))}class _t extends be{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Q.string){const i=this._getOrReturnCtx(e);return W(i,{code:V.invalid_type,expected:Q.string,received:i.parsedType}),ue}const n=new et;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:V.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:V.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,u=e.data.length<i.value;(o||u)&&(s=this._getOrReturnCtx(e,s),o?W(s,{code:V.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):u&&W(s,{code:V.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Ea.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"email",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")An||(An=new RegExp(_a,"u")),An.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"emoji",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")wa.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"uuid",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")ba.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"nanoid",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")ma.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cuid",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")ga.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cuid2",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")ya.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"ulid",code:V.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),W(s,{validation:"url",code:V.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"regex",code:V.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Ua(i).test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Ta.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Oa(i).test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{code:V.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?xa.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"duration",code:V.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Ca(e.data,i.version)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"ip",code:V.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?La(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"jwt",code:V.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?Na(e.data,i.version)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"cidr",code:V.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?ka.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"base64",code:V.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Ra.test(e.data)||(s=this._getOrReturnCtx(e,s),W(s,{validation:"base64url",code:V.invalid_string,message:i.message}),n.dirty()):ve.assertNever(i);return{status:n.value,value:e.data}}_regex(e,r,n){return this.refinement(s=>e.test(s),{validation:r,code:V.invalid_string,...ne.errToObj(n)})}_addCheck(e){return new _t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ne.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ne.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ne.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ne.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ne.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ne.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ne.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ne.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ne.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ne.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ne.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ne.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ne.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...ne.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ne.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ne.errToObj(e)})}regex(e,r){return this._addCheck({kind:"regex",regex:e,...ne.errToObj(r)})}includes(e,r){return this._addCheck({kind:"includes",value:e,position:r?.position,...ne.errToObj(r?.message)})}startsWith(e,r){return this._addCheck({kind:"startsWith",value:e,...ne.errToObj(r)})}endsWith(e,r){return this._addCheck({kind:"endsWith",value:e,...ne.errToObj(r)})}min(e,r){return this._addCheck({kind:"min",value:e,...ne.errToObj(r)})}max(e,r){return this._addCheck({kind:"max",value:e,...ne.errToObj(r)})}length(e,r){return this._addCheck({kind:"length",value:e,...ne.errToObj(r)})}nonempty(e){return this.min(1,ne.errToObj(e))}trim(){return new _t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new _t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new _t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxLength(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}_t.create=t=>new _t({checks:[],typeName:de.ZodString,coerce:t?.coerce??!1,...pe(t)});function Fa(t,e){const r=(t.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=r>n?r:n,i=Number.parseInt(t.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class Qt extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Q.number){const i=this._getOrReturnCtx(e);return W(i,{code:V.invalid_type,expected:Q.number,received:i.parsedType}),ue}let n;const s=new et;for(const i of this._def.checks)i.kind==="int"?ve.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),W(n,{code:V.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?Fa(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),W(n,{code:V.not_finite,message:i.message}),s.dirty()):ve.assertNever(i);return{status:s.value,value:e.data}}gte(e,r){return this.setLimit("min",e,!0,ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ne.toString(r))}setLimit(e,r,n,s){return new Qt({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ne.toString(s)}]})}_addCheck(e){return new Qt({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ne.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(r)})}finite(e){return this._addCheck({kind:"finite",message:ne.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ne.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ne.toString(e)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ve.isInteger(e.value))}get isFinite(){let e=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(r)&&Number.isFinite(e)}}Qt.create=t=>new Qt({checks:[],typeName:de.ZodNumber,coerce:t?.coerce||!1,...pe(t)});class hr extends be{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Q.bigint)return this._getInvalidInput(e);let n;const s=new et;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),W(n,{code:V.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):ve.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const r=this._getOrReturnCtx(e);return W(r,{code:V.invalid_type,expected:Q.bigint,received:r.parsedType}),ue}gte(e,r){return this.setLimit("min",e,!0,ne.toString(r))}gt(e,r){return this.setLimit("min",e,!1,ne.toString(r))}lte(e,r){return this.setLimit("max",e,!0,ne.toString(r))}lt(e,r){return this.setLimit("max",e,!1,ne.toString(r))}setLimit(e,r,n,s){return new hr({...this._def,checks:[...this._def.checks,{kind:e,value:r,inclusive:n,message:ne.toString(s)}]})}_addCheck(e){return new hr({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ne.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ne.toString(e)})}multipleOf(e,r){return this._addCheck({kind:"multipleOf",value:e,message:ne.toString(r)})}get minValue(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e}get maxValue(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e}}hr.create=t=>new hr({checks:[],typeName:de.ZodBigInt,coerce:t?.coerce??!1,...pe(t)});class Kn extends be{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Q.boolean){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.boolean,received:n.parsedType}),ue}return tt(e.data)}}Kn.create=t=>new Kn({typeName:de.ZodBoolean,coerce:t?.coerce||!1,...pe(t)});class Vr extends be{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Q.date){const i=this._getOrReturnCtx(e);return W(i,{code:V.invalid_type,expected:Q.date,received:i.parsedType}),ue}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return W(i,{code:V.invalid_date}),ue}const n=new et;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:V.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),W(s,{code:V.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):ve.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Vr({...this._def,checks:[...this._def.checks,e]})}min(e,r){return this._addCheck({kind:"min",value:e.getTime(),message:ne.toString(r)})}max(e,r){return this._addCheck({kind:"max",value:e.getTime(),message:ne.toString(r)})}get minDate(){let e=null;for(const r of this._def.checks)r.kind==="min"&&(e===null||r.value>e)&&(e=r.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const r of this._def.checks)r.kind==="max"&&(e===null||r.value<e)&&(e=r.value);return e!=null?new Date(e):null}}Vr.create=t=>new Vr({checks:[],coerce:t?.coerce||!1,typeName:de.ZodDate,...pe(t)});class Ds extends be{_parse(e){if(this._getType(e)!==Q.symbol){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.symbol,received:n.parsedType}),ue}return tt(e.data)}}Ds.create=t=>new Ds({typeName:de.ZodSymbol,...pe(t)});class Wn extends be{_parse(e){if(this._getType(e)!==Q.undefined){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.undefined,received:n.parsedType}),ue}return tt(e.data)}}Wn.create=t=>new Wn({typeName:de.ZodUndefined,...pe(t)});class Jn extends be{_parse(e){if(this._getType(e)!==Q.null){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.null,received:n.parsedType}),ue}return tt(e.data)}}Jn.create=t=>new Jn({typeName:de.ZodNull,...pe(t)});class js extends be{constructor(){super(...arguments),this._any=!0}_parse(e){return tt(e.data)}}js.create=t=>new js({typeName:de.ZodAny,...pe(t)});class zs extends be{constructor(){super(...arguments),this._unknown=!0}_parse(e){return tt(e.data)}}zs.create=t=>new zs({typeName:de.ZodUnknown,...pe(t)});class Bt extends be{_parse(e){const r=this._getOrReturnCtx(e);return W(r,{code:V.invalid_type,expected:Q.never,received:r.parsedType}),ue}}Bt.create=t=>new Bt({typeName:de.ZodNever,...pe(t)});class $s extends be{_parse(e){if(this._getType(e)!==Q.undefined){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.void,received:n.parsedType}),ue}return tt(e.data)}}$s.create=t=>new $s({typeName:de.ZodVoid,...pe(t)});class at extends be{_parse(e){const{ctx:r,status:n}=this._processInputParams(e),s=this._def;if(r.parsedType!==Q.array)return W(r,{code:V.invalid_type,expected:Q.array,received:r.parsedType}),ue;if(s.exactLength!==null){const o=r.data.length>s.exactLength.value,u=r.data.length<s.exactLength.value;(o||u)&&(W(r,{code:o?V.too_big:V.too_small,minimum:u?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&r.data.length<s.minLength.value&&(W(r,{code:V.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&r.data.length>s.maxLength.value&&(W(r,{code:V.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,u)=>s.type._parseAsync(new At(r,o,r.path,u)))).then(o=>et.mergeArray(n,o));const i=[...r.data].map((o,u)=>s.type._parseSync(new At(r,o,r.path,u)));return et.mergeArray(n,i)}get element(){return this._def.type}min(e,r){return new at({...this._def,minLength:{value:e,message:ne.toString(r)}})}max(e,r){return new at({...this._def,maxLength:{value:e,message:ne.toString(r)}})}length(e,r){return new at({...this._def,exactLength:{value:e,message:ne.toString(r)}})}nonempty(e){return this.min(1,e)}}at.create=(t,e)=>new at({type:t,minLength:null,maxLength:null,exactLength:null,typeName:de.ZodArray,...pe(e)});function Vt(t){if(t instanceof Ce){const e={};for(const r in t.shape){const n=t.shape[r];e[r]=yt.create(Vt(n))}return new Ce({...t._def,shape:()=>e})}else return t instanceof at?new at({...t._def,type:Vt(t.element)}):t instanceof yt?yt.create(Vt(t.unwrap())):t instanceof Pt?Pt.create(Vt(t.unwrap())):t instanceof Lt?Lt.create(t.items.map(e=>Vt(e))):t}class Ce extends be{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),r=ve.objectKeys(e);return this._cached={shape:e,keys:r},this._cached}_parse(e){if(this._getType(e)!==Q.object){const m=this._getOrReturnCtx(e);return W(m,{code:V.invalid_type,expected:Q.object,received:m.parsedType}),ue}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),u=[];if(!(this._def.catchall instanceof Bt&&this._def.unknownKeys==="strip"))for(const m in s.data)o.includes(m)||u.push(m);const d=[];for(const m of o){const b=i[m],N=s.data[m];d.push({key:{status:"valid",value:m},value:b._parse(new At(s,N,s.path,m)),alwaysSet:m in s.data})}if(this._def.catchall instanceof Bt){const m=this._def.unknownKeys;if(m==="passthrough")for(const b of u)d.push({key:{status:"valid",value:b},value:{status:"valid",value:s.data[b]}});else if(m==="strict")u.length>0&&(W(s,{code:V.unrecognized_keys,keys:u}),n.dirty());else if(m!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const m=this._def.catchall;for(const b of u){const N=s.data[b];d.push({key:{status:"valid",value:b},value:m._parse(new At(s,N,s.path,b)),alwaysSet:b in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const m=[];for(const b of d){const N=await b.key,x=await b.value;m.push({key:N,value:x,alwaysSet:b.alwaysSet})}return m}).then(m=>et.mergeObjectSync(n,m)):et.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(e){return ne.errToObj,new Ce({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(r,n)=>{const s=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:ne.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new Ce({...this._def,unknownKeys:"strip"})}passthrough(){return new Ce({...this._def,unknownKeys:"passthrough"})}extend(e){return new Ce({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Ce({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:de.ZodObject})}setKey(e,r){return this.augment({[e]:r})}catchall(e){return new Ce({...this._def,catchall:e})}pick(e){const r={};for(const n of ve.objectKeys(e))e[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Ce({...this._def,shape:()=>r})}omit(e){const r={};for(const n of ve.objectKeys(this.shape))e[n]||(r[n]=this.shape[n]);return new Ce({...this._def,shape:()=>r})}deepPartial(){return Vt(this)}partial(e){const r={};for(const n of ve.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?r[n]=s:r[n]=s.optional()}return new Ce({...this._def,shape:()=>r})}required(e){const r={};for(const n of ve.objectKeys(this.shape))if(e&&!e[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof yt;)i=i._def.innerType;r[n]=i}return new Ce({...this._def,shape:()=>r})}keyof(){return Ri(ve.objectKeys(this.shape))}}Ce.create=(t,e)=>new Ce({shape:()=>t,unknownKeys:"strip",catchall:Bt.create(),typeName:de.ZodObject,...pe(e)});Ce.strictCreate=(t,e)=>new Ce({shape:()=>t,unknownKeys:"strict",catchall:Bt.create(),typeName:de.ZodObject,...pe(e)});Ce.lazycreate=(t,e)=>new Ce({shape:t,unknownKeys:"strip",catchall:Bt.create(),typeName:de.ZodObject,...pe(e)});class Kr extends be{_parse(e){const{ctx:r}=this._processInputParams(e),n=this._def.options;function s(i){for(const u of i)if(u.result.status==="valid")return u.result;for(const u of i)if(u.result.status==="dirty")return r.common.issues.push(...u.ctx.common.issues),u.result;const o=i.map(u=>new wt(u.ctx.common.issues));return W(r,{code:V.invalid_union,unionErrors:o}),ue}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const d of n){const m={...r,common:{...r.common,issues:[]},parent:null},b=d._parseSync({data:r.data,path:r.path,parent:m});if(b.status==="valid")return b;b.status==="dirty"&&!i&&(i={result:b,ctx:m}),m.common.issues.length&&o.push(m.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const u=o.map(d=>new wt(d));return W(r,{code:V.invalid_union,unionErrors:u}),ue}}get options(){return this._def.options}}Kr.create=(t,e)=>new Kr({options:t,typeName:de.ZodUnion,...pe(e)});const ft=t=>t instanceof Yn?ft(t.schema):t instanceof Ft?ft(t.innerType()):t instanceof Jr?[t.value]:t instanceof Nt?t.options:t instanceof Hn?ve.objectValues(t.enum):t instanceof Yr?ft(t._def.innerType):t instanceof Wn?[void 0]:t instanceof Jn?[null]:t instanceof yt?[void 0,...ft(t.unwrap())]:t instanceof Pt?[null,...ft(t.unwrap())]:t instanceof Ti||t instanceof Xr?ft(t.unwrap()):t instanceof Hr?ft(t._def.innerType):[];class cs extends be{_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Q.object)return W(r,{code:V.invalid_type,expected:Q.object,received:r.parsedType}),ue;const n=this.discriminator,s=r.data[n],i=this.optionsMap.get(s);return i?r.common.async?i._parseAsync({data:r.data,path:r.path,parent:r}):i._parseSync({data:r.data,path:r.path,parent:r}):(W(r,{code:V.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[n]}),ue)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,r,n){const s=new Map;for(const i of r){const o=ft(i.shape[e]);if(!o.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const u of o){if(s.has(u))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(u)}`);s.set(u,i)}}return new cs({typeName:de.ZodDiscriminatedUnion,discriminator:e,options:r,optionsMap:s,...pe(n)})}}function Gn(t,e){const r=Et(t),n=Et(e);if(t===e)return{valid:!0,data:t};if(r===Q.object&&n===Q.object){const s=ve.objectKeys(e),i=ve.objectKeys(t).filter(u=>s.indexOf(u)!==-1),o={...t,...e};for(const u of i){const d=Gn(t[u],e[u]);if(!d.valid)return{valid:!1};o[u]=d.data}return{valid:!0,data:o}}else if(r===Q.array&&n===Q.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<t.length;i++){const o=t[i],u=e[i],d=Gn(o,u);if(!d.valid)return{valid:!1};s.push(d.data)}return{valid:!0,data:s}}else return r===Q.date&&n===Q.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Wr extends be{_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(Fs(i)||Fs(o))return ue;const u=Gn(i.value,o.value);return u.valid?((Ps(i)||Ps(o))&&r.dirty(),{status:r.value,value:u.data}):(W(n,{code:V.invalid_intersection_types}),ue)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Wr.create=(t,e,r)=>new Wr({left:t,right:e,typeName:de.ZodIntersection,...pe(r)});class Lt extends be{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.array)return W(n,{code:V.invalid_type,expected:Q.array,received:n.parsedType}),ue;if(n.data.length<this._def.items.length)return W(n,{code:V.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ue;!this._def.rest&&n.data.length>this._def.items.length&&(W(n,{code:V.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,u)=>{const d=this._def.items[u]||this._def.rest;return d?d._parse(new At(n,o,n.path,u)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>et.mergeArray(r,o)):et.mergeArray(r,i)}get items(){return this._def.items}rest(e){return new Lt({...this._def,rest:e})}}Lt.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Lt({items:t,typeName:de.ZodTuple,rest:null,...pe(e)})};class qs extends be{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.map)return W(n,{code:V.invalid_type,expected:Q.map,received:n.parsedType}),ue;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([u,d],m)=>({key:s._parse(new At(n,u,n.path,[m,"key"])),value:i._parse(new At(n,d,n.path,[m,"value"]))}));if(n.common.async){const u=new Map;return Promise.resolve().then(async()=>{for(const d of o){const m=await d.key,b=await d.value;if(m.status==="aborted"||b.status==="aborted")return ue;(m.status==="dirty"||b.status==="dirty")&&r.dirty(),u.set(m.value,b.value)}return{status:r.value,value:u}})}else{const u=new Map;for(const d of o){const m=d.key,b=d.value;if(m.status==="aborted"||b.status==="aborted")return ue;(m.status==="dirty"||b.status==="dirty")&&r.dirty(),u.set(m.value,b.value)}return{status:r.value,value:u}}}}qs.create=(t,e,r)=>new qs({valueType:e,keyType:t,typeName:de.ZodMap,...pe(r)});class pr extends be{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.parsedType!==Q.set)return W(n,{code:V.invalid_type,expected:Q.set,received:n.parsedType}),ue;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(W(n,{code:V.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),r.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(W(n,{code:V.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),r.dirty());const i=this._def.valueType;function o(d){const m=new Set;for(const b of d){if(b.status==="aborted")return ue;b.status==="dirty"&&r.dirty(),m.add(b.value)}return{status:r.value,value:m}}const u=[...n.data.values()].map((d,m)=>i._parse(new At(n,d,n.path,m)));return n.common.async?Promise.all(u).then(d=>o(d)):o(u)}min(e,r){return new pr({...this._def,minSize:{value:e,message:ne.toString(r)}})}max(e,r){return new pr({...this._def,maxSize:{value:e,message:ne.toString(r)}})}size(e,r){return this.min(e,r).max(e,r)}nonempty(e){return this.min(1,e)}}pr.create=(t,e)=>new pr({valueType:t,minSize:null,maxSize:null,typeName:de.ZodSet,...pe(e)});class Yn extends be{get schema(){return this._def.getter()}_parse(e){const{ctx:r}=this._processInputParams(e);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}Yn.create=(t,e)=>new Yn({getter:t,typeName:de.ZodLazy,...pe(e)});class Jr extends be{_parse(e){if(e.data!==this._def.value){const r=this._getOrReturnCtx(e);return W(r,{received:r.data,code:V.invalid_literal,expected:this._def.value}),ue}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jr.create=(t,e)=>new Jr({value:t,typeName:de.ZodLiteral,...pe(e)});function Ri(t,e){return new Nt({values:t,typeName:de.ZodEnum,...pe(e)})}class Nt extends be{_parse(e){if(typeof e.data!="string"){const r=this._getOrReturnCtx(e),n=this._def.values;return W(r,{expected:ve.joinValues(n),received:r.parsedType,code:V.invalid_type}),ue}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const r=this._getOrReturnCtx(e),n=this._def.values;return W(r,{received:r.data,code:V.invalid_enum_value,options:n}),ue}return tt(e.data)}get options(){return this._def.values}get enum(){const e={};for(const r of this._def.values)e[r]=r;return e}get Values(){const e={};for(const r of this._def.values)e[r]=r;return e}get Enum(){const e={};for(const r of this._def.values)e[r]=r;return e}extract(e,r=this._def){return Nt.create(e,{...this._def,...r})}exclude(e,r=this._def){return Nt.create(this.options.filter(n=>!e.includes(n)),{...this._def,...r})}}Nt.create=Ri;class Hn extends be{_parse(e){const r=ve.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==Q.string&&n.parsedType!==Q.number){const s=ve.objectValues(r);return W(n,{expected:ve.joinValues(s),received:n.parsedType,code:V.invalid_type}),ue}if(this._cache||(this._cache=new Set(ve.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=ve.objectValues(r);return W(n,{received:n.data,code:V.invalid_enum_value,options:s}),ue}return tt(e.data)}get enum(){return this._def.values}}Hn.create=(t,e)=>new Hn({values:t,typeName:de.ZodNativeEnum,...pe(e)});class Gr extends be{unwrap(){return this._def.type}_parse(e){const{ctx:r}=this._processInputParams(e);if(r.parsedType!==Q.promise&&r.common.async===!1)return W(r,{code:V.invalid_type,expected:Q.promise,received:r.parsedType}),ue;const n=r.parsedType===Q.promise?r.data:Promise.resolve(r.data);return tt(n.then(s=>this._def.type.parseAsync(s,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Gr.create=(t,e)=>new Gr({type:t,typeName:de.ZodPromise,...pe(e)});class Ft extends be{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===de.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:r,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{W(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async u=>{if(r.value==="aborted")return ue;const d=await this._def.schema._parseAsync({data:u,path:n.path,parent:n});return d.status==="aborted"?ue:d.status==="dirty"||r.value==="dirty"?fr(d.value):d});{if(r.value==="aborted")return ue;const u=this._def.schema._parseSync({data:o,path:n.path,parent:n});return u.status==="aborted"?ue:u.status==="dirty"||r.value==="dirty"?fr(u.value):u}}if(s.type==="refinement"){const o=u=>{const d=s.refinement(u,i);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return u};if(n.common.async===!1){const u=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return u.status==="aborted"?ue:(u.status==="dirty"&&r.dirty(),o(u.value),{status:r.value,value:u.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(u=>u.status==="aborted"?ue:(u.status==="dirty"&&r.dirty(),o(u.value).then(()=>({status:r.value,value:u.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Xt(o))return ue;const u=s.transform(o.value,i);if(u instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:u}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Xt(o)?Promise.resolve(s.transform(o.value,i)).then(u=>({status:r.value,value:u})):ue);ve.assertNever(s)}}Ft.create=(t,e,r)=>new Ft({schema:t,typeName:de.ZodEffects,effect:e,...pe(r)});Ft.createWithPreprocess=(t,e,r)=>new Ft({schema:e,effect:{type:"preprocess",transform:t},typeName:de.ZodEffects,...pe(r)});class yt extends be{_parse(e){return this._getType(e)===Q.undefined?tt(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yt.create=(t,e)=>new yt({innerType:t,typeName:de.ZodOptional,...pe(e)});class Pt extends be{_parse(e){return this._getType(e)===Q.null?tt(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Pt.create=(t,e)=>new Pt({innerType:t,typeName:de.ZodNullable,...pe(e)});class Yr extends be{_parse(e){const{ctx:r}=this._processInputParams(e);let n=r.data;return r.parsedType===Q.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Yr.create=(t,e)=>new Yr({innerType:t,typeName:de.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...pe(e)});class Hr extends be{_parse(e){const{ctx:r}=this._processInputParams(e),n={...r,common:{...r.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Zr(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new wt(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new wt(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Hr.create=(t,e)=>new Hr({innerType:t,typeName:de.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...pe(e)});class Zs extends be{_parse(e){if(this._getType(e)!==Q.nan){const n=this._getOrReturnCtx(e);return W(n,{code:V.invalid_type,expected:Q.nan,received:n.parsedType}),ue}return{status:"valid",value:e.data}}}Zs.create=t=>new Zs({typeName:de.ZodNaN,...pe(t)});class Ti extends be{_parse(e){const{ctx:r}=this._processInputParams(e),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class us extends be{_parse(e){const{status:r,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?ue:i.status==="dirty"?(r.dirty(),fr(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?ue:s.status==="dirty"?(r.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,r){return new us({in:e,out:r,typeName:de.ZodPipeline})}}class Xr extends be{_parse(e){const r=this._def.innerType._parse(e),n=s=>(Xt(s)&&(s.value=Object.freeze(s.value)),s);return Zr(r)?r.then(s=>n(s)):n(r)}unwrap(){return this._def.innerType}}Xr.create=(t,e)=>new Xr({innerType:t,typeName:de.ZodReadonly,...pe(e)});var de;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(de||(de={}));const Oe=_t.create,Oi=Qt.create,Pa=Kn.create;Bt.create;const Ct=at.create,Me=Ce.create,Qr=Kr.create,Ui=cs.create;Wr.create;Lt.create;const Ze=Jr.create,ds=Nt.create;Gr.create;yt.create;Pt.create;var Vs,Bn,kn=0,Rn=0;function Ma(t,e,r){var n=e&&r||0,s=e||new Array(16);t=t||{};var i=t.node||Vs,o=t.clockseq!==void 0?t.clockseq:Bn;if(i==null||o==null){var u=t.random||(t.rng||ra)();i==null&&(i=Vs=[u[0]|1,u[1],u[2],u[3],u[4],u[5]]),o==null&&(o=Bn=(u[6]<<8|u[7])&16383)}var d=t.msecs!==void 0?t.msecs:Date.now(),m=t.nsecs!==void 0?t.nsecs:Rn+1,b=d-kn+(m-Rn)/1e4;if(b<0&&t.clockseq===void 0&&(o=o+1&16383),(b<0||d>kn)&&t.nsecs===void 0&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");kn=d,Rn=m,Bn=o,d+=122192928e5;var N=((d&268435455)*1e4+m)%4294967296;s[n++]=N>>>24&255,s[n++]=N>>>16&255,s[n++]=N>>>8&255,s[n++]=N&255;var x=d/4294967296*1e4&268435455;s[n++]=x>>>8&255,s[n++]=x&255,s[n++]=x>>>24&15|16,s[n++]=x>>>16&255,s[n++]=o>>>8|128,s[n++]=o&255;for(var w=0;w<6;++w)s[n+w]=i[w];return e||is(s)}function Ci(t){if(!os(t))throw TypeError("Invalid UUID");var e,r=new Uint8Array(16);return r[0]=(e=parseInt(t.slice(0,8),16))>>>24,r[1]=e>>>16&255,r[2]=e>>>8&255,r[3]=e&255,r[4]=(e=parseInt(t.slice(9,13),16))>>>8,r[5]=e&255,r[6]=(e=parseInt(t.slice(14,18),16))>>>8,r[7]=e&255,r[8]=(e=parseInt(t.slice(19,23),16))>>>8,r[9]=e&255,r[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,r[11]=e/4294967296&255,r[12]=e>>>24&255,r[13]=e>>>16&255,r[14]=e>>>8&255,r[15]=e&255,r}function Da(t){t=unescape(encodeURIComponent(t));for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e}var ja="6ba7b810-9dad-11d1-80b4-00c04fd430c8",za="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Li(t,e,r){function n(s,i,o,u){if(typeof s=="string"&&(s=Da(s)),typeof i=="string"&&(i=Ci(i)),i.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var d=new Uint8Array(16+s.length);if(d.set(i),d.set(s,i.length),d=r(d),d[6]=d[6]&15|e,d[8]=d[8]&63|128,o){u=u||0;for(var m=0;m<16;++m)o[u+m]=d[m];return o}return is(d)}try{n.name=t}catch{}return n.DNS=ja,n.URL=za,n}function $a(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)}return qa(Za(Va(t),t.length*8))}function qa(t){for(var e=[],r=t.length*32,n="0123456789abcdef",s=0;s<r;s+=8){var i=t[s>>5]>>>s%32&255,o=parseInt(n.charAt(i>>>4&15)+n.charAt(i&15),16);e.push(o)}return e}function Ni(t){return(t+64>>>9<<4)+14+1}function Za(t,e){t[e>>5]|=128<<e%32,t[Ni(e)-1]=e;for(var r=1732584193,n=-271733879,s=-1732584194,i=271733878,o=0;o<t.length;o+=16){var u=r,d=n,m=s,b=i;r=De(r,n,s,i,t[o],7,-680876936),i=De(i,r,n,s,t[o+1],12,-389564586),s=De(s,i,r,n,t[o+2],17,606105819),n=De(n,s,i,r,t[o+3],22,-1044525330),r=De(r,n,s,i,t[o+4],7,-176418897),i=De(i,r,n,s,t[o+5],12,1200080426),s=De(s,i,r,n,t[o+6],17,-1473231341),n=De(n,s,i,r,t[o+7],22,-45705983),r=De(r,n,s,i,t[o+8],7,1770035416),i=De(i,r,n,s,t[o+9],12,-1958414417),s=De(s,i,r,n,t[o+10],17,-42063),n=De(n,s,i,r,t[o+11],22,-1990404162),r=De(r,n,s,i,t[o+12],7,1804603682),i=De(i,r,n,s,t[o+13],12,-40341101),s=De(s,i,r,n,t[o+14],17,-1502002290),n=De(n,s,i,r,t[o+15],22,1236535329),r=je(r,n,s,i,t[o+1],5,-165796510),i=je(i,r,n,s,t[o+6],9,-1069501632),s=je(s,i,r,n,t[o+11],14,643717713),n=je(n,s,i,r,t[o],20,-373897302),r=je(r,n,s,i,t[o+5],5,-701558691),i=je(i,r,n,s,t[o+10],9,38016083),s=je(s,i,r,n,t[o+15],14,-660478335),n=je(n,s,i,r,t[o+4],20,-405537848),r=je(r,n,s,i,t[o+9],5,568446438),i=je(i,r,n,s,t[o+14],9,-1019803690),s=je(s,i,r,n,t[o+3],14,-187363961),n=je(n,s,i,r,t[o+8],20,1163531501),r=je(r,n,s,i,t[o+13],5,-1444681467),i=je(i,r,n,s,t[o+2],9,-51403784),s=je(s,i,r,n,t[o+7],14,1735328473),n=je(n,s,i,r,t[o+12],20,-1926607734),r=ze(r,n,s,i,t[o+5],4,-378558),i=ze(i,r,n,s,t[o+8],11,-2022574463),s=ze(s,i,r,n,t[o+11],16,1839030562),n=ze(n,s,i,r,t[o+14],23,-35309556),r=ze(r,n,s,i,t[o+1],4,-1530992060),i=ze(i,r,n,s,t[o+4],11,1272893353),s=ze(s,i,r,n,t[o+7],16,-155497632),n=ze(n,s,i,r,t[o+10],23,-1094730640),r=ze(r,n,s,i,t[o+13],4,681279174),i=ze(i,r,n,s,t[o],11,-358537222),s=ze(s,i,r,n,t[o+3],16,-722521979),n=ze(n,s,i,r,t[o+6],23,76029189),r=ze(r,n,s,i,t[o+9],4,-640364487),i=ze(i,r,n,s,t[o+12],11,-421815835),s=ze(s,i,r,n,t[o+15],16,530742520),n=ze(n,s,i,r,t[o+2],23,-995338651),r=$e(r,n,s,i,t[o],6,-198630844),i=$e(i,r,n,s,t[o+7],10,1126891415),s=$e(s,i,r,n,t[o+14],15,-1416354905),n=$e(n,s,i,r,t[o+5],21,-57434055),r=$e(r,n,s,i,t[o+12],6,1700485571),i=$e(i,r,n,s,t[o+3],10,-1894986606),s=$e(s,i,r,n,t[o+10],15,-1051523),n=$e(n,s,i,r,t[o+1],21,-2054922799),r=$e(r,n,s,i,t[o+8],6,1873313359),i=$e(i,r,n,s,t[o+15],10,-30611744),s=$e(s,i,r,n,t[o+6],15,-1560198380),n=$e(n,s,i,r,t[o+13],21,1309151649),r=$e(r,n,s,i,t[o+4],6,-145523070),i=$e(i,r,n,s,t[o+11],10,-1120210379),s=$e(s,i,r,n,t[o+2],15,718787259),n=$e(n,s,i,r,t[o+9],21,-343485551),r=St(r,u),n=St(n,d),s=St(s,m),i=St(i,b)}return[r,n,s,i]}function Va(t){if(t.length===0)return[];for(var e=t.length*8,r=new Uint32Array(Ni(e)),n=0;n<e;n+=8)r[n>>5]|=(t[n/8]&255)<<n%32;return r}function St(t,e){var r=(t&65535)+(e&65535),n=(t>>16)+(e>>16)+(r>>16);return n<<16|r&65535}function Ka(t,e){return t<<e|t>>>32-e}function yn(t,e,r,n,s,i){return St(Ka(St(St(e,t),St(n,i)),s),r)}function De(t,e,r,n,s,i,o){return yn(e&r|~e&n,t,e,s,i,o)}function je(t,e,r,n,s,i,o){return yn(e&n|r&~n,t,e,s,i,o)}function ze(t,e,r,n,s,i,o){return yn(e^r^n,t,e,s,i,o)}function $e(t,e,r,n,s,i,o){return yn(r^(e|~n),t,e,s,i,o)}var Wa=Li("v3",48,$a);function Ja(t,e,r,n){switch(t){case 0:return e&r^~e&n;case 1:return e^r^n;case 2:return e&r^e&n^r&n;case 3:return e^r^n}}function Tn(t,e){return t<<e|t>>>32-e}function Ga(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var n=unescape(encodeURIComponent(t));t=[];for(var s=0;s<n.length;++s)t.push(n.charCodeAt(s))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),u=new Array(o),d=0;d<o;++d){for(var m=new Uint32Array(16),b=0;b<16;++b)m[b]=t[d*64+b*4]<<24|t[d*64+b*4+1]<<16|t[d*64+b*4+2]<<8|t[d*64+b*4+3];u[d]=m}u[o-1][14]=(t.length-1)*8/Math.pow(2,32),u[o-1][14]=Math.floor(u[o-1][14]),u[o-1][15]=(t.length-1)*8&4294967295;for(var N=0;N<o;++N){for(var x=new Uint32Array(80),w=0;w<16;++w)x[w]=u[N][w];for(var k=16;k<80;++k)x[k]=Tn(x[k-3]^x[k-8]^x[k-14]^x[k-16],1);for(var A=r[0],M=r[1],C=r[2],z=r[3],$=r[4],re=0;re<80;++re){var Y=Math.floor(re/20),ae=Tn(A,5)+Ja(Y,M,C,z)+$+e[Y]+x[re]>>>0;$=z,z=C,C=Tn(M,30)>>>0,M=A,A=ae}r[0]=r[0]+A>>>0,r[1]=r[1]+M>>>0,r[2]=r[2]+C>>>0,r[3]=r[3]+z>>>0,r[4]=r[4]+$>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,r[0]&255,r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,r[1]&255,r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,r[2]&255,r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,r[3]&255,r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,r[4]&255]}var Ya=Li("v5",80,Ga);const Ha="00000000-0000-0000-0000-000000000000";function Xa(t){if(!os(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const Qa=Object.freeze(Object.defineProperty({__proto__:null,NIL:Ha,parse:Ci,stringify:is,v1:Ma,v3:Wa,v4:na,v5:Ya,validate:os,version:Xa},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ls=BigInt(0),Xn=BigInt(1);function Mt(t,e=""){if(typeof t!="boolean"){const r=e&&`"${e}"`;throw new Error(r+"expected boolean, got type="+typeof t)}return t}function rt(t,e,r=""){const n=gn(t),s=t?.length,i=e!==void 0;if(!n||i&&s!==e){const o=r&&`"${r}" `,u=i?` of length ${e}`:"",d=n?`length=${s}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+u+", got "+d)}return t}function Fr(t){const e=t.toString(16);return e.length&1?"0"+e:e}function Fi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?ls:BigInt("0x"+t)}function wn(t){return Fi(Ut(t))}function mr(t){return sa(t),Fi(Ut(Uint8Array.from(t).reverse()))}function fs(t,e){return qr(t.toString(16).padStart(e*2,"0"))}function Pi(t,e){return fs(t,e).reverse()}function Te(t,e,r){let n;if(typeof e=="string")try{n=qr(e)}catch(i){throw new Error(t+" must be hex string or Uint8Array, cause: "+i)}else if(gn(e))n=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const s=n.length;if(typeof r=="number"&&s!==r)throw new Error(t+" of length "+r+" expected, got "+s);return n}function Ks(t){return Uint8Array.from(t)}const On=t=>typeof t=="bigint"&&ls<=t;function ec(t,e,r){return On(t)&&On(e)&&On(r)&&e<=t&&t<r}function Qn(t,e,r,n){if(!ec(e,r,n))throw new Error("expected valid "+t+": "+r+" <= n < "+n+", got "+e)}function Mi(t){let e;for(e=0;t>ls;t>>=Xn,e+=1);return e}const Rr=t=>(Xn<<BigInt(t))-Xn;function tc(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");const n=w=>new Uint8Array(w),s=w=>Uint8Array.of(w);let i=n(t),o=n(t),u=0;const d=()=>{i.fill(1),o.fill(0),u=0},m=(...w)=>r(o,i,...w),b=(w=n(0))=>{o=m(s(0),w),i=m(),w.length!==0&&(o=m(s(1),w),i=m())},N=()=>{if(u++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const k=[];for(;w<e;){i=m();const A=i.slice();k.push(A),w+=i.length}return ot(...k)};return(w,k)=>{d(),b(w);let A;for(;!(A=k(N()));)b();return d(),A}}function Tr(t,e,r={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function n(s,i,o){const u=t[s];if(o&&u===void 0)return;const d=typeof u;if(d!==i||u===null)throw new Error(`param "${s}" is invalid: expected ${i}, got ${d}`)}Object.entries(e).forEach(([s,i])=>n(s,i,!1)),Object.entries(r).forEach(([s,i])=>n(s,i,!0))}function en(t){const e=new WeakMap;return(r,...n)=>{const s=e.get(r);if(s!==void 0)return s;const i=t(r,...n);return e.set(r,i),i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ge=BigInt(0),Pe=BigInt(1),Rt=BigInt(2),Di=BigInt(3),ji=BigInt(4),zi=BigInt(5),rc=BigInt(7),$i=BigInt(8),nc=BigInt(9),qi=BigInt(16);function Le(t,e){const r=t%e;return r>=Ge?r:e+r}function Re(t,e,r){let n=t;for(;e-- >Ge;)n*=n,n%=r;return n}function Ws(t,e){if(t===Ge)throw new Error("invert: expected non-zero number");if(e<=Ge)throw new Error("invert: expected positive modulus, got "+e);let r=Le(t,e),n=e,s=Ge,i=Pe;for(;r!==Ge;){const u=n/r,d=n%r,m=s-i*u;n=r,r=d,s=i,i=m}if(n!==Pe)throw new Error("invert: does not exist");return Le(s,e)}function hs(t,e,r){if(!t.eql(t.sqr(e),r))throw new Error("Cannot find square root")}function Zi(t,e){const r=(t.ORDER+Pe)/ji,n=t.pow(e,r);return hs(t,n,e),n}function sc(t,e){const r=(t.ORDER-zi)/$i,n=t.mul(e,Rt),s=t.pow(n,r),i=t.mul(e,s),o=t.mul(t.mul(i,Rt),s),u=t.mul(i,t.sub(o,t.ONE));return hs(t,u,e),u}function ic(t){const e=Dt(t),r=Vi(t),n=r(e,e.neg(e.ONE)),s=r(e,n),i=r(e,e.neg(n)),o=(t+rc)/qi;return(u,d)=>{let m=u.pow(d,o),b=u.mul(m,n);const N=u.mul(m,s),x=u.mul(m,i),w=u.eql(u.sqr(b),d),k=u.eql(u.sqr(N),d);m=u.cmov(m,b,w),b=u.cmov(x,N,k);const A=u.eql(u.sqr(b),d),M=u.cmov(m,b,A);return hs(u,M,d),M}}function Vi(t){if(t<Di)throw new Error("sqrt is not defined for small field");let e=t-Pe,r=0;for(;e%Rt===Ge;)e/=Rt,r++;let n=Rt;const s=Dt(t);for(;Js(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(r===1)return Zi;let i=s.pow(n,e);const o=(e+Pe)/Rt;return function(d,m){if(d.is0(m))return m;if(Js(d,m)!==1)throw new Error("Cannot find square root");let b=r,N=d.mul(d.ONE,i),x=d.pow(m,e),w=d.pow(m,o);for(;!d.eql(x,d.ONE);){if(d.is0(x))return d.ZERO;let k=1,A=d.sqr(x);for(;!d.eql(A,d.ONE);)if(k++,A=d.sqr(A),k===b)throw new Error("Cannot find square root");const M=Pe<<BigInt(b-k-1),C=d.pow(N,M);b=k,N=d.sqr(C),x=d.mul(x,N),w=d.mul(w,C)}return w}}function oc(t){return t%ji===Di?Zi:t%$i===zi?sc:t%qi===nc?ic(t):Vi(t)}const ac=(t,e)=>(Le(t,e)&Pe)===Pe,cc=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function uc(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},r=cc.reduce((n,s)=>(n[s]="function",n),e);return Tr(t,r),t}function dc(t,e,r){if(r<Ge)throw new Error("invalid exponent, negatives unsupported");if(r===Ge)return t.ONE;if(r===Pe)return e;let n=t.ONE,s=e;for(;r>Ge;)r&Pe&&(n=t.mul(n,s)),s=t.sqr(s),r>>=Pe;return n}function Ki(t,e,r=!1){const n=new Array(e.length).fill(r?t.ZERO:void 0),s=e.reduce((o,u,d)=>t.is0(u)?o:(n[d]=o,t.mul(o,u)),t.ONE),i=t.inv(s);return e.reduceRight((o,u,d)=>t.is0(u)?o:(n[d]=t.mul(o,n[d]),t.mul(o,u)),i),n}function Js(t,e){const r=(t.ORDER-Pe)/Rt,n=t.pow(e,r),s=t.eql(n,t.ONE),i=t.eql(n,t.ZERO),o=t.eql(n,t.neg(t.ONE));if(!s&&!i&&!o)throw new Error("invalid Legendre symbol result");return s?1:i?0:-1}function Wi(t,e){e!==void 0&&ia(e);const r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Dt(t,e,r=!1,n={}){if(t<=Ge)throw new Error("invalid field: expected ORDER > 0, got "+t);let s,i,o=!1,u;if(typeof e=="object"&&e!=null){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const x=e;x.BITS&&(s=x.BITS),x.sqrt&&(i=x.sqrt),typeof x.isLE=="boolean"&&(r=x.isLE),typeof x.modFromBytes=="boolean"&&(o=x.modFromBytes),u=x.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(i=n.sqrt);const{nBitLength:d,nByteLength:m}=Wi(t,s);if(m>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let b;const N=Object.freeze({ORDER:t,isLE:r,BITS:d,BYTES:m,MASK:Rr(d),ZERO:Ge,ONE:Pe,allowedLengths:u,create:x=>Le(x,t),isValid:x=>{if(typeof x!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof x);return Ge<=x&&x<t},is0:x=>x===Ge,isValidNot0:x=>!N.is0(x)&&N.isValid(x),isOdd:x=>(x&Pe)===Pe,neg:x=>Le(-x,t),eql:(x,w)=>x===w,sqr:x=>Le(x*x,t),add:(x,w)=>Le(x+w,t),sub:(x,w)=>Le(x-w,t),mul:(x,w)=>Le(x*w,t),pow:(x,w)=>dc(N,x,w),div:(x,w)=>Le(x*Ws(w,t),t),sqrN:x=>x*x,addN:(x,w)=>x+w,subN:(x,w)=>x-w,mulN:(x,w)=>x*w,inv:x=>Ws(x,t),sqrt:i||(x=>(b||(b=oc(t)),b(N,x))),toBytes:x=>r?Pi(x,m):fs(x,m),fromBytes:(x,w=!0)=>{if(u){if(!u.includes(x.length)||x.length>m)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+x.length);const A=new Uint8Array(m);A.set(x,r?0:A.length-x.length),x=A}if(x.length!==m)throw new Error("Field.fromBytes: expected "+m+" bytes, got "+x.length);let k=r?mr(x):wn(x);if(o&&(k=Le(k,t)),!w&&!N.isValid(k))throw new Error("invalid field element: outside of range 0..ORDER");return k},invertBatch:x=>Ki(N,x),cmov:(x,w,k)=>k?w:x});return Object.freeze(N)}function Ji(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function Gi(t){const e=Ji(t);return e+Math.ceil(e/2)}function lc(t,e,r=!1){const n=t.length,s=Ji(e),i=Gi(e);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const o=r?mr(t):wn(t),u=Le(o,e-Pe)+Pe;return r?Pi(u,s):fs(u,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const er=BigInt(0),Tt=BigInt(1);function tn(t,e){const r=e.negate();return t?r:e}function Ot(t,e){const r=Ki(t.Fp,e.map(n=>n.Z));return e.map((n,s)=>t.fromAffine(n.toAffine(r[s])))}function Yi(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Un(t,e){Yi(t,e);const r=Math.ceil(e/t)+1,n=2**(t-1),s=2**t,i=Rr(t),o=BigInt(t);return{windows:r,windowSize:n,mask:i,maxNumber:s,shiftBy:o}}function Gs(t,e,r){const{windowSize:n,mask:s,maxNumber:i,shiftBy:o}=r;let u=Number(t&s),d=t>>o;u>n&&(u-=i,d+=Tt);const m=e*n,b=m+Math.abs(u)-1,N=u===0,x=u<0,w=e%2!==0;return{nextN:d,offset:b,isZero:N,isNeg:x,isNegF:w,offsetF:m}}function fc(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((r,n)=>{if(!(r instanceof e))throw new Error("invalid point at index "+n)})}function hc(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((r,n)=>{if(!e.isValid(r))throw new Error("invalid scalar at index "+n)})}const Cn=new WeakMap,Hi=new WeakMap;function Ln(t){return Hi.get(t)||1}function Ys(t){if(t!==er)throw new Error("invalid wNAF")}class Xi{constructor(e,r){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=r}_unsafeLadder(e,r,n=this.ZERO){let s=e;for(;r>er;)r&Tt&&(n=n.add(s)),s=s.double(),r>>=Tt;return n}precomputeWindow(e,r){const{windows:n,windowSize:s}=Un(r,this.bits),i=[];let o=e,u=o;for(let d=0;d<n;d++){u=o,i.push(u);for(let m=1;m<s;m++)u=u.add(o),i.push(u);o=u.double()}return i}wNAF(e,r,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,i=this.BASE;const o=Un(e,this.bits);for(let u=0;u<o.windows;u++){const{nextN:d,offset:m,isZero:b,isNeg:N,isNegF:x,offsetF:w}=Gs(n,u,o);n=d,b?i=i.add(tn(x,r[w])):s=s.add(tn(N,r[m]))}return Ys(n),{p:s,f:i}}wNAFUnsafe(e,r,n,s=this.ZERO){const i=Un(e,this.bits);for(let o=0;o<i.windows&&n!==er;o++){const{nextN:u,offset:d,isZero:m,isNeg:b}=Gs(n,o,i);if(n=u,!m){const N=r[d];s=s.add(b?N.negate():N)}}return Ys(n),s}getPrecomputes(e,r,n){let s=Cn.get(r);return s||(s=this.precomputeWindow(r,e),e!==1&&(typeof n=="function"&&(s=n(s)),Cn.set(r,s))),s}cached(e,r,n){const s=Ln(e);return this.wNAF(s,this.getPrecomputes(s,e,n),r)}unsafe(e,r,n,s){const i=Ln(e);return i===1?this._unsafeLadder(e,r,s):this.wNAFUnsafe(i,this.getPrecomputes(i,e,n),r,s)}createCache(e,r){Yi(r,this.bits),Hi.set(e,r),Cn.delete(e)}hasCache(e){return Ln(e)!==1}}function pc(t,e,r,n){let s=e,i=t.ZERO,o=t.ZERO;for(;r>er||n>er;)r&Tt&&(i=i.add(s)),n&Tt&&(o=o.add(s)),s=s.double(),r>>=Tt,n>>=Tt;return{p1:i,p2:o}}function Qi(t,e,r,n){fc(r,t),hc(n,e);const s=r.length,i=n.length;if(s!==i)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,u=Mi(BigInt(s));let d=1;u>12?d=u-3:u>4?d=u-2:u>0&&(d=2);const m=Rr(d),b=new Array(Number(m)+1).fill(o),N=Math.floor((e.BITS-1)/d)*d;let x=o;for(let w=N;w>=0;w-=d){b.fill(o);for(let A=0;A<i;A++){const M=n[A],C=Number(M>>BigInt(w)&m);b[C]=b[C].add(r[A])}let k=o;for(let A=b.length-1,M=o;A>0;A--)M=M.add(b[A]),k=k.add(M);if(x=x.add(k),w!==0)for(let A=0;A<d;A++)x=x.double()}return x}function Hs(t,e,r){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return uc(e),e}else return Dt(t,{isLE:r})}function eo(t,e,r={},n){if(n===void 0&&(n=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const d of["p","n","h"]){const m=e[d];if(!(typeof m=="bigint"&&m>er))throw new Error(`CURVE.${d} must be positive bigint`)}const s=Hs(e.p,r.Fp,n),i=Hs(e.n,r.Fn,n),u=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const d of u)if(!s.isValid(e[d]))throw new Error(`CURVE.${d} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:i}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Xs=(t,e)=>(t+(t>=0?e:-e)/to)/e;function mc(t,e,r){const[[n,s],[i,o]]=e,u=Xs(o*t,r),d=Xs(-s*t,r);let m=t-u*n-d*i,b=-u*s-d*o;const N=m<gt,x=b<gt;N&&(m=-m),x&&(b=-b);const w=Rr(Math.ceil(Mi(r)/2))+Gt;if(m<gt||m>=w||b<gt||b>=w)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:N,k1:m,k2neg:x,k2:b}}function es(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Nn(t,e){const r={};for(let n of Object.keys(e))r[n]=t[n]===void 0?e[n]:t[n];return Mt(r.lowS,"lowS"),Mt(r.prehash,"prehash"),r.format!==void 0&&es(r.format),r}class gc extends Error{constructor(e=""){super(e)}}const ht={Err:gc,_tlv:{encode:(t,e)=>{const{Err:r}=ht;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length&1)throw new r("tlv.encode: unpadded data");const n=e.length/2,s=Fr(n);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?Fr(s.length/2|128):"";return Fr(t)+i+s+e},decode(t,e){const{Err:r}=ht;let n=0;if(t<0||t>256)throw new r("tlv.encode: wrong tag");if(e.length<2||e[n++]!==t)throw new r("tlv.decode: wrong tlv");const s=e[n++],i=!!(s&128);let o=0;if(!i)o=s;else{const d=s&127;if(!d)throw new r("tlv.decode(long): indefinite length not supported");if(d>4)throw new r("tlv.decode(long): byte length is too big");const m=e.subarray(n,n+d);if(m.length!==d)throw new r("tlv.decode: length bytes not complete");if(m[0]===0)throw new r("tlv.decode(long): zero leftmost byte");for(const b of m)o=o<<8|b;if(n+=d,o<128)throw new r("tlv.decode(long): not minimal encoding")}const u=e.subarray(n,n+o);if(u.length!==o)throw new r("tlv.decode: wrong value length");return{v:u,l:e.subarray(n+o)}}},_int:{encode(t){const{Err:e}=ht;if(t<gt)throw new e("integer: negative integers are not allowed");let r=Fr(t);if(Number.parseInt(r[0],16)&8&&(r="00"+r),r.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return r},decode(t){const{Err:e}=ht;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return wn(t)}},toSig(t){const{Err:e,_int:r,_tlv:n}=ht,s=Te("signature",t),{v:i,l:o}=n.decode(48,s);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:u,l:d}=n.decode(2,i),{v:m,l:b}=n.decode(2,d);if(b.length)throw new e("invalid signature: left bytes after parsing");return{r:r.decode(u),s:r.decode(m)}},hexFromSig(t){const{_tlv:e,_int:r}=ht,n=e.encode(2,r.encode(t.r)),s=e.encode(2,r.encode(t.s)),i=n+s;return e.encode(48,i)}},gt=BigInt(0),Gt=BigInt(1),to=BigInt(2),Pr=BigInt(3),yc=BigInt(4);function Wt(t,e){const{BYTES:r}=t;let n;if(typeof e=="bigint")n=e;else{let s=Te("private key",e);try{n=t.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${r}, got ${typeof e}`)}}if(!t.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function wc(t,e={}){const r=eo("weierstrass",t,e),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o,n:u}=i;Tr(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:d}=e;if(d&&(!n.is0(i.a)||typeof d.beta!="bigint"||!Array.isArray(d.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const m=no(n,s);function b(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function N(L,B,I){const{x:O,y:Z}=B.toAffine(),J=n.toBytes(O);if(Mt(I,"isCompressed"),I){b();const se=!n.isOdd(Z);return ot(ro(se),J)}else return ot(Uint8Array.of(4),J,n.toBytes(Z))}function x(L){rt(L,void 0,"Point");const{publicKey:B,publicKeyUncompressed:I}=m,O=L.length,Z=L[0],J=L.subarray(1);if(O===B&&(Z===2||Z===3)){const se=n.fromBytes(J);if(!n.isValid(se))throw new Error("bad point: is not on curve, wrong x");const ee=A(se);let te;try{te=n.sqrt(ee)}catch(l){const h=l instanceof Error?": "+l.message:"";throw new Error("bad point: is not on curve, sqrt error"+h)}b();const G=n.isOdd(te);return(Z&1)===1!==G&&(te=n.neg(te)),{x:se,y:te}}else if(O===I&&Z===4){const se=n.BYTES,ee=n.fromBytes(J.subarray(0,se)),te=n.fromBytes(J.subarray(se,se*2));if(!M(ee,te))throw new Error("bad point: is not on curve");return{x:ee,y:te}}else throw new Error(`bad point: got length ${O}, expected compressed=${B} or uncompressed=${I}`)}const w=e.toBytes||N,k=e.fromBytes||x;function A(L){const B=n.sqr(L),I=n.mul(B,L);return n.add(n.add(I,n.mul(L,i.a)),i.b)}function M(L,B){const I=n.sqr(B),O=A(L);return n.eql(I,O)}if(!M(i.Gx,i.Gy))throw new Error("bad curve params: generator point");const C=n.mul(n.pow(i.a,Pr),yc),z=n.mul(n.sqr(i.b),BigInt(27));if(n.is0(n.add(C,z)))throw new Error("bad curve params: a or b");function $(L,B,I=!1){if(!n.isValid(B)||I&&n.is0(B))throw new Error(`bad point coordinate ${L}`);return B}function re(L){if(!(L instanceof _))throw new Error("ProjectivePoint expected")}function Y(L){if(!d||!d.basises)throw new Error("no endo");return mc(L,d.basises,s.ORDER)}const ae=en((L,B)=>{const{X:I,Y:O,Z}=L;if(n.eql(Z,n.ONE))return{x:I,y:O};const J=L.is0();B==null&&(B=J?n.ONE:n.inv(Z));const se=n.mul(I,B),ee=n.mul(O,B),te=n.mul(Z,B);if(J)return{x:n.ZERO,y:n.ZERO};if(!n.eql(te,n.ONE))throw new Error("invZ was invalid");return{x:se,y:ee}}),me=en(L=>{if(L.is0()){if(e.allowInfinityPoint&&!n.is0(L.Y))return;throw new Error("bad point: ZERO")}const{x:B,y:I}=L.toAffine();if(!n.isValid(B)||!n.isValid(I))throw new Error("bad point: x or y not field elements");if(!M(B,I))throw new Error("bad point: equation left != right");if(!L.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function le(L,B,I,O,Z){return I=new _(n.mul(I.X,L),I.Y,I.Z),B=tn(O,B),I=tn(Z,I),B.add(I)}class _{constructor(B,I,O){this.X=$("x",B),this.Y=$("y",I,!0),this.Z=$("z",O),Object.freeze(this)}static CURVE(){return i}static fromAffine(B){const{x:I,y:O}=B||{};if(!B||!n.isValid(I)||!n.isValid(O))throw new Error("invalid affine point");if(B instanceof _)throw new Error("projective point not allowed");return n.is0(I)&&n.is0(O)?_.ZERO:new _(I,O,n.ONE)}static fromBytes(B){const I=_.fromAffine(k(rt(B,void 0,"point")));return I.assertValidity(),I}static fromHex(B){return _.fromBytes(Te("pointHex",B))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(B=8,I=!0){return P.createCache(this,B),I||this.multiply(Pr),this}assertValidity(){me(this)}hasEvenY(){const{y:B}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(B)}equals(B){re(B);const{X:I,Y:O,Z}=this,{X:J,Y:se,Z:ee}=B,te=n.eql(n.mul(I,ee),n.mul(J,Z)),G=n.eql(n.mul(O,ee),n.mul(se,Z));return te&&G}negate(){return new _(this.X,n.neg(this.Y),this.Z)}double(){const{a:B,b:I}=i,O=n.mul(I,Pr),{X:Z,Y:J,Z:se}=this;let ee=n.ZERO,te=n.ZERO,G=n.ZERO,v=n.mul(Z,Z),l=n.mul(J,J),h=n.mul(se,se),g=n.mul(Z,J);return g=n.add(g,g),G=n.mul(Z,se),G=n.add(G,G),ee=n.mul(B,G),te=n.mul(O,h),te=n.add(ee,te),ee=n.sub(l,te),te=n.add(l,te),te=n.mul(ee,te),ee=n.mul(g,ee),G=n.mul(O,G),h=n.mul(B,h),g=n.sub(v,h),g=n.mul(B,g),g=n.add(g,G),G=n.add(v,v),v=n.add(G,v),v=n.add(v,h),v=n.mul(v,g),te=n.add(te,v),h=n.mul(J,se),h=n.add(h,h),v=n.mul(h,g),ee=n.sub(ee,v),G=n.mul(h,l),G=n.add(G,G),G=n.add(G,G),new _(ee,te,G)}add(B){re(B);const{X:I,Y:O,Z}=this,{X:J,Y:se,Z:ee}=B;let te=n.ZERO,G=n.ZERO,v=n.ZERO;const l=i.a,h=n.mul(i.b,Pr);let g=n.mul(I,J),F=n.mul(O,se),j=n.mul(Z,ee),oe=n.add(I,O),ce=n.add(J,se);oe=n.mul(oe,ce),ce=n.add(g,F),oe=n.sub(oe,ce),ce=n.add(I,Z);let Ee=n.add(J,ee);return ce=n.mul(ce,Ee),Ee=n.add(g,j),ce=n.sub(ce,Ee),Ee=n.add(O,Z),te=n.add(se,ee),Ee=n.mul(Ee,te),te=n.add(F,j),Ee=n.sub(Ee,te),v=n.mul(l,ce),te=n.mul(h,j),v=n.add(te,v),te=n.sub(F,v),v=n.add(F,v),G=n.mul(te,v),F=n.add(g,g),F=n.add(F,g),j=n.mul(l,j),ce=n.mul(h,ce),F=n.add(F,j),j=n.sub(g,j),j=n.mul(l,j),ce=n.add(ce,j),g=n.mul(F,ce),G=n.add(G,g),g=n.mul(Ee,ce),te=n.mul(oe,te),te=n.sub(te,g),g=n.mul(oe,F),v=n.mul(Ee,v),v=n.add(v,g),new _(te,G,v)}subtract(B){return this.add(B.negate())}is0(){return this.equals(_.ZERO)}multiply(B){const{endo:I}=e;if(!s.isValidNot0(B))throw new Error("invalid scalar: out of range");let O,Z;const J=se=>P.cached(this,se,ee=>Ot(_,ee));if(I){const{k1neg:se,k1:ee,k2neg:te,k2:G}=Y(B),{p:v,f:l}=J(ee),{p:h,f:g}=J(G);Z=l.add(g),O=le(I.beta,v,h,se,te)}else{const{p:se,f:ee}=J(B);O=se,Z=ee}return Ot(_,[O,Z])[0]}multiplyUnsafe(B){const{endo:I}=e,O=this;if(!s.isValid(B))throw new Error("invalid scalar: out of range");if(B===gt||O.is0())return _.ZERO;if(B===Gt)return O;if(P.hasCache(this))return this.multiply(B);if(I){const{k1neg:Z,k1:J,k2neg:se,k2:ee}=Y(B),{p1:te,p2:G}=pc(_,O,J,ee);return le(I.beta,te,G,Z,se)}else return P.unsafe(O,B)}multiplyAndAddUnsafe(B,I,O){const Z=this.multiplyUnsafe(I).add(B.multiplyUnsafe(O));return Z.is0()?void 0:Z}toAffine(B){return ae(this,B)}isTorsionFree(){const{isTorsionFree:B}=e;return o===Gt?!0:B?B(_,this):P.unsafe(this,u).is0()}clearCofactor(){const{clearCofactor:B}=e;return o===Gt?this:B?B(_,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(B=!0){return Mt(B,"isCompressed"),this.assertValidity(),w(_,this,B)}toHex(B=!0){return Ut(this.toBytes(B))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(B=!0){return this.toBytes(B)}_setWindowSize(B){this.precompute(B)}static normalizeZ(B){return Ot(_,B)}static msm(B,I){return Qi(_,s,B,I)}static fromPrivateKey(B){return _.BASE.multiply(Wt(s,B))}}_.BASE=new _(i.Gx,i.Gy,n.ONE),_.ZERO=new _(n.ZERO,n.ONE,n.ZERO),_.Fp=n,_.Fn=s;const S=s.BITS,P=new Xi(_,e.endo?Math.ceil(S/2):S);return _.BASE.precompute(8),_}function ro(t){return Uint8Array.of(t?2:3)}function no(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function bc(t,e={}){const{Fn:r}=t,n=e.randomBytes||as,s=Object.assign(no(t.Fp,r),{seed:Gi(r.ORDER)});function i(w){try{return!!Wt(r,w)}catch{return!1}}function o(w,k){const{publicKey:A,publicKeyUncompressed:M}=s;try{const C=w.length;return k===!0&&C!==A||k===!1&&C!==M?!1:!!t.fromBytes(w)}catch{return!1}}function u(w=n(s.seed)){return lc(rt(w,s.seed,"seed"),r.ORDER)}function d(w,k=!0){return t.BASE.multiply(Wt(r,w)).toBytes(k)}function m(w){const k=u(w);return{secretKey:k,publicKey:d(k)}}function b(w){if(typeof w=="bigint")return!1;if(w instanceof t)return!0;const{secretKey:k,publicKey:A,publicKeyUncompressed:M}=s;if(r.allowedLengths||k===A)return;const C=Te("key",w).length;return C===A||C===M}function N(w,k,A=!0){if(b(w)===!0)throw new Error("first arg must be private key");if(b(k)===!1)throw new Error("second arg must be public key");const M=Wt(r,w);return t.fromHex(k).multiply(M).toBytes(A)}return Object.freeze({getPublicKey:d,getSharedSecret:N,keygen:m,Point:t,utils:{isValidSecretKey:i,isValidPublicKey:o,randomSecretKey:u,isValidPrivateKey:i,randomPrivateKey:u,normPrivateKeyToScalar:w=>Wt(r,w),precompute(w=8,k=t.BASE){return k.precompute(w,!1)}},lengths:s})}function vc(t,e,r={}){oa(e),Tr(r,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=r.randomBytes||as,s=r.hmac||((I,...O)=>aa(e,I,ot(...O))),{Fp:i,Fn:o}=t,{ORDER:u,BITS:d}=o,{keygen:m,getPublicKey:b,getSharedSecret:N,utils:x,lengths:w}=bc(t,r),k={prehash:!1,lowS:typeof r.lowS=="boolean"?r.lowS:!1,format:void 0,extraEntropy:!1},A="compact";function M(I){const O=u>>Gt;return I>O}function C(I,O){if(!o.isValidNot0(O))throw new Error(`invalid signature ${I}: out of range 1..Point.Fn.ORDER`);return O}function z(I,O){es(O);const Z=w.signature,J=O==="compact"?Z:O==="recovered"?Z+1:void 0;return rt(I,J,`${O} signature`)}class ${constructor(O,Z,J){this.r=C("r",O),this.s=C("s",Z),J!=null&&(this.recovery=J),Object.freeze(this)}static fromBytes(O,Z=A){z(O,Z);let J;if(Z==="der"){const{r:G,s:v}=ht.toSig(rt(O));return new $(G,v)}Z==="recovered"&&(J=O[0],Z="compact",O=O.subarray(1));const se=o.BYTES,ee=O.subarray(0,se),te=O.subarray(se,se*2);return new $(o.fromBytes(ee),o.fromBytes(te),J)}static fromHex(O,Z){return this.fromBytes(qr(O),Z)}addRecoveryBit(O){return new $(this.r,this.s,O)}recoverPublicKey(O){const Z=i.ORDER,{r:J,s:se,recovery:ee}=this;if(ee==null||![0,1,2,3].includes(ee))throw new Error("recovery id invalid");if(u*to<Z&&ee>1)throw new Error("recovery id is ambiguous for h>1 curve");const G=ee===2||ee===3?J+u:J;if(!i.isValid(G))throw new Error("recovery id 2 or 3 invalid");const v=i.toBytes(G),l=t.fromBytes(ot(ro((ee&1)===0),v)),h=o.inv(G),g=Y(Te("msgHash",O)),F=o.create(-g*h),j=o.create(se*h),oe=t.BASE.multiplyUnsafe(F).add(l.multiplyUnsafe(j));if(oe.is0())throw new Error("point at infinify");return oe.assertValidity(),oe}hasHighS(){return M(this.s)}toBytes(O=A){if(es(O),O==="der")return qr(ht.hexFromSig(this));const Z=o.toBytes(this.r),J=o.toBytes(this.s);if(O==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return ot(Uint8Array.of(this.recovery),Z,J)}return ot(Z,J)}toHex(O){return Ut(this.toBytes(O))}assertValidity(){}static fromCompact(O){return $.fromBytes(Te("sig",O),"compact")}static fromDER(O){return $.fromBytes(Te("sig",O),"der")}normalizeS(){return this.hasHighS()?new $(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ut(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ut(this.toBytes("compact"))}}const re=r.bits2int||function(O){if(O.length>8192)throw new Error("input is too large");const Z=wn(O),J=O.length*8-d;return J>0?Z>>BigInt(J):Z},Y=r.bits2int_modN||function(O){return o.create(re(O))},ae=Rr(d);function me(I){return Qn("num < 2^"+d,I,gt,ae),o.toBytes(I)}function le(I,O){return rt(I,void 0,"message"),O?rt(e(I),void 0,"prehashed message"):I}function _(I,O,Z){if(["recovered","canonical"].some(F=>F in Z))throw new Error("sign() legacy options not supported");const{lowS:J,prehash:se,extraEntropy:ee}=Nn(Z,k);I=le(I,se);const te=Y(I),G=Wt(o,O),v=[me(G),me(te)];if(ee!=null&&ee!==!1){const F=ee===!0?n(w.secretKey):ee;v.push(Te("extraEntropy",F))}const l=ot(...v),h=te;function g(F){const j=re(F);if(!o.isValidNot0(j))return;const oe=o.inv(j),ce=t.BASE.multiply(j).toAffine(),Ee=o.create(ce.x);if(Ee===gt)return;const dt=o.create(oe*o.create(h+Ee*G));if(dt===gt)return;let ur=(ce.x===Ee?0:2)|Number(ce.y&Gt),lt=dt;return J&&M(dt)&&(lt=o.neg(dt),ur^=1),new $(Ee,lt,ur)}return{seed:l,k2sig:g}}function S(I,O,Z={}){I=Te("message",I);const{seed:J,k2sig:se}=_(I,O,Z);return tc(e.outputLen,o.BYTES,s)(J,se)}function P(I){let O;const Z=typeof I=="string"||gn(I),J=!Z&&I!==null&&typeof I=="object"&&typeof I.r=="bigint"&&typeof I.s=="bigint";if(!Z&&!J)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(J)O=new $(I.r,I.s);else if(Z){try{O=$.fromBytes(Te("sig",I),"der")}catch(se){if(!(se instanceof ht.Err))throw se}if(!O)try{O=$.fromBytes(Te("sig",I),"compact")}catch{return!1}}return O||!1}function L(I,O,Z,J={}){const{lowS:se,prehash:ee,format:te}=Nn(J,k);if(Z=Te("publicKey",Z),O=le(Te("message",O),ee),"strict"in J)throw new Error("options.strict was renamed to lowS");const G=te===void 0?P(I):$.fromBytes(Te("sig",I),te);if(G===!1)return!1;try{const v=t.fromBytes(Z);if(se&&G.hasHighS())return!1;const{r:l,s:h}=G,g=Y(O),F=o.inv(h),j=o.create(g*F),oe=o.create(l*F),ce=t.BASE.multiplyUnsafe(j).add(v.multiplyUnsafe(oe));return ce.is0()?!1:o.create(ce.x)===l}catch{return!1}}function B(I,O,Z={}){const{prehash:J}=Nn(Z,k);return O=le(O,J),$.fromBytes(I,"recovered").recoverPublicKey(O).toBytes()}return Object.freeze({keygen:m,getPublicKey:b,getSharedSecret:N,utils:x,lengths:w,Point:t,sign:S,verify:L,recoverPublicKey:B,Signature:$,hash:e})}function xc(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp;let n=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const s=Dt(e.n,{BITS:t.nBitLength,allowedLengths:n,modFromBytes:t.wrapPrivateKey}),i={Fp:r,Fn:s,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:i}}function Ec(t){const{CURVE:e,curveOpts:r}=xc(t),n={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:r,hash:t.hash,ecdsaOpts:n}}function _c(t,e){const r=e.Point;return Object.assign({},e,{ProjectivePoint:r,CURVE:Object.assign({},t,Wi(r.Fn.ORDER,r.Fn.BITS))})}function Sc(t){const{CURVE:e,curveOpts:r,hash:n,ecdsaOpts:s}=Ec(t),i=wc(e,r),o=vc(i,n,s);return _c(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ic(t,e){const r=n=>Sc({...t,hash:n});return{...r(e),create:r}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ps={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},Ac={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},Qs=BigInt(2);function Bc(t){const e=ps.p,r=BigInt(3),n=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),u=BigInt(44),d=BigInt(88),m=t*t*t%e,b=m*m*t%e,N=Re(b,r,e)*b%e,x=Re(N,r,e)*b%e,w=Re(x,Qs,e)*m%e,k=Re(w,s,e)*w%e,A=Re(k,i,e)*k%e,M=Re(A,u,e)*A%e,C=Re(M,d,e)*M%e,z=Re(C,u,e)*A%e,$=Re(z,r,e)*b%e,re=Re($,o,e)*k%e,Y=Re(re,n,e)*m%e,ae=Re(Y,Qs,e);if(!ts.eql(ts.sqr(ae),t))throw new Error("Cannot find square root");return ae}const ts=Dt(ps.p,{sqrt:Bc}),kc=Ic({...ps,Fp:ts,lowS:!0,endo:Ac},ca);let ir=class extends Error{name="BaseError";cause;constructor(e,r={}){super(e,r.cause?{cause:r.cause}:void 0),this.cause=r.cause}};class Rc extends ir{name="AddMiniApp.InvalidDomainManifest";constructor(){super("Invalid domain manifest")}}let Tc=class extends ir{name="AddMiniApp.RejectedByUser";constructor(){super("Add miniapp rejected by user")}},so=class extends ir{name="SignIn.RejectedByUser";constructor(){super("Sign in rejected by user")}};class Oc extends ir{name="SignManifest.RejectedByUser";constructor(){super("Sign manifest rejected by user")}}class Uc extends ir{name="SignManifest.InvalidDomain";constructor(){super("Invalid domain provided")}}class Cc extends ir{name="SignManifest.GenericError";constructor(e="Manifest signing failed"){super(e)}}const Lc=/[@#$%^&*+=/\\|~]/,Nc=/(!{2,}|\?{2,}|-{2,})/,Fc=/[\u{1F300}-\u{1F9FF}]|[\u{2702}-\u{27B0}]|[\u{2600}-\u{26FF}]|[\u{2B00}-\u{2BFF}]/u,or=({max:t,noSpaces:e}={})=>(e?Oe().max(t??Number.POSITIVE_INFINITY).regex(/^\S*$/,"Spaces are not allowed"):Oe().max(t??Number.POSITIVE_INFINITY)).refine(n=>!Fc.test(n),{message:"Emojis and symbols are not allowed"}).refine(n=>!Lc.test(n),{message:"Special characters (@, #, $, %, ^, &, *, +, =, /, \\, |, ~, , ) are not allowed"}).refine(n=>!Nc.test(n),{message:"Repeated punctuations (!!, ??, --) are not allowed"}),Ve=Oe().url().startsWith("https://",{message:"Must be an https url"}).max(1024).refine(t=>!t.includes(" "),{message:"URL must not contain spaces"}).refine(t=>{try{const e=new URL(t).hostname;return!(e==="localhost"||e.endsWith(".localhost")||/^(\d{1,3}\.){3}\d{1,3}$/.test(e)||e.startsWith("[")&&e.endsWith("]"))}catch{return!1}},{message:"URL must not use IP addresses or localhost"}),ms=Oe().max(32),io=Oe().max(32),Pc=/^[-a-z0-9]{3,8}:[-_a-zA-Z0-9]{1,32}\/(?:[-a-z0-9]{3,8}:[-.%a-zA-Z0-9]{1,128}(?:\/[-.%a-zA-Z0-9]{1,78})?|native)$/,Mc=Oe().regex(Pc,{message:"Invalid CAIP-19 asset ID"}),gs=Oe().regex(/^#([0-9A-F]{3}|[0-9A-F]{6})$/i,{message:"Invalid hex color code. It should be in the format #RRGGBB or #RGB."}),Dc=/^(?!.*\.\.)([a-zA-Z0-9]([a-zA-Z0-9-]*[a-zA-Z0-9])?\.)+[a-zA-Z]{2,}$/,jc=Oe().max(1024).regex(Dc,{message:"Must be a valid domain name (e.g., example.com, sub.example.com)"}).refine(t=>!t.includes("://"),{message:"Domain must not include protocol (http://, https://, etc.)"}).refine(t=>!t.includes("/"),{message:"Domain must not include path separators"}).refine(t=>!t.includes("@"),{message:"Domain must not include @ symbol"}).refine(t=>!t.includes(":"),{message:"Domain must not include port numbers"}),zc=Qr([Ze("1:1"),Ze("3:2")]),$c=Me({header:Oe(),payload:Oe(),signature:Oe()});Me({fid:Oi(),type:Ze("app_key"),key:Oe().startsWith("0x")});const qc=Me({type:Ze("launch_frame"),name:ms,url:Ve.optional(),splashImageUrl:Ve.optional(),splashBackgroundColor:gs.optional()}),Zc=Me({type:Ze("launch_miniapp"),name:ms,url:Ve.optional(),splashImageUrl:Ve.optional(),splashBackgroundColor:gs.optional()}),Vc=Me({type:Ze("view_token"),token:Mc}),Kc=Ui("type",[Zc,Vc,qc]),Wc=Me({title:io,action:Kc});Me({version:Qr([Oe(),Oi()]).transform(t=>String(t)).pipe(Qr([Ze("next"),Ze("1")])),imageUrl:Ve,aspectRatio:zc.optional(),button:Wc});const oo=Me({url:Oe(),token:Oe()});Me({notificationId:Oe().max(128),title:Oe().max(32),body:Oe().max(128),targetUrl:Ve,tokens:Oe().array().max(100)});Me({result:Me({successfulTokens:Ct(Oe()),invalidTokens:Ct(Oe()),rateLimitedTokens:Ct(Oe())})});const Jc=Me({event:Ze("miniapp_added"),notificationDetails:oo.optional()}),Gc=Me({event:Ze("miniapp_removed")}),Yc=Me({event:Ze("notifications_enabled"),notificationDetails:oo.required()}),Hc=Me({event:Ze("notifications_disabled")});Ui("event",[Jc,Gc,Yc,Hc]);const Xc=["wallet.getEthereumProvider","wallet.getSolanaProvider","actions.ready","actions.openUrl","actions.close","actions.setPrimaryButton","actions.addMiniApp","actions.signIn","actions.viewCast","actions.viewProfile","actions.composeCast","actions.viewToken","actions.sendToken","actions.swapToken","actions.openMiniApp","actions.requestCameraAndMicrophoneAccess","experimental.signManifest","haptics.impactOccurred","haptics.notificationOccurred","haptics.selectionChanged","back"],Qc=["games","social","finance","utility","productivity","health-fitness","news-media","music","shopping","education","developer-tools","entertainment","art-creativity"],eu=ds(Qc),tu=Qr([Ze("0.0.0"),Ze("0.0.1"),Ze("1"),Ze("next")]),ru=or({max:30}),nu=or({max:170}),su=Ct(Ve).max(3),iu=Ct(or({max:20,noSpaces:!0})).max(5),ou=or({max:30}),au=or({max:30}),cu=or({max:100}),uu=Pa(),du=["eip155:1","eip155:8453","eip155:42161","eip155:421614","eip155:84532","eip155:666666666","eip155:100","eip155:10","eip155:11155420","eip155:137","eip155:11155111","eip155:7777777","eip155:130","eip155:10143","eip155:42220","solana:5eykt4UsFv8P8NJdTREpY1vzqKqZKvdp"];function ao(t){const e=new Set(t);return Array.from(e)}const lu=Ct(ds(du)).transform(ao),fu=Ct(ds(Xc)).transform(ao),ei=Me({version:tu,name:ms,iconUrl:Ve,homeUrl:Ve,imageUrl:Ve.optional(),buttonTitle:io.optional(),splashImageUrl:Ve.optional(),splashBackgroundColor:gs.optional(),webhookUrl:Ve.optional(),subtitle:ru.optional(),description:nu.optional(),screenshotUrls:su.optional(),primaryCategory:eu.optional(),tags:iu.optional(),heroImageUrl:Ve.optional(),tagline:ou.optional(),ogTitle:au.optional(),ogDescription:cu.optional(),ogImageUrl:Ve.optional(),noindex:uu.optional(),requiredChains:lu.optional(),requiredCapabilities:fu.optional(),castShareUrl:Ve.optional(),canonicalDomain:jc.optional()}).refine(t=>{if(t.castShareUrl===void 0)return!0;try{const e=new URL(t.homeUrl).hostname,r=new URL(t.castShareUrl).hostname;return e===r}catch{return!1}},{message:"castShareUrl must have the same domain as homeUrl",path:["castShareUrl"]});Me({accountAssociation:$c,miniapp:ei.optional(),frame:ei.optional()}).refine(t=>t.frame&&t.miniapp?JSON.stringify(t.frame)===JSON.stringify(t.miniapp):!0,{message:'If both "frame" and "miniapp" are provided, they must be identical',path:["frame","miniapp"]}).transform(t=>({...t,frame:t.frame??t.miniapp}));var Fn={},lr={},ti;function hu(){if(ti)return lr;ti=1,lr.byteLength=u,lr.toByteArray=m,lr.fromByteArray=x;for(var t=[],e=[],r=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,i=n.length;s<i;++s)t[s]=n[s],e[n.charCodeAt(s)]=s;e[45]=62,e[95]=63;function o(w){var k=w.length;if(k%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=w.indexOf("=");A===-1&&(A=k);var M=A===k?0:4-A%4;return[A,M]}function u(w){var k=o(w),A=k[0],M=k[1];return(A+M)*3/4-M}function d(w,k,A){return(k+A)*3/4-A}function m(w){var k,A=o(w),M=A[0],C=A[1],z=new r(d(w,M,C)),$=0,re=C>0?M-4:M,Y;for(Y=0;Y<re;Y+=4)k=e[w.charCodeAt(Y)]<<18|e[w.charCodeAt(Y+1)]<<12|e[w.charCodeAt(Y+2)]<<6|e[w.charCodeAt(Y+3)],z[$++]=k>>16&255,z[$++]=k>>8&255,z[$++]=k&255;return C===2&&(k=e[w.charCodeAt(Y)]<<2|e[w.charCodeAt(Y+1)]>>4,z[$++]=k&255),C===1&&(k=e[w.charCodeAt(Y)]<<10|e[w.charCodeAt(Y+1)]<<4|e[w.charCodeAt(Y+2)]>>2,z[$++]=k>>8&255,z[$++]=k&255),z}function b(w){return t[w>>18&63]+t[w>>12&63]+t[w>>6&63]+t[w&63]}function N(w,k,A){for(var M,C=[],z=k;z<A;z+=3)M=(w[z]<<16&16711680)+(w[z+1]<<8&65280)+(w[z+2]&255),C.push(b(M));return C.join("")}function x(w){for(var k,A=w.length,M=A%3,C=[],z=16383,$=0,re=A-M;$<re;$+=z)C.push(N(w,$,$+z>re?re:$+z));return M===1?(k=w[A-1],C.push(t[k>>2]+t[k<<4&63]+"==")):M===2&&(k=(w[A-2]<<8)+w[A-1],C.push(t[k>>10]+t[k>>4&63]+t[k<<2&63]+"=")),C.join("")}return lr}var Mr={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var ri;function pu(){return ri||(ri=1,Mr.read=function(t,e,r,n,s){var i,o,u=s*8-n-1,d=(1<<u)-1,m=d>>1,b=-7,N=r?s-1:0,x=r?-1:1,w=t[e+N];for(N+=x,i=w&(1<<-b)-1,w>>=-b,b+=u;b>0;i=i*256+t[e+N],N+=x,b-=8);for(o=i&(1<<-b)-1,i>>=-b,b+=n;b>0;o=o*256+t[e+N],N+=x,b-=8);if(i===0)i=1-m;else{if(i===d)return o?NaN:(w?-1:1)*(1/0);o=o+Math.pow(2,n),i=i-m}return(w?-1:1)*o*Math.pow(2,i-n)},Mr.write=function(t,e,r,n,s,i){var o,u,d,m=i*8-s-1,b=(1<<m)-1,N=b>>1,x=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=n?0:i-1,k=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=b):(o=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-o))<1&&(o--,d*=2),o+N>=1?e+=x/d:e+=x*Math.pow(2,1-N),e*d>=2&&(o++,d/=2),o+N>=b?(u=0,o=b):o+N>=1?(u=(e*d-1)*Math.pow(2,s),o=o+N):(u=e*Math.pow(2,N-1)*Math.pow(2,s),o=0));s>=8;t[r+w]=u&255,w+=k,u/=256,s-=8);for(o=o<<s|u,m+=s;m>0;t[r+w]=o&255,w+=k,o/=256,m-=8);t[r+w-k]|=A*128}),Mr}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var ni;function ys(){return ni||(ni=1,(function(t){const e=hu(),r=pu(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=z,t.INSPECT_MAX_BYTES=50;const s=2147483647;t.kMaxLength=s,u.TYPED_ARRAY_SUPPORT=i(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function i(){try{const f=new Uint8Array(1),a={foo:function(){return 42}};return Object.setPrototypeOf(a,Uint8Array.prototype),Object.setPrototypeOf(f,a),f.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function o(f){if(f>s)throw new RangeError('The value "'+f+'" is invalid for option "size"');const a=new Uint8Array(f);return Object.setPrototypeOf(a,u.prototype),a}function u(f,a,c){if(typeof f=="number"){if(typeof a=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(f)}return d(f,a,c)}u.poolSize=8192;function d(f,a,c){if(typeof f=="string")return x(f,a);if(ArrayBuffer.isView(f))return k(f);if(f==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f);if(it(f,ArrayBuffer)||f&&it(f.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(it(f,SharedArrayBuffer)||f&&it(f.buffer,SharedArrayBuffer)))return A(f,a,c);if(typeof f=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const p=f.valueOf&&f.valueOf();if(p!=null&&p!==f)return u.from(p,a,c);const E=M(f);if(E)return E;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof f[Symbol.toPrimitive]=="function")return u.from(f[Symbol.toPrimitive]("string"),a,c);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof f)}u.from=function(f,a,c){return d(f,a,c)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function m(f){if(typeof f!="number")throw new TypeError('"size" argument must be of type number');if(f<0)throw new RangeError('The value "'+f+'" is invalid for option "size"')}function b(f,a,c){return m(f),f<=0?o(f):a!==void 0?typeof c=="string"?o(f).fill(a,c):o(f).fill(a):o(f)}u.alloc=function(f,a,c){return b(f,a,c)};function N(f){return m(f),o(f<0?0:C(f)|0)}u.allocUnsafe=function(f){return N(f)},u.allocUnsafeSlow=function(f){return N(f)};function x(f,a){if((typeof a!="string"||a==="")&&(a="utf8"),!u.isEncoding(a))throw new TypeError("Unknown encoding: "+a);const c=$(f,a)|0;let p=o(c);const E=p.write(f,a);return E!==c&&(p=p.slice(0,E)),p}function w(f){const a=f.length<0?0:C(f.length)|0,c=o(a);for(let p=0;p<a;p+=1)c[p]=f[p]&255;return c}function k(f){if(it(f,Uint8Array)){const a=new Uint8Array(f);return A(a.buffer,a.byteOffset,a.byteLength)}return w(f)}function A(f,a,c){if(a<0||f.byteLength<a)throw new RangeError('"offset" is outside of buffer bounds');if(f.byteLength<a+(c||0))throw new RangeError('"length" is outside of buffer bounds');let p;return a===void 0&&c===void 0?p=new Uint8Array(f):c===void 0?p=new Uint8Array(f,a):p=new Uint8Array(f,a,c),Object.setPrototypeOf(p,u.prototype),p}function M(f){if(u.isBuffer(f)){const a=C(f.length)|0,c=o(a);return c.length===0||f.copy(c,0,0,a),c}if(f.length!==void 0)return typeof f.length!="number"||In(f.length)?o(0):w(f);if(f.type==="Buffer"&&Array.isArray(f.data))return w(f.data)}function C(f){if(f>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return f|0}function z(f){return+f!=f&&(f=0),u.alloc(+f)}u.isBuffer=function(a){return a!=null&&a._isBuffer===!0&&a!==u.prototype},u.compare=function(a,c){if(it(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),it(c,Uint8Array)&&(c=u.from(c,c.offset,c.byteLength)),!u.isBuffer(a)||!u.isBuffer(c))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(a===c)return 0;let p=a.length,E=c.length;for(let U=0,D=Math.min(p,E);U<D;++U)if(a[U]!==c[U]){p=a[U],E=c[U];break}return p<E?-1:E<p?1:0},u.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(a,c){if(!Array.isArray(a))throw new TypeError('"list" argument must be an Array of Buffers');if(a.length===0)return u.alloc(0);let p;if(c===void 0)for(c=0,p=0;p<a.length;++p)c+=a[p].length;const E=u.allocUnsafe(c);let U=0;for(p=0;p<a.length;++p){let D=a[p];if(it(D,Uint8Array))U+D.length>E.length?(u.isBuffer(D)||(D=u.from(D)),D.copy(E,U)):Uint8Array.prototype.set.call(E,D,U);else if(u.isBuffer(D))D.copy(E,U);else throw new TypeError('"list" argument must be an Array of Buffers');U+=D.length}return E};function $(f,a){if(u.isBuffer(f))return f.length;if(ArrayBuffer.isView(f)||it(f,ArrayBuffer))return f.byteLength;if(typeof f!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof f);const c=f.length,p=arguments.length>2&&arguments[2]===!0;if(!p&&c===0)return 0;let E=!1;for(;;)switch(a){case"ascii":case"latin1":case"binary":return c;case"utf8":case"utf-8":return Sn(f).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c*2;case"hex":return c>>>1;case"base64":return Us(f).length;default:if(E)return p?-1:Sn(f).length;a=(""+a).toLowerCase(),E=!0}}u.byteLength=$;function re(f,a,c){let p=!1;if((a===void 0||a<0)&&(a=0),a>this.length||((c===void 0||c>this.length)&&(c=this.length),c<=0)||(c>>>=0,a>>>=0,c<=a))return"";for(f||(f="utf8");;)switch(f){case"hex":return ee(this,a,c);case"utf8":case"utf-8":return I(this,a,c);case"ascii":return J(this,a,c);case"latin1":case"binary":return se(this,a,c);case"base64":return B(this,a,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return te(this,a,c);default:if(p)throw new TypeError("Unknown encoding: "+f);f=(f+"").toLowerCase(),p=!0}}u.prototype._isBuffer=!0;function Y(f,a,c){const p=f[a];f[a]=f[c],f[c]=p}u.prototype.swap16=function(){const a=this.length;if(a%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let c=0;c<a;c+=2)Y(this,c,c+1);return this},u.prototype.swap32=function(){const a=this.length;if(a%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let c=0;c<a;c+=4)Y(this,c,c+3),Y(this,c+1,c+2);return this},u.prototype.swap64=function(){const a=this.length;if(a%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let c=0;c<a;c+=8)Y(this,c,c+7),Y(this,c+1,c+6),Y(this,c+2,c+5),Y(this,c+3,c+4);return this},u.prototype.toString=function(){const a=this.length;return a===0?"":arguments.length===0?I(this,0,a):re.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(a){if(!u.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:u.compare(this,a)===0},u.prototype.inspect=function(){let a="";const c=t.INSPECT_MAX_BYTES;return a=this.toString("hex",0,c).replace(/(.{2})/g,"$1 ").trim(),this.length>c&&(a+=" ... "),"<Buffer "+a+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(a,c,p,E,U){if(it(a,Uint8Array)&&(a=u.from(a,a.offset,a.byteLength)),!u.isBuffer(a))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof a);if(c===void 0&&(c=0),p===void 0&&(p=a?a.length:0),E===void 0&&(E=0),U===void 0&&(U=this.length),c<0||p>a.length||E<0||U>this.length)throw new RangeError("out of range index");if(E>=U&&c>=p)return 0;if(E>=U)return-1;if(c>=p)return 1;if(c>>>=0,p>>>=0,E>>>=0,U>>>=0,this===a)return 0;let D=U-E,ge=p-c;const Be=Math.min(D,ge),Ie=this.slice(E,U),ke=a.slice(c,p);for(let _e=0;_e<Be;++_e)if(Ie[_e]!==ke[_e]){D=Ie[_e],ge=ke[_e];break}return D<ge?-1:ge<D?1:0};function ae(f,a,c,p,E){if(f.length===0)return-1;if(typeof c=="string"?(p=c,c=0):c>2147483647?c=2147483647:c<-2147483648&&(c=-2147483648),c=+c,In(c)&&(c=E?0:f.length-1),c<0&&(c=f.length+c),c>=f.length){if(E)return-1;c=f.length-1}else if(c<0)if(E)c=0;else return-1;if(typeof a=="string"&&(a=u.from(a,p)),u.isBuffer(a))return a.length===0?-1:me(f,a,c,p,E);if(typeof a=="number")return a=a&255,typeof Uint8Array.prototype.indexOf=="function"?E?Uint8Array.prototype.indexOf.call(f,a,c):Uint8Array.prototype.lastIndexOf.call(f,a,c):me(f,[a],c,p,E);throw new TypeError("val must be string, number or Buffer")}function me(f,a,c,p,E){let U=1,D=f.length,ge=a.length;if(p!==void 0&&(p=String(p).toLowerCase(),p==="ucs2"||p==="ucs-2"||p==="utf16le"||p==="utf-16le")){if(f.length<2||a.length<2)return-1;U=2,D/=2,ge/=2,c/=2}function Be(ke,_e){return U===1?ke[_e]:ke.readUInt16BE(_e*U)}let Ie;if(E){let ke=-1;for(Ie=c;Ie<D;Ie++)if(Be(f,Ie)===Be(a,ke===-1?0:Ie-ke)){if(ke===-1&&(ke=Ie),Ie-ke+1===ge)return ke*U}else ke!==-1&&(Ie-=Ie-ke),ke=-1}else for(c+ge>D&&(c=D-ge),Ie=c;Ie>=0;Ie--){let ke=!0;for(let _e=0;_e<ge;_e++)if(Be(f,Ie+_e)!==Be(a,_e)){ke=!1;break}if(ke)return Ie}return-1}u.prototype.includes=function(a,c,p){return this.indexOf(a,c,p)!==-1},u.prototype.indexOf=function(a,c,p){return ae(this,a,c,p,!0)},u.prototype.lastIndexOf=function(a,c,p){return ae(this,a,c,p,!1)};function le(f,a,c,p){c=Number(c)||0;const E=f.length-c;p?(p=Number(p),p>E&&(p=E)):p=E;const U=a.length;p>U/2&&(p=U/2);let D;for(D=0;D<p;++D){const ge=parseInt(a.substr(D*2,2),16);if(In(ge))return D;f[c+D]=ge}return D}function _(f,a,c,p){return Nr(Sn(a,f.length-c),f,c,p)}function S(f,a,c,p){return Nr(Xo(a),f,c,p)}function P(f,a,c,p){return Nr(Us(a),f,c,p)}function L(f,a,c,p){return Nr(Qo(a,f.length-c),f,c,p)}u.prototype.write=function(a,c,p,E){if(c===void 0)E="utf8",p=this.length,c=0;else if(p===void 0&&typeof c=="string")E=c,p=this.length,c=0;else if(isFinite(c))c=c>>>0,isFinite(p)?(p=p>>>0,E===void 0&&(E="utf8")):(E=p,p=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const U=this.length-c;if((p===void 0||p>U)&&(p=U),a.length>0&&(p<0||c<0)||c>this.length)throw new RangeError("Attempt to write outside buffer bounds");E||(E="utf8");let D=!1;for(;;)switch(E){case"hex":return le(this,a,c,p);case"utf8":case"utf-8":return _(this,a,c,p);case"ascii":case"latin1":case"binary":return S(this,a,c,p);case"base64":return P(this,a,c,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,a,c,p);default:if(D)throw new TypeError("Unknown encoding: "+E);E=(""+E).toLowerCase(),D=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function B(f,a,c){return a===0&&c===f.length?e.fromByteArray(f):e.fromByteArray(f.slice(a,c))}function I(f,a,c){c=Math.min(f.length,c);const p=[];let E=a;for(;E<c;){const U=f[E];let D=null,ge=U>239?4:U>223?3:U>191?2:1;if(E+ge<=c){let Be,Ie,ke,_e;switch(ge){case 1:U<128&&(D=U);break;case 2:Be=f[E+1],(Be&192)===128&&(_e=(U&31)<<6|Be&63,_e>127&&(D=_e));break;case 3:Be=f[E+1],Ie=f[E+2],(Be&192)===128&&(Ie&192)===128&&(_e=(U&15)<<12|(Be&63)<<6|Ie&63,_e>2047&&(_e<55296||_e>57343)&&(D=_e));break;case 4:Be=f[E+1],Ie=f[E+2],ke=f[E+3],(Be&192)===128&&(Ie&192)===128&&(ke&192)===128&&(_e=(U&15)<<18|(Be&63)<<12|(Ie&63)<<6|ke&63,_e>65535&&_e<1114112&&(D=_e))}}D===null?(D=65533,ge=1):D>65535&&(D-=65536,p.push(D>>>10&1023|55296),D=56320|D&1023),p.push(D),E+=ge}return Z(p)}const O=4096;function Z(f){const a=f.length;if(a<=O)return String.fromCharCode.apply(String,f);let c="",p=0;for(;p<a;)c+=String.fromCharCode.apply(String,f.slice(p,p+=O));return c}function J(f,a,c){let p="";c=Math.min(f.length,c);for(let E=a;E<c;++E)p+=String.fromCharCode(f[E]&127);return p}function se(f,a,c){let p="";c=Math.min(f.length,c);for(let E=a;E<c;++E)p+=String.fromCharCode(f[E]);return p}function ee(f,a,c){const p=f.length;(!a||a<0)&&(a=0),(!c||c<0||c>p)&&(c=p);let E="";for(let U=a;U<c;++U)E+=ea[f[U]];return E}function te(f,a,c){const p=f.slice(a,c);let E="";for(let U=0;U<p.length-1;U+=2)E+=String.fromCharCode(p[U]+p[U+1]*256);return E}u.prototype.slice=function(a,c){const p=this.length;a=~~a,c=c===void 0?p:~~c,a<0?(a+=p,a<0&&(a=0)):a>p&&(a=p),c<0?(c+=p,c<0&&(c=0)):c>p&&(c=p),c<a&&(c=a);const E=this.subarray(a,c);return Object.setPrototypeOf(E,u.prototype),E};function G(f,a,c){if(f%1!==0||f<0)throw new RangeError("offset is not uint");if(f+a>c)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(a,c,p){a=a>>>0,c=c>>>0,p||G(a,c,this.length);let E=this[a],U=1,D=0;for(;++D<c&&(U*=256);)E+=this[a+D]*U;return E},u.prototype.readUintBE=u.prototype.readUIntBE=function(a,c,p){a=a>>>0,c=c>>>0,p||G(a,c,this.length);let E=this[a+--c],U=1;for(;c>0&&(U*=256);)E+=this[a+--c]*U;return E},u.prototype.readUint8=u.prototype.readUInt8=function(a,c){return a=a>>>0,c||G(a,1,this.length),this[a]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(a,c){return a=a>>>0,c||G(a,2,this.length),this[a]|this[a+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(a,c){return a=a>>>0,c||G(a,2,this.length),this[a]<<8|this[a+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(a,c){return a=a>>>0,c||G(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+this[a+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(a,c){return a=a>>>0,c||G(a,4,this.length),this[a]*16777216+(this[a+1]<<16|this[a+2]<<8|this[a+3])},u.prototype.readBigUInt64LE=bt(function(a){a=a>>>0,lt(a,"offset");const c=this[a],p=this[a+7];(c===void 0||p===void 0)&&dr(a,this.length-8);const E=c+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24,U=this[++a]+this[++a]*2**8+this[++a]*2**16+p*2**24;return BigInt(E)+(BigInt(U)<<BigInt(32))}),u.prototype.readBigUInt64BE=bt(function(a){a=a>>>0,lt(a,"offset");const c=this[a],p=this[a+7];(c===void 0||p===void 0)&&dr(a,this.length-8);const E=c*2**24+this[++a]*2**16+this[++a]*2**8+this[++a],U=this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+p;return(BigInt(E)<<BigInt(32))+BigInt(U)}),u.prototype.readIntLE=function(a,c,p){a=a>>>0,c=c>>>0,p||G(a,c,this.length);let E=this[a],U=1,D=0;for(;++D<c&&(U*=256);)E+=this[a+D]*U;return U*=128,E>=U&&(E-=Math.pow(2,8*c)),E},u.prototype.readIntBE=function(a,c,p){a=a>>>0,c=c>>>0,p||G(a,c,this.length);let E=c,U=1,D=this[a+--E];for(;E>0&&(U*=256);)D+=this[a+--E]*U;return U*=128,D>=U&&(D-=Math.pow(2,8*c)),D},u.prototype.readInt8=function(a,c){return a=a>>>0,c||G(a,1,this.length),this[a]&128?(255-this[a]+1)*-1:this[a]},u.prototype.readInt16LE=function(a,c){a=a>>>0,c||G(a,2,this.length);const p=this[a]|this[a+1]<<8;return p&32768?p|4294901760:p},u.prototype.readInt16BE=function(a,c){a=a>>>0,c||G(a,2,this.length);const p=this[a+1]|this[a]<<8;return p&32768?p|4294901760:p},u.prototype.readInt32LE=function(a,c){return a=a>>>0,c||G(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},u.prototype.readInt32BE=function(a,c){return a=a>>>0,c||G(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},u.prototype.readBigInt64LE=bt(function(a){a=a>>>0,lt(a,"offset");const c=this[a],p=this[a+7];(c===void 0||p===void 0)&&dr(a,this.length-8);const E=this[a+4]+this[a+5]*2**8+this[a+6]*2**16+(p<<24);return(BigInt(E)<<BigInt(32))+BigInt(c+this[++a]*2**8+this[++a]*2**16+this[++a]*2**24)}),u.prototype.readBigInt64BE=bt(function(a){a=a>>>0,lt(a,"offset");const c=this[a],p=this[a+7];(c===void 0||p===void 0)&&dr(a,this.length-8);const E=(c<<24)+this[++a]*2**16+this[++a]*2**8+this[++a];return(BigInt(E)<<BigInt(32))+BigInt(this[++a]*2**24+this[++a]*2**16+this[++a]*2**8+p)}),u.prototype.readFloatLE=function(a,c){return a=a>>>0,c||G(a,4,this.length),r.read(this,a,!0,23,4)},u.prototype.readFloatBE=function(a,c){return a=a>>>0,c||G(a,4,this.length),r.read(this,a,!1,23,4)},u.prototype.readDoubleLE=function(a,c){return a=a>>>0,c||G(a,8,this.length),r.read(this,a,!0,52,8)},u.prototype.readDoubleBE=function(a,c){return a=a>>>0,c||G(a,8,this.length),r.read(this,a,!1,52,8)};function v(f,a,c,p,E,U){if(!u.isBuffer(f))throw new TypeError('"buffer" argument must be a Buffer instance');if(a>E||a<U)throw new RangeError('"value" argument is out of bounds');if(c+p>f.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(a,c,p,E){if(a=+a,c=c>>>0,p=p>>>0,!E){const ge=Math.pow(2,8*p)-1;v(this,a,c,p,ge,0)}let U=1,D=0;for(this[c]=a&255;++D<p&&(U*=256);)this[c+D]=a/U&255;return c+p},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(a,c,p,E){if(a=+a,c=c>>>0,p=p>>>0,!E){const ge=Math.pow(2,8*p)-1;v(this,a,c,p,ge,0)}let U=p-1,D=1;for(this[c+U]=a&255;--U>=0&&(D*=256);)this[c+U]=a/D&255;return c+p},u.prototype.writeUint8=u.prototype.writeUInt8=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,1,255,0),this[c]=a&255,c+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,2,65535,0),this[c]=a&255,this[c+1]=a>>>8,c+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,2,65535,0),this[c]=a>>>8,this[c+1]=a&255,c+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,4,4294967295,0),this[c+3]=a>>>24,this[c+2]=a>>>16,this[c+1]=a>>>8,this[c]=a&255,c+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,4,4294967295,0),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4};function l(f,a,c,p,E){ur(a,p,E,f,c,7);let U=Number(a&BigInt(4294967295));f[c++]=U,U=U>>8,f[c++]=U,U=U>>8,f[c++]=U,U=U>>8,f[c++]=U;let D=Number(a>>BigInt(32)&BigInt(4294967295));return f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D,D=D>>8,f[c++]=D,c}function h(f,a,c,p,E){ur(a,p,E,f,c,7);let U=Number(a&BigInt(4294967295));f[c+7]=U,U=U>>8,f[c+6]=U,U=U>>8,f[c+5]=U,U=U>>8,f[c+4]=U;let D=Number(a>>BigInt(32)&BigInt(4294967295));return f[c+3]=D,D=D>>8,f[c+2]=D,D=D>>8,f[c+1]=D,D=D>>8,f[c]=D,c+8}u.prototype.writeBigUInt64LE=bt(function(a,c=0){return l(this,a,c,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=bt(function(a,c=0){return h(this,a,c,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(a,c,p,E){if(a=+a,c=c>>>0,!E){const Be=Math.pow(2,8*p-1);v(this,a,c,p,Be-1,-Be)}let U=0,D=1,ge=0;for(this[c]=a&255;++U<p&&(D*=256);)a<0&&ge===0&&this[c+U-1]!==0&&(ge=1),this[c+U]=(a/D>>0)-ge&255;return c+p},u.prototype.writeIntBE=function(a,c,p,E){if(a=+a,c=c>>>0,!E){const Be=Math.pow(2,8*p-1);v(this,a,c,p,Be-1,-Be)}let U=p-1,D=1,ge=0;for(this[c+U]=a&255;--U>=0&&(D*=256);)a<0&&ge===0&&this[c+U+1]!==0&&(ge=1),this[c+U]=(a/D>>0)-ge&255;return c+p},u.prototype.writeInt8=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,1,127,-128),a<0&&(a=255+a+1),this[c]=a&255,c+1},u.prototype.writeInt16LE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,2,32767,-32768),this[c]=a&255,this[c+1]=a>>>8,c+2},u.prototype.writeInt16BE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,2,32767,-32768),this[c]=a>>>8,this[c+1]=a&255,c+2},u.prototype.writeInt32LE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,4,2147483647,-2147483648),this[c]=a&255,this[c+1]=a>>>8,this[c+2]=a>>>16,this[c+3]=a>>>24,c+4},u.prototype.writeInt32BE=function(a,c,p){return a=+a,c=c>>>0,p||v(this,a,c,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),this[c]=a>>>24,this[c+1]=a>>>16,this[c+2]=a>>>8,this[c+3]=a&255,c+4},u.prototype.writeBigInt64LE=bt(function(a,c=0){return l(this,a,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=bt(function(a,c=0){return h(this,a,c,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function g(f,a,c,p,E,U){if(c+p>f.length)throw new RangeError("Index out of range");if(c<0)throw new RangeError("Index out of range")}function F(f,a,c,p,E){return a=+a,c=c>>>0,E||g(f,a,c,4),r.write(f,a,c,p,23,4),c+4}u.prototype.writeFloatLE=function(a,c,p){return F(this,a,c,!0,p)},u.prototype.writeFloatBE=function(a,c,p){return F(this,a,c,!1,p)};function j(f,a,c,p,E){return a=+a,c=c>>>0,E||g(f,a,c,8),r.write(f,a,c,p,52,8),c+8}u.prototype.writeDoubleLE=function(a,c,p){return j(this,a,c,!0,p)},u.prototype.writeDoubleBE=function(a,c,p){return j(this,a,c,!1,p)},u.prototype.copy=function(a,c,p,E){if(!u.isBuffer(a))throw new TypeError("argument should be a Buffer");if(p||(p=0),!E&&E!==0&&(E=this.length),c>=a.length&&(c=a.length),c||(c=0),E>0&&E<p&&(E=p),E===p||a.length===0||this.length===0)return 0;if(c<0)throw new RangeError("targetStart out of bounds");if(p<0||p>=this.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("sourceEnd out of bounds");E>this.length&&(E=this.length),a.length-c<E-p&&(E=a.length-c+p);const U=E-p;return this===a&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(c,p,E):Uint8Array.prototype.set.call(a,this.subarray(p,E),c),U},u.prototype.fill=function(a,c,p,E){if(typeof a=="string"){if(typeof c=="string"?(E=c,c=0,p=this.length):typeof p=="string"&&(E=p,p=this.length),E!==void 0&&typeof E!="string")throw new TypeError("encoding must be a string");if(typeof E=="string"&&!u.isEncoding(E))throw new TypeError("Unknown encoding: "+E);if(a.length===1){const D=a.charCodeAt(0);(E==="utf8"&&D<128||E==="latin1")&&(a=D)}}else typeof a=="number"?a=a&255:typeof a=="boolean"&&(a=Number(a));if(c<0||this.length<c||this.length<p)throw new RangeError("Out of range index");if(p<=c)return this;c=c>>>0,p=p===void 0?this.length:p>>>0,a||(a=0);let U;if(typeof a=="number")for(U=c;U<p;++U)this[U]=a;else{const D=u.isBuffer(a)?a:u.from(a,E),ge=D.length;if(ge===0)throw new TypeError('The value "'+a+'" is invalid for argument "value"');for(U=0;U<p-c;++U)this[U+c]=D[U%ge]}return this};const oe={};function ce(f,a,c){oe[f]=class extends c{constructor(){super(),Object.defineProperty(this,"message",{value:a.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${f}]`,this.stack,delete this.name}get code(){return f}set code(E){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:E,writable:!0})}toString(){return`${this.name} [${f}]: ${this.message}`}}}ce("ERR_BUFFER_OUT_OF_BOUNDS",function(f){return f?`${f} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ce("ERR_INVALID_ARG_TYPE",function(f,a){return`The "${f}" argument must be of type number. Received type ${typeof a}`},TypeError),ce("ERR_OUT_OF_RANGE",function(f,a,c){let p=`The value of "${f}" is out of range.`,E=c;return Number.isInteger(c)&&Math.abs(c)>2**32?E=Ee(String(c)):typeof c=="bigint"&&(E=String(c),(c>BigInt(2)**BigInt(32)||c<-(BigInt(2)**BigInt(32)))&&(E=Ee(E)),E+="n"),p+=` It must be ${a}. Received ${E}`,p},RangeError);function Ee(f){let a="",c=f.length;const p=f[0]==="-"?1:0;for(;c>=p+4;c-=3)a=`_${f.slice(c-3,c)}${a}`;return`${f.slice(0,c)}${a}`}function dt(f,a,c){lt(a,"offset"),(f[a]===void 0||f[a+c]===void 0)&&dr(a,f.length-(c+1))}function ur(f,a,c,p,E,U){if(f>c||f<a){const D=typeof a=="bigint"?"n":"";let ge;throw a===0||a===BigInt(0)?ge=`>= 0${D} and < 2${D} ** ${(U+1)*8}${D}`:ge=`>= -(2${D} ** ${(U+1)*8-1}${D}) and < 2 ** ${(U+1)*8-1}${D}`,new oe.ERR_OUT_OF_RANGE("value",ge,f)}dt(p,E,U)}function lt(f,a){if(typeof f!="number")throw new oe.ERR_INVALID_ARG_TYPE(a,"number",f)}function dr(f,a,c){throw Math.floor(f)!==f?(lt(f,c),new oe.ERR_OUT_OF_RANGE("offset","an integer",f)):a<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${a}`,f)}const Yo=/[^+/0-9A-Za-z-_]/g;function Ho(f){if(f=f.split("=")[0],f=f.trim().replace(Yo,""),f.length<2)return"";for(;f.length%4!==0;)f=f+"=";return f}function Sn(f,a){a=a||1/0;let c;const p=f.length;let E=null;const U=[];for(let D=0;D<p;++D){if(c=f.charCodeAt(D),c>55295&&c<57344){if(!E){if(c>56319){(a-=3)>-1&&U.push(239,191,189);continue}else if(D+1===p){(a-=3)>-1&&U.push(239,191,189);continue}E=c;continue}if(c<56320){(a-=3)>-1&&U.push(239,191,189),E=c;continue}c=(E-55296<<10|c-56320)+65536}else E&&(a-=3)>-1&&U.push(239,191,189);if(E=null,c<128){if((a-=1)<0)break;U.push(c)}else if(c<2048){if((a-=2)<0)break;U.push(c>>6|192,c&63|128)}else if(c<65536){if((a-=3)<0)break;U.push(c>>12|224,c>>6&63|128,c&63|128)}else if(c<1114112){if((a-=4)<0)break;U.push(c>>18|240,c>>12&63|128,c>>6&63|128,c&63|128)}else throw new Error("Invalid code point")}return U}function Xo(f){const a=[];for(let c=0;c<f.length;++c)a.push(f.charCodeAt(c)&255);return a}function Qo(f,a){let c,p,E;const U=[];for(let D=0;D<f.length&&!((a-=2)<0);++D)c=f.charCodeAt(D),p=c>>8,E=c%256,U.push(E),U.push(p);return U}function Us(f){return e.toByteArray(Ho(f))}function Nr(f,a,c,p){let E;for(E=0;E<p&&!(E+c>=a.length||E>=f.length);++E)a[E+c]=f[E];return E}function it(f,a){return f instanceof a||f!=null&&f.constructor!=null&&f.constructor.name!=null&&f.constructor.name===a.name}function In(f){return f!==f}const ea=(function(){const f="0123456789abcdef",a=new Array(256);for(let c=0;c<16;++c){const p=c*16;for(let E=0;E<16;++E)a[p+E]=f[c]+f[E]}return a})();function bt(f){return typeof BigInt>"u"?ta:f}function ta(){throw new Error("BigInt not supported")}})(Fn)),Fn}var ye=ys();/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const vt=BigInt(0),Fe=BigInt(1),Pn=BigInt(2),mu=BigInt(8);function gu(t,e,r,n){const s=t.sqr(r),i=t.sqr(n),o=t.add(t.mul(e.a,s),i),u=t.add(t.ONE,t.mul(e.d,t.mul(s,i)));return t.eql(o,u)}function yu(t,e={}){const r=eo("edwards",t,e,e.FpFnLE),{Fp:n,Fn:s}=r;let i=r.CURVE;const{h:o}=i;Tr(e,{},{uvRatio:"function"});const u=Pn<<BigInt(s.BYTES*8)-Fe,d=M=>n.create(M),m=e.uvRatio||((M,C)=>{try{return{isValid:!0,value:n.sqrt(n.div(M,C))}}catch{return{isValid:!1,value:vt}}});if(!gu(n,i,i.Gx,i.Gy))throw new Error("bad curve params: generator point");function b(M,C,z=!1){const $=z?Fe:vt;return Qn("coordinate "+M,C,$,u),C}function N(M){if(!(M instanceof k))throw new Error("ExtendedPoint expected")}const x=en((M,C)=>{const{X:z,Y:$,Z:re}=M,Y=M.is0();C==null&&(C=Y?mu:n.inv(re));const ae=d(z*C),me=d($*C),le=n.mul(re,C);if(Y)return{x:vt,y:Fe};if(le!==Fe)throw new Error("invZ was invalid");return{x:ae,y:me}}),w=en(M=>{const{a:C,d:z}=i;if(M.is0())throw new Error("bad point: ZERO");const{X:$,Y:re,Z:Y,T:ae}=M,me=d($*$),le=d(re*re),_=d(Y*Y),S=d(_*_),P=d(me*C),L=d(_*d(P+le)),B=d(S+d(z*d(me*le)));if(L!==B)throw new Error("bad point: equation left != right (1)");const I=d($*re),O=d(Y*ae);if(I!==O)throw new Error("bad point: equation left != right (2)");return!0});class k{constructor(C,z,$,re){this.X=b("x",C),this.Y=b("y",z),this.Z=b("z",$,!0),this.T=b("t",re),Object.freeze(this)}static CURVE(){return i}static fromAffine(C){if(C instanceof k)throw new Error("extended point not allowed");const{x:z,y:$}=C||{};return b("x",z),b("y",$),new k(z,$,Fe,d(z*$))}static fromBytes(C,z=!1){const $=n.BYTES,{a:re,d:Y}=i;C=Ks(rt(C,$,"point")),Mt(z,"zip215");const ae=Ks(C),me=C[$-1];ae[$-1]=me&-129;const le=mr(ae),_=z?u:n.ORDER;Qn("point.y",le,vt,_);const S=d(le*le),P=d(S-Fe),L=d(Y*S-re);let{isValid:B,value:I}=m(P,L);if(!B)throw new Error("bad point: invalid y coordinate");const O=(I&Fe)===Fe,Z=(me&128)!==0;if(!z&&I===vt&&Z)throw new Error("bad point: x=0 and x_0=1");return Z!==O&&(I=d(-I)),k.fromAffine({x:I,y:le})}static fromHex(C,z=!1){return k.fromBytes(Te("point",C),z)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(C=8,z=!0){return A.createCache(this,C),z||this.multiply(Pn),this}assertValidity(){w(this)}equals(C){N(C);const{X:z,Y:$,Z:re}=this,{X:Y,Y:ae,Z:me}=C,le=d(z*me),_=d(Y*re),S=d($*me),P=d(ae*re);return le===_&&S===P}is0(){return this.equals(k.ZERO)}negate(){return new k(d(-this.X),this.Y,this.Z,d(-this.T))}double(){const{a:C}=i,{X:z,Y:$,Z:re}=this,Y=d(z*z),ae=d($*$),me=d(Pn*d(re*re)),le=d(C*Y),_=z+$,S=d(d(_*_)-Y-ae),P=le+ae,L=P-me,B=le-ae,I=d(S*L),O=d(P*B),Z=d(S*B),J=d(L*P);return new k(I,O,J,Z)}add(C){N(C);const{a:z,d:$}=i,{X:re,Y,Z:ae,T:me}=this,{X:le,Y:_,Z:S,T:P}=C,L=d(re*le),B=d(Y*_),I=d(me*$*P),O=d(ae*S),Z=d((re+Y)*(le+_)-L-B),J=O-I,se=O+I,ee=d(B-z*L),te=d(Z*J),G=d(se*ee),v=d(Z*ee),l=d(J*se);return new k(te,G,l,v)}subtract(C){return this.add(C.negate())}multiply(C){if(!s.isValidNot0(C))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:z,f:$}=A.cached(this,C,re=>Ot(k,re));return Ot(k,[z,$])[0]}multiplyUnsafe(C,z=k.ZERO){if(!s.isValid(C))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return C===vt?k.ZERO:this.is0()||C===Fe?this:A.unsafe(this,C,$=>Ot(k,$),z)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return A.unsafe(this,i.n).is0()}toAffine(C){return x(this,C)}clearCofactor(){return o===Fe?this:this.multiplyUnsafe(o)}toBytes(){const{x:C,y:z}=this.toAffine(),$=n.toBytes(z);return $[$.length-1]|=C&Fe?128:0,$}toHex(){return Ut(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(C){return Ot(k,C)}static msm(C,z){return Qi(k,s,C,z)}_setWindowSize(C){this.precompute(C)}toRawBytes(){return this.toBytes()}}k.BASE=new k(i.Gx,i.Gy,Fe,d(i.Gx*i.Gy)),k.ZERO=new k(vt,Fe,Fe,vt),k.Fp=n,k.Fn=s;const A=new Xi(k,s.BITS);return k.BASE.precompute(8),k}function wu(t,e,r={}){if(typeof e!="function")throw new Error('"hash" function param is required');Tr(r,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:n}=r,{BASE:s,Fp:i,Fn:o}=t,u=r.randomBytes||as,d=r.adjustScalarBytes||(_=>_),m=r.domain||((_,S,P)=>{if(Mt(P,"phflag"),S.length||P)throw new Error("Contexts/pre-hash are not supported");return _});function b(_){return o.create(mr(_))}function N(_){const S=$.secretKey;_=Te("private key",_,S);const P=Te("hashed private key",e(_),2*S),L=d(P.slice(0,S)),B=P.slice(S,2*S),I=b(L);return{head:L,prefix:B,scalar:I}}function x(_){const{head:S,prefix:P,scalar:L}=N(_),B=s.multiply(L),I=B.toBytes();return{head:S,prefix:P,scalar:L,point:B,pointBytes:I}}function w(_){return x(_).pointBytes}function k(_=Uint8Array.of(),...S){const P=ot(...S);return b(e(m(P,Te("context",_),!!n)))}function A(_,S,P={}){_=Te("message",_),n&&(_=n(_));const{prefix:L,scalar:B,pointBytes:I}=x(S),O=k(P.context,L,_),Z=s.multiply(O).toBytes(),J=k(P.context,Z,I,_),se=o.create(O+J*B);if(!o.isValid(se))throw new Error("sign failed: invalid s");const ee=ot(Z,o.toBytes(se));return rt(ee,$.signature,"result")}const M={zip215:!0};function C(_,S,P,L=M){const{context:B,zip215:I}=L,O=$.signature;_=Te("signature",_,O),S=Te("message",S),P=Te("publicKey",P,$.publicKey),I!==void 0&&Mt(I,"zip215"),n&&(S=n(S));const Z=O/2,J=_.subarray(0,Z),se=mr(_.subarray(Z,O));let ee,te,G;try{ee=t.fromBytes(P,I),te=t.fromBytes(J,I),G=s.multiplyUnsafe(se)}catch{return!1}if(!I&&ee.isSmallOrder())return!1;const v=k(B,te.toBytes(),ee.toBytes(),S);return te.add(ee.multiplyUnsafe(v)).subtract(G).clearCofactor().is0()}const z=i.BYTES,$={secretKey:z,publicKey:z,signature:2*z,seed:z};function re(_=u($.seed)){return rt(_,$.seed,"seed")}function Y(_){const S=le.randomSecretKey(_);return{secretKey:S,publicKey:w(S)}}function ae(_){return gn(_)&&_.length===o.BYTES}function me(_,S){try{return!!t.fromBytes(_,S)}catch{return!1}}const le={getExtendedPublicKey:x,randomSecretKey:re,isValidSecretKey:ae,isValidPublicKey:me,toMontgomery(_){const{y:S}=t.fromBytes(_),P=$.publicKey,L=P===32;if(!L&&P!==57)throw new Error("only defined for 25519 and 448");const B=L?i.div(Fe+S,Fe-S):i.div(S-Fe,S+Fe);return i.toBytes(B)},toMontgomerySecret(_){const S=$.secretKey;rt(_,S);const P=e(_.subarray(0,S));return d(P).subarray(0,S)},randomPrivateKey:re,precompute(_=8,S=t.BASE){return S.precompute(_,!1)}};return Object.freeze({keygen:Y,getPublicKey:w,sign:A,verify:C,utils:le,Point:t,lengths:$})}function bu(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},r=t.Fp,n=Dt(e.n,t.nBitLength,!0),s={Fp:r,Fn:n,uvRatio:t.uvRatio},i={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:s,hash:t.hash,eddsaOpts:i}}function vu(t,e){const r=e.Point;return Object.assign({},e,{ExtendedPoint:r,CURVE:t,nBitLength:r.Fn.BITS,nByteLength:r.Fn.BYTES})}function xu(t){const{CURVE:e,curveOpts:r,hash:n,eddsaOpts:s}=bu(t),i=yu(e,r),o=wu(i,n,s);return vu(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Eu=BigInt(1),si=BigInt(2);BigInt(3);const _u=BigInt(5),Su=BigInt(8),ws=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),co={p:ws,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:Su,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function Iu(t){const e=BigInt(10),r=BigInt(20),n=BigInt(40),s=BigInt(80),i=ws,u=t*t%i*t%i,d=Re(u,si,i)*u%i,m=Re(d,Eu,i)*t%i,b=Re(m,_u,i)*m%i,N=Re(b,e,i)*b%i,x=Re(N,r,i)*N%i,w=Re(x,n,i)*x%i,k=Re(w,s,i)*w%i,A=Re(k,s,i)*w%i,M=Re(A,e,i)*b%i;return{pow_p_5_8:Re(M,si,i)*t%i,b2:u}}function Au(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const ii=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function Bu(t,e){const r=ws,n=Le(e*e*e,r),s=Le(n*n*e,r),i=Iu(t*s).pow_p_5_8;let o=Le(t*n*i,r);const u=Le(e*o*o,r),d=o,m=Le(o*ii,r),b=u===t,N=u===Le(-t,r),x=u===Le(-t*ii,r);return b&&(o=d),(N||x)&&(o=m),ac(o,r)&&(o=Le(-o,r)),{isValid:b||N,value:o}}const ku=Dt(co.p,{isLE:!0}),Ru={...co,Fp:ku,hash:ua,adjustScalarBytes:Au,uvRatio:Bu},Or=xu(Ru);var Dr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var oi;function Tu(){return oi||(oi=1,(function(t,e){var r=ys(),n=r.Buffer;function s(o,u){for(var d in o)u[d]=o[d]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=i);function i(o,u,d){return n(o,u,d)}i.prototype=Object.create(n.prototype),s(n,i),i.from=function(o,u,d){if(typeof o=="number")throw new TypeError("Argument must not be a number");return n(o,u,d)},i.alloc=function(o,u,d){if(typeof o!="number")throw new TypeError("Argument must be a number");var m=n(o);return u!==void 0?typeof d=="string"?m.fill(u,d):m.fill(u):m.fill(0),m},i.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n(o)},i.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(o)}})(Dr,Dr.exports)),Dr.exports}var Mn,ai;function Ou(){if(ai)return Mn;ai=1;var t=Tu().Buffer;function e(r){if(r.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),s=0;s<n.length;s++)n[s]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),u=o.charCodeAt(0);if(n[u]!==255)throw new TypeError(o+" is ambiguous");n[u]=i}var d=r.length,m=r.charAt(0),b=Math.log(d)/Math.log(256),N=Math.log(256)/Math.log(d);function x(A){if((Array.isArray(A)||A instanceof Uint8Array)&&(A=t.from(A)),!t.isBuffer(A))throw new TypeError("Expected Buffer");if(A.length===0)return"";for(var M=0,C=0,z=0,$=A.length;z!==$&&A[z]===0;)z++,M++;for(var re=($-z)*N+1>>>0,Y=new Uint8Array(re);z!==$;){for(var ae=A[z],me=0,le=re-1;(ae!==0||me<C)&&le!==-1;le--,me++)ae+=256*Y[le]>>>0,Y[le]=ae%d>>>0,ae=ae/d>>>0;if(ae!==0)throw new Error("Non-zero carry");C=me,z++}for(var _=re-C;_!==re&&Y[_]===0;)_++;for(var S=m.repeat(M);_<re;++_)S+=r.charAt(Y[_]);return S}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return t.alloc(0);for(var M=0,C=0,z=0;A[M]===m;)C++,M++;for(var $=(A.length-M)*b+1>>>0,re=new Uint8Array($);M<A.length;){var Y=A.charCodeAt(M);if(Y>255)return;var ae=n[Y];if(ae===255)return;for(var me=0,le=$-1;(ae!==0||me<z)&&le!==-1;le--,me++)ae+=d*re[le]>>>0,re[le]=ae%256>>>0,ae=ae/256>>>0;if(ae!==0)throw new Error("Non-zero carry");z=me,M++}for(var _=$-z;_!==$&&re[_]===0;)_++;var S=t.allocUnsafe(C+($-_));S.fill(0,0,C);for(var P=C;_!==$;)S[P++]=re[_++];return S}function k(A){var M=w(A);if(M)return M;throw new Error("Non-base"+d+" character")}return{encode:x,decodeUnsafe:w,decode:k}}return Mn=e,Mn}var Dn,ci;function uo(){if(ci)return Dn;ci=1;var t=Ou(),e="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";return Dn=t(e),Dn}var Uu=uo();const Ke=la(Uu);var xe={};function pt(t,e,r){return e<=t&&t<=r}function bn(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function Cu(t){for(var e=String(t),r=e.length,n=0,s=[];n<r;){var i=e.charCodeAt(n);if(i<55296||i>57343)s.push(i);else if(56320<=i&&i<=57343)s.push(65533);else if(55296<=i&&i<=56319)if(n===r-1)s.push(65533);else{var o=t.charCodeAt(n+1);if(56320<=o&&o<=57343){var u=i&1023,d=o&1023;s.push(65536+(u<<10)+d),n+=1}else s.push(65533)}n+=1}return s}function Lu(t){for(var e="",r=0;r<t.length;++r){var n=t[r];n<=65535?e+=String.fromCharCode(n):(n-=65536,e+=String.fromCharCode((n>>10)+55296,(n&1023)+56320))}return e}var rn=-1;function bs(t){this.tokens=[].slice.call(t)}bs.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():rn},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var tr=-1;function jn(t,e){if(t)throw TypeError("Decoder error");return e||65533}var nn="utf-8";function sn(t,e){if(!(this instanceof sn))return new sn(t,e);if(t=t!==void 0?String(t).toLowerCase():nn,t!==nn)throw new Error("Encoding not supported. Only utf-8 is supported");e=bn(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}sn.prototype={decode:function(e,r){var n;typeof e=="object"&&e instanceof ArrayBuffer?n=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):n=new Uint8Array(0),r=bn(r),this._streaming||(this._decoder=new Nu({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!r.stream;for(var s=new bs(n),i=[],o;!s.endOfStream()&&(o=this._decoder.handler(s,s.read()),o!==tr);)o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o));if(!this._streaming){do{if(o=this._decoder.handler(s,s.read()),o===tr)break;o!==null&&(Array.isArray(o)?i.push.apply(i,o):i.push(o))}while(!s.endOfStream());this._decoder=null}return i.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(i[0]===65279?(this._BOMseen=!0,i.shift()):this._BOMseen=!0),Lu(i)}};function on(t,e){if(!(this instanceof on))return new on(t,e);if(t=t!==void 0?String(t).toLowerCase():nn,t!==nn)throw new Error("Encoding not supported. Only utf-8 is supported");e=bn(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}on.prototype={encode:function(e,r){e=e?String(e):"",r=bn(r),this._streaming||(this._encoder=new Fu(this._options)),this._streaming=!!r.stream;for(var n=[],s=new bs(Cu(e)),i;!s.endOfStream()&&(i=this._encoder.handler(s,s.read()),i!==tr);)Array.isArray(i)?n.push.apply(n,i):n.push(i);if(!this._streaming){for(;i=this._encoder.handler(s,s.read()),i!==tr;)Array.isArray(i)?n.push.apply(n,i):n.push(i);this._encoder=null}return new Uint8Array(n)}};function Nu(t){var e=t.fatal,r=0,n=0,s=0,i=128,o=191;this.handler=function(u,d){if(d===rn&&s!==0)return s=0,jn(e);if(d===rn)return tr;if(s===0){if(pt(d,0,127))return d;if(pt(d,194,223))s=1,r=d-192;else if(pt(d,224,239))d===224&&(i=160),d===237&&(o=159),s=2,r=d-224;else if(pt(d,240,244))d===240&&(i=144),d===244&&(o=143),s=3,r=d-240;else return jn(e);return r=r<<6*s,null}if(!pt(d,i,o))return r=s=n=0,i=128,o=191,u.prepend(d),jn(e);if(i=128,o=191,n+=1,r+=d-128<<6*(s-n),n!==s)return null;var m=r;return r=s=n=0,m}}function Fu(t){t.fatal,this.handler=function(e,r){if(r===rn)return tr;if(pt(r,0,127))return r;var n,s;pt(r,128,2047)?(n=1,s=192):pt(r,2048,65535)?(n=2,s=224):pt(r,65536,1114111)&&(n=3,s=240);for(var i=[(r>>6*n)+s];n>0;){var o=r>>6*(n-1);i.push(128|o&63),n-=1}return i}}const Pu=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:sn,TextEncoder:on},Symbol.toStringTag,{value:"Module"})),Mu=Ai(Pu);var ui;function Du(){if(ui)return xe;ui=1;var t=xe&&xe.__createBinding||(Object.create?(function(_,S,P,L){L===void 0&&(L=P),Object.defineProperty(_,L,{enumerable:!0,get:function(){return S[P]}})}):(function(_,S,P,L){L===void 0&&(L=P),_[L]=S[P]})),e=xe&&xe.__setModuleDefault||(Object.create?(function(_,S){Object.defineProperty(_,"default",{enumerable:!0,value:S})}):function(_,S){_.default=S}),r=xe&&xe.__decorate||function(_,S,P,L){var B=arguments.length,I=B<3?S:L===null?L=Object.getOwnPropertyDescriptor(S,P):L,O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(_,S,P,L);else for(var Z=_.length-1;Z>=0;Z--)(O=_[Z])&&(I=(B<3?O(I):B>3?O(S,P,I):O(S,P))||I);return B>3&&I&&Object.defineProperty(S,P,I),I},n=xe&&xe.__importStar||function(_){if(_&&_.__esModule)return _;var S={};if(_!=null)for(var P in _)P!=="default"&&Object.hasOwnProperty.call(_,P)&&t(S,_,P);return e(S,_),S},s=xe&&xe.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(xe,"__esModule",{value:!0}),xe.deserializeUnchecked=xe.deserialize=xe.serialize=xe.BinaryReader=xe.BinaryWriter=xe.BorshError=xe.baseDecode=xe.baseEncode=void 0;const i=s(da()),o=s(uo()),u=n(Mu),d=typeof TextDecoder!="function"?u.TextDecoder:TextDecoder,m=new d("utf-8",{fatal:!0});function b(_){return typeof _=="string"&&(_=Buffer.from(_,"utf8")),o.default.encode(Buffer.from(_))}xe.baseEncode=b;function N(_){return Buffer.from(o.default.decode(_))}xe.baseDecode=N;const x=1024;class w extends Error{constructor(S){super(S),this.fieldPath=[],this.originalMessage=S}addToFieldPath(S){this.fieldPath.splice(0,0,S),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}xe.BorshError=w;class k{constructor(){this.buf=Buffer.alloc(x),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=Buffer.concat([this.buf,Buffer.alloc(x)]))}writeU8(S){this.maybeResize(),this.buf.writeUInt8(S,this.length),this.length+=1}writeU16(S){this.maybeResize(),this.buf.writeUInt16LE(S,this.length),this.length+=2}writeU32(S){this.maybeResize(),this.buf.writeUInt32LE(S,this.length),this.length+=4}writeU64(S){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(S).toArray("le",8)))}writeU128(S){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(S).toArray("le",16)))}writeU256(S){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(S).toArray("le",32)))}writeU512(S){this.maybeResize(),this.writeBuffer(Buffer.from(new i.default(S).toArray("le",64)))}writeBuffer(S){this.buf=Buffer.concat([Buffer.from(this.buf.subarray(0,this.length)),S,Buffer.alloc(x)]),this.length+=S.length}writeString(S){this.maybeResize();const P=Buffer.from(S,"utf8");this.writeU32(P.length),this.writeBuffer(P)}writeFixedArray(S){this.writeBuffer(Buffer.from(S))}writeArray(S,P){this.maybeResize(),this.writeU32(S.length);for(const L of S)this.maybeResize(),P(L)}toArray(){return this.buf.subarray(0,this.length)}}xe.BinaryWriter=k;function A(_,S,P){const L=P.value;P.value=function(...B){try{return L.apply(this,B)}catch(I){if(I instanceof RangeError){const O=I.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(O)>=0)throw new w("Reached the end of buffer when deserializing")}throw I}}}class M{constructor(S){this.buf=S,this.offset=0}readU8(){const S=this.buf.readUInt8(this.offset);return this.offset+=1,S}readU16(){const S=this.buf.readUInt16LE(this.offset);return this.offset+=2,S}readU32(){const S=this.buf.readUInt32LE(this.offset);return this.offset+=4,S}readU64(){const S=this.readBuffer(8);return new i.default(S,"le")}readU128(){const S=this.readBuffer(16);return new i.default(S,"le")}readU256(){const S=this.readBuffer(32);return new i.default(S,"le")}readU512(){const S=this.readBuffer(64);return new i.default(S,"le")}readBuffer(S){if(this.offset+S>this.buf.length)throw new w(`Expected buffer length ${S} isn't within bounds`);const P=this.buf.slice(this.offset,this.offset+S);return this.offset+=S,P}readString(){const S=this.readU32(),P=this.readBuffer(S);try{return m.decode(P)}catch(L){throw new w(`Error decoding UTF-8 string: ${L}`)}}readFixedArray(S){return new Uint8Array(this.readBuffer(S))}readArray(S){const P=this.readU32(),L=Array();for(let B=0;B<P;++B)L.push(S());return L}}r([A],M.prototype,"readU8",null),r([A],M.prototype,"readU16",null),r([A],M.prototype,"readU32",null),r([A],M.prototype,"readU64",null),r([A],M.prototype,"readU128",null),r([A],M.prototype,"readU256",null),r([A],M.prototype,"readU512",null),r([A],M.prototype,"readString",null),r([A],M.prototype,"readFixedArray",null),r([A],M.prototype,"readArray",null),xe.BinaryReader=M;function C(_){return _.charAt(0).toUpperCase()+_.slice(1)}function z(_,S,P,L,B){try{if(typeof L=="string")B[`write${C(L)}`](P);else if(L instanceof Array)if(typeof L[0]=="number"){if(P.length!==L[0])throw new w(`Expecting byte array of length ${L[0]}, but got ${P.length} bytes`);B.writeFixedArray(P)}else if(L.length===2&&typeof L[1]=="number"){if(P.length!==L[1])throw new w(`Expecting byte array of length ${L[1]}, but got ${P.length} bytes`);for(let I=0;I<L[1];I++)z(_,null,P[I],L[0],B)}else B.writeArray(P,I=>{z(_,S,I,L[0],B)});else if(L.kind!==void 0)switch(L.kind){case"option":{P==null?B.writeU8(0):(B.writeU8(1),z(_,S,P,L.type,B));break}case"map":{B.writeU32(P.size),P.forEach((I,O)=>{z(_,S,O,L.key,B),z(_,S,I,L.value,B)});break}default:throw new w(`FieldType ${L} unrecognized`)}else $(_,P,B)}catch(I){throw I instanceof w&&I.addToFieldPath(S),I}}function $(_,S,P){if(typeof S.borshSerialize=="function"){S.borshSerialize(P);return}const L=_.get(S.constructor);if(!L)throw new w(`Class ${S.constructor.name} is missing in schema`);if(L.kind==="struct")L.fields.map(([B,I])=>{z(_,B,S[B],I,P)});else if(L.kind==="enum"){const B=S[L.field];for(let I=0;I<L.values.length;++I){const[O,Z]=L.values[I];if(O===B){P.writeU8(I),z(_,O,S[O],Z,P);break}}}else throw new w(`Unexpected schema kind: ${L.kind} for ${S.constructor.name}`)}function re(_,S,P=k){const L=new P;return $(_,S,L),L.toArray()}xe.serialize=re;function Y(_,S,P,L){try{if(typeof P=="string")return L[`read${C(P)}`]();if(P instanceof Array){if(typeof P[0]=="number")return L.readFixedArray(P[0]);if(typeof P[1]=="number"){const B=[];for(let I=0;I<P[1];I++)B.push(Y(_,null,P[0],L));return B}else return L.readArray(()=>Y(_,S,P[0],L))}if(P.kind==="option")return L.readU8()?Y(_,S,P.type,L):void 0;if(P.kind==="map"){let B=new Map;const I=L.readU32();for(let O=0;O<I;O++){const Z=Y(_,S,P.key,L),J=Y(_,S,P.value,L);B.set(Z,J)}return B}return ae(_,P,L)}catch(B){throw B instanceof w&&B.addToFieldPath(S),B}}function ae(_,S,P){if(typeof S.borshDeserialize=="function")return S.borshDeserialize(P);const L=_.get(S);if(!L)throw new w(`Class ${S.name} is missing in schema`);if(L.kind==="struct"){const B={};for(const[I,O]of _.get(S).fields)B[I]=Y(_,I,O,P);return new S(B)}if(L.kind==="enum"){const B=P.readU8();if(B>=L.values.length)throw new w(`Enum index: ${B} is out of range`);const[I,O]=L.values[B],Z=Y(_,I,O,P);return new S({[I]:Z})}throw new w(`Unexpected schema kind: ${L.kind} for ${S.constructor.name}`)}function me(_,S,P,L=M){const B=new L(P),I=ae(_,S,B);if(B.offset<P.length)throw new w(`Unexpected ${P.length-B.offset} bytes after deserialized data`);return I}xe.deserialize=me;function le(_,S,P,L=M){const B=new L(P);return ae(_,S,B)}return xe.deserializeUnchecked=le,xe}var zn=Du(),T={},di;function ju(){if(di)return T;di=1,Object.defineProperty(T,"__esModule",{value:!0}),T.s16=T.s8=T.nu64be=T.u48be=T.u40be=T.u32be=T.u24be=T.u16be=T.nu64=T.u48=T.u40=T.u32=T.u24=T.u16=T.u8=T.offset=T.greedy=T.Constant=T.UTF8=T.CString=T.Blob=T.Boolean=T.BitField=T.BitStructure=T.VariantLayout=T.Union=T.UnionLayoutDiscriminator=T.UnionDiscriminator=T.Structure=T.Sequence=T.DoubleBE=T.Double=T.FloatBE=T.Float=T.NearInt64BE=T.NearInt64=T.NearUInt64BE=T.NearUInt64=T.IntBE=T.Int=T.UIntBE=T.UInt=T.OffsetLayout=T.GreedyCount=T.ExternalLayout=T.bindConstructorLayout=T.nameWithProperty=T.Layout=T.uint8ArrayToBuffer=T.checkUint8Array=void 0,T.constant=T.utf8=T.cstr=T.blob=T.unionLayoutDiscriminator=T.union=T.seq=T.bits=T.struct=T.f64be=T.f64=T.f32be=T.f32=T.ns64be=T.s48be=T.s40be=T.s32be=T.s24be=T.s16be=T.ns64=T.s48=T.s40=T.s32=T.s24=void 0;const t=ys();function e(v){if(!(v instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}T.checkUint8Array=e;function r(v){return e(v),t.Buffer.from(v.buffer,v.byteOffset,v.length)}T.uint8ArrayToBuffer=r;let n=class{constructor(l,h){if(!Number.isInteger(l))throw new TypeError("span must be an integer");this.span=l,this.property=h}makeDestinationObject(){return{}}getSpan(l,h){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(l){const h=Object.create(this.constructor.prototype);return Object.assign(h,this),h.property=l,h}fromArray(l){}};T.Layout=n;function s(v,l){return l.property?v+"["+l.property+"]":v}T.nameWithProperty=s;function i(v,l){if(typeof v!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(v,"layout_"))throw new Error("Class is already bound to a layout");if(!(l&&l instanceof n))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(l,"boundConstructor_"))throw new Error("layout is already bound to a constructor");v.layout_=l,l.boundConstructor_=v,l.makeDestinationObject=(()=>new v),Object.defineProperty(v.prototype,"encode",{value(h,g){return l.encode(this,h,g)},writable:!0}),Object.defineProperty(v,"decode",{value(h,g){return l.decode(h,g)},writable:!0})}T.bindConstructorLayout=i;class o extends n{isCount(){throw new Error("ExternalLayout is abstract")}}T.ExternalLayout=o;class u extends o{constructor(l=1,h){if(!Number.isInteger(l)||0>=l)throw new TypeError("elementSpan must be a (positive) integer");super(-1,h),this.elementSpan=l}isCount(){return!0}decode(l,h=0){e(l);const g=l.length-h;return Math.floor(g/this.elementSpan)}encode(l,h,g){return 0}}T.GreedyCount=u;class d extends o{constructor(l,h=0,g){if(!(l instanceof n))throw new TypeError("layout must be a Layout");if(!Number.isInteger(h))throw new TypeError("offset must be integer or undefined");super(l.span,g||l.property),this.layout=l,this.offset=h}isCount(){return this.layout instanceof m||this.layout instanceof b}decode(l,h=0){return this.layout.decode(l,h+this.offset)}encode(l,h,g=0){return this.layout.encode(l,h,g+this.offset)}}T.OffsetLayout=d;class m extends n{constructor(l,h){if(super(l,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,h=0){return r(l).readUIntLE(h,this.span)}encode(l,h,g=0){return r(h).writeUIntLE(l,g,this.span),this.span}}T.UInt=m;class b extends n{constructor(l,h){if(super(l,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,h=0){return r(l).readUIntBE(h,this.span)}encode(l,h,g=0){return r(h).writeUIntBE(l,g,this.span),this.span}}T.UIntBE=b;class N extends n{constructor(l,h){if(super(l,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,h=0){return r(l).readIntLE(h,this.span)}encode(l,h,g=0){return r(h).writeIntLE(l,g,this.span),this.span}}T.Int=N;class x extends n{constructor(l,h){if(super(l,h),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(l,h=0){return r(l).readIntBE(h,this.span)}encode(l,h,g=0){return r(h).writeIntBE(l,g,this.span),this.span}}T.IntBE=x;const w=Math.pow(2,32);function k(v){const l=Math.floor(v/w),h=v-l*w;return{hi32:l,lo32:h}}function A(v,l){return v*w+l}class M extends n{constructor(l){super(8,l)}decode(l,h=0){const g=r(l),F=g.readUInt32LE(h),j=g.readUInt32LE(h+4);return A(j,F)}encode(l,h,g=0){const F=k(l),j=r(h);return j.writeUInt32LE(F.lo32,g),j.writeUInt32LE(F.hi32,g+4),8}}T.NearUInt64=M;class C extends n{constructor(l){super(8,l)}decode(l,h=0){const g=r(l),F=g.readUInt32BE(h),j=g.readUInt32BE(h+4);return A(F,j)}encode(l,h,g=0){const F=k(l),j=r(h);return j.writeUInt32BE(F.hi32,g),j.writeUInt32BE(F.lo32,g+4),8}}T.NearUInt64BE=C;class z extends n{constructor(l){super(8,l)}decode(l,h=0){const g=r(l),F=g.readUInt32LE(h),j=g.readInt32LE(h+4);return A(j,F)}encode(l,h,g=0){const F=k(l),j=r(h);return j.writeUInt32LE(F.lo32,g),j.writeInt32LE(F.hi32,g+4),8}}T.NearInt64=z;class $ extends n{constructor(l){super(8,l)}decode(l,h=0){const g=r(l),F=g.readInt32BE(h),j=g.readUInt32BE(h+4);return A(F,j)}encode(l,h,g=0){const F=k(l),j=r(h);return j.writeInt32BE(F.hi32,g),j.writeUInt32BE(F.lo32,g+4),8}}T.NearInt64BE=$;class re extends n{constructor(l){super(4,l)}decode(l,h=0){return r(l).readFloatLE(h)}encode(l,h,g=0){return r(h).writeFloatLE(l,g),4}}T.Float=re;class Y extends n{constructor(l){super(4,l)}decode(l,h=0){return r(l).readFloatBE(h)}encode(l,h,g=0){return r(h).writeFloatBE(l,g),4}}T.FloatBE=Y;class ae extends n{constructor(l){super(8,l)}decode(l,h=0){return r(l).readDoubleLE(h)}encode(l,h,g=0){return r(h).writeDoubleLE(l,g),8}}T.Double=ae;class me extends n{constructor(l){super(8,l)}decode(l,h=0){return r(l).readDoubleBE(h)}encode(l,h,g=0){return r(h).writeDoubleBE(l,g),8}}T.DoubleBE=me;class le extends n{constructor(l,h,g){if(!(l instanceof n))throw new TypeError("elementLayout must be a Layout");if(!(h instanceof o&&h.isCount()||Number.isInteger(h)&&0<=h))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let F=-1;!(h instanceof o)&&0<l.span&&(F=h*l.span),super(F,g),this.elementLayout=l,this.count=h}getSpan(l,h=0){if(0<=this.span)return this.span;let g=0,F=this.count;if(F instanceof o&&(F=F.decode(l,h)),0<this.elementLayout.span)g=F*this.elementLayout.span;else{let j=0;for(;j<F;)g+=this.elementLayout.getSpan(l,h+g),++j}return g}decode(l,h=0){const g=[];let F=0,j=this.count;for(j instanceof o&&(j=j.decode(l,h));F<j;)g.push(this.elementLayout.decode(l,h)),h+=this.elementLayout.getSpan(l,h),F+=1;return g}encode(l,h,g=0){const F=this.elementLayout,j=l.reduce((oe,ce)=>oe+F.encode(ce,h,g+oe),0);return this.count instanceof o&&this.count.encode(l.length,h,g),j}}T.Sequence=le;class _ extends n{constructor(l,h,g){if(!(Array.isArray(l)&&l.reduce((j,oe)=>j&&oe instanceof n,!0)))throw new TypeError("fields must be array of Layout instances");typeof h=="boolean"&&g===void 0&&(g=h,h=void 0);for(const j of l)if(0>j.span&&j.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let F=-1;try{F=l.reduce((j,oe)=>j+oe.getSpan(),0)}catch{}super(F,h),this.fields=l,this.decodePrefixes=!!g}getSpan(l,h=0){if(0<=this.span)return this.span;let g=0;try{g=this.fields.reduce((F,j)=>{const oe=j.getSpan(l,h);return h+=oe,F+oe},0)}catch{throw new RangeError("indeterminate span")}return g}decode(l,h=0){e(l);const g=this.makeDestinationObject();for(const F of this.fields)if(F.property!==void 0&&(g[F.property]=F.decode(l,h)),h+=F.getSpan(l,h),this.decodePrefixes&&l.length===h)break;return g}encode(l,h,g=0){const F=g;let j=0,oe=0;for(const ce of this.fields){let Ee=ce.span;if(oe=0<Ee?Ee:0,ce.property!==void 0){const dt=l[ce.property];dt!==void 0&&(oe=ce.encode(dt,h,g),0>Ee&&(Ee=ce.getSpan(h,g)))}j=g,g+=Ee}return j+oe-F}fromArray(l){const h=this.makeDestinationObject();for(const g of this.fields)g.property!==void 0&&0<l.length&&(h[g.property]=l.shift());return h}layoutFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===l)return h}offsetOf(l){if(typeof l!="string")throw new TypeError("property must be string");let h=0;for(const g of this.fields){if(g.property===l)return h;0>g.span?h=-1:0<=h&&(h+=g.span)}}}T.Structure=_;class S{constructor(l){this.property=l}decode(l,h){throw new Error("UnionDiscriminator is abstract")}encode(l,h,g){throw new Error("UnionDiscriminator is abstract")}}T.UnionDiscriminator=S;class P extends S{constructor(l,h){if(!(l instanceof o&&l.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(h||l.property||"variant"),this.layout=l}decode(l,h){return this.layout.decode(l,h)}encode(l,h,g){return this.layout.encode(l,h,g)}}T.UnionLayoutDiscriminator=P;class L extends n{constructor(l,h,g){let F;if(l instanceof m||l instanceof b)F=new P(new d(l));else if(l instanceof o&&l.isCount())F=new P(l);else if(l instanceof S)F=l;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(h===void 0&&(h=null),!(h===null||h instanceof n))throw new TypeError("defaultLayout must be null or a Layout");if(h!==null){if(0>h.span)throw new Error("defaultLayout must have constant span");h.property===void 0&&(h=h.replicate("content"))}let j=-1;h&&(j=h.span,0<=j&&(l instanceof m||l instanceof b)&&(j+=F.layout.span)),super(j,g),this.discriminator=F,this.usesPrefixDiscriminator=l instanceof m||l instanceof b,this.defaultLayout=h,this.registry={};let oe=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(ce){return oe(ce)},this.configGetSourceVariant=function(ce){oe=ce.bind(this)}}getSpan(l,h=0){if(0<=this.span)return this.span;const g=this.getVariant(l,h);if(!g)throw new Error("unable to determine span for unrecognized variant");return g.getSpan(l,h)}defaultGetSourceVariant(l){if(Object.prototype.hasOwnProperty.call(l,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(l,this.defaultLayout.property))return;const h=this.registry[l[this.discriminator.property]];if(h&&(!h.layout||h.property&&Object.prototype.hasOwnProperty.call(l,h.property)))return h}else for(const h in this.registry){const g=this.registry[h];if(g.property&&Object.prototype.hasOwnProperty.call(l,g.property))return g}throw new Error("unable to infer src variant")}decode(l,h=0){let g;const F=this.discriminator,j=F.decode(l,h),oe=this.registry[j];if(oe===void 0){const ce=this.defaultLayout;let Ee=0;this.usesPrefixDiscriminator&&(Ee=F.layout.span),g=this.makeDestinationObject(),g[F.property]=j,g[ce.property]=ce.decode(l,h+Ee)}else g=oe.decode(l,h);return g}encode(l,h,g=0){const F=this.getSourceVariant(l);if(F===void 0){const j=this.discriminator,oe=this.defaultLayout;let ce=0;return this.usesPrefixDiscriminator&&(ce=j.layout.span),j.encode(l[j.property],h,g),ce+oe.encode(l[oe.property],h,g+ce)}return F.encode(l,h,g)}addVariant(l,h,g){const F=new B(this,l,h,g);return this.registry[l]=F,F}getVariant(l,h=0){let g;return l instanceof Uint8Array?g=this.discriminator.decode(l,h):g=l,this.registry[g]}}T.Union=L;class B extends n{constructor(l,h,g,F){if(!(l instanceof L))throw new TypeError("union must be a Union");if(!Number.isInteger(h)||0>h)throw new TypeError("variant must be a (non-negative) integer");if(typeof g=="string"&&F===void 0&&(F=g,g=null),g){if(!(g instanceof n))throw new TypeError("layout must be a Layout");if(l.defaultLayout!==null&&0<=g.span&&g.span>l.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof F!="string")throw new TypeError("variant must have a String property")}let j=l.span;0>l.span&&(j=g?g.span:0,0<=j&&l.usesPrefixDiscriminator&&(j+=l.discriminator.layout.span)),super(j,F),this.union=l,this.variant=h,this.layout=g||null}getSpan(l,h=0){if(0<=this.span)return this.span;let g=0;this.union.usesPrefixDiscriminator&&(g=this.union.discriminator.layout.span);let F=0;return this.layout&&(F=this.layout.getSpan(l,h+g)),g+F}decode(l,h=0){const g=this.makeDestinationObject();if(this!==this.union.getVariant(l,h))throw new Error("variant mismatch");let F=0;return this.union.usesPrefixDiscriminator&&(F=this.union.discriminator.layout.span),this.layout?g[this.property]=this.layout.decode(l,h+F):this.property?g[this.property]=!0:this.union.usesPrefixDiscriminator&&(g[this.union.discriminator.property]=this.variant),g}encode(l,h,g=0){let F=0;if(this.union.usesPrefixDiscriminator&&(F=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(l,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,h,g);let j=F;if(this.layout&&(this.layout.encode(l[this.property],h,g+F),j+=this.layout.getSpan(h,g+F),0<=this.union.span&&j>this.union.span))throw new Error("encoded variant overruns containing union");return j}fromArray(l){if(this.layout)return this.layout.fromArray(l)}}T.VariantLayout=B;function I(v){return 0>v&&(v+=4294967296),v}class O extends n{constructor(l,h,g){if(!(l instanceof m||l instanceof b))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof h=="string"&&g===void 0&&(g=h,h=!1),4<l.span)throw new RangeError("word cannot exceed 32 bits");super(l.span,g),this.word=l,this.msb=!!h,this.fields=[];let F=0;this._packedSetValue=function(j){return F=I(j),this},this._packedGetValue=function(){return F}}decode(l,h=0){const g=this.makeDestinationObject(),F=this.word.decode(l,h);this._packedSetValue(F);for(const j of this.fields)j.property!==void 0&&(g[j.property]=j.decode(l));return g}encode(l,h,g=0){const F=this.word.decode(h,g);this._packedSetValue(F);for(const j of this.fields)if(j.property!==void 0){const oe=l[j.property];oe!==void 0&&j.encode(oe)}return this.word.encode(this._packedGetValue(),h,g)}addField(l,h){const g=new Z(this,l,h);return this.fields.push(g),g}addBoolean(l){const h=new J(this,l);return this.fields.push(h),h}fieldFor(l){if(typeof l!="string")throw new TypeError("property must be string");for(const h of this.fields)if(h.property===l)return h}}T.BitStructure=O;class Z{constructor(l,h,g){if(!(l instanceof O))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(h)||0>=h)throw new TypeError("bits must be positive integer");const F=8*l.span,j=l.fields.reduce((oe,ce)=>oe+ce.bits,0);if(h+j>F)throw new Error("bits too long for span remainder ("+(F-j)+" of "+F+" remain)");this.container=l,this.bits=h,this.valueMask=(1<<h)-1,h===32&&(this.valueMask=4294967295),this.start=j,this.container.msb&&(this.start=F-j-h),this.wordMask=I(this.valueMask<<this.start),this.property=g}decode(l,h){const g=this.container._packedGetValue();return I(g&this.wordMask)>>>this.start}encode(l){if(typeof l!="number"||!Number.isInteger(l)||l!==I(l&this.valueMask))throw new TypeError(s("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const h=this.container._packedGetValue(),g=I(l<<this.start);this.container._packedSetValue(I(h&~this.wordMask)|g)}}T.BitField=Z;class J extends Z{constructor(l,h){super(l,1,h)}decode(l,h){return!!super.decode(l,h)}encode(l){typeof l=="boolean"&&(l=+l),super.encode(l)}}T.Boolean=J;class se extends n{constructor(l,h){if(!(l instanceof o&&l.isCount()||Number.isInteger(l)&&0<=l))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let g=-1;l instanceof o||(g=l),super(g,h),this.length=l}getSpan(l,h){let g=this.span;return 0>g&&(g=this.length.decode(l,h)),g}decode(l,h=0){let g=this.span;return 0>g&&(g=this.length.decode(l,h)),r(l).slice(h,h+g)}encode(l,h,g){let F=this.length;if(this.length instanceof o&&(F=l.length),!(l instanceof Uint8Array&&F===l.length))throw new TypeError(s("Blob.encode",this)+" requires (length "+F+") Uint8Array as src");if(g+F>h.length)throw new RangeError("encoding overruns Uint8Array");const j=r(l);return r(h).write(j.toString("hex"),g,F,"hex"),this.length instanceof o&&this.length.encode(F,h,g),F}}T.Blob=se;class ee extends n{constructor(l){super(-1,l)}getSpan(l,h=0){e(l);let g=h;for(;g<l.length&&l[g]!==0;)g+=1;return 1+g-h}decode(l,h=0){const g=this.getSpan(l,h);return r(l).slice(h,h+g-1).toString("utf-8")}encode(l,h,g=0){typeof l!="string"&&(l=String(l));const F=t.Buffer.from(l,"utf8"),j=F.length;if(g+j>h.length)throw new RangeError("encoding overruns Buffer");const oe=r(h);return F.copy(oe,g),oe[g+j]=0,j+1}}T.CString=ee;class te extends n{constructor(l,h){if(typeof l=="string"&&h===void 0&&(h=l,l=void 0),l===void 0)l=-1;else if(!Number.isInteger(l))throw new TypeError("maxSpan must be an integer");super(-1,h),this.maxSpan=l}getSpan(l,h=0){return e(l),l.length-h}decode(l,h=0){const g=this.getSpan(l,h);if(0<=this.maxSpan&&this.maxSpan<g)throw new RangeError("text length exceeds maxSpan");return r(l).slice(h,h+g).toString("utf-8")}encode(l,h,g=0){typeof l!="string"&&(l=String(l));const F=t.Buffer.from(l,"utf8"),j=F.length;if(0<=this.maxSpan&&this.maxSpan<j)throw new RangeError("text length exceeds maxSpan");if(g+j>h.length)throw new RangeError("encoding overruns Buffer");return F.copy(r(h),g),j}}T.UTF8=te;class G extends n{constructor(l,h){super(0,h),this.value=l}decode(l,h){return this.value}encode(l,h,g){return 0}}return T.Constant=G,T.greedy=((v,l)=>new u(v,l)),T.offset=((v,l,h)=>new d(v,l,h)),T.u8=(v=>new m(1,v)),T.u16=(v=>new m(2,v)),T.u24=(v=>new m(3,v)),T.u32=(v=>new m(4,v)),T.u40=(v=>new m(5,v)),T.u48=(v=>new m(6,v)),T.nu64=(v=>new M(v)),T.u16be=(v=>new b(2,v)),T.u24be=(v=>new b(3,v)),T.u32be=(v=>new b(4,v)),T.u40be=(v=>new b(5,v)),T.u48be=(v=>new b(6,v)),T.nu64be=(v=>new C(v)),T.s8=(v=>new N(1,v)),T.s16=(v=>new N(2,v)),T.s24=(v=>new N(3,v)),T.s32=(v=>new N(4,v)),T.s40=(v=>new N(5,v)),T.s48=(v=>new N(6,v)),T.ns64=(v=>new z(v)),T.s16be=(v=>new x(2,v)),T.s24be=(v=>new x(3,v)),T.s32be=(v=>new x(4,v)),T.s40be=(v=>new x(5,v)),T.s48be=(v=>new x(6,v)),T.ns64be=(v=>new $(v)),T.f32=(v=>new re(v)),T.f32be=(v=>new Y(v)),T.f64=(v=>new ae(v)),T.f64be=(v=>new me(v)),T.struct=((v,l,h)=>new _(v,l,h)),T.bits=((v,l,h)=>new O(v,l,h)),T.seq=((v,l,h)=>new le(v,l,h)),T.union=((v,l,h)=>new L(v,l,h)),T.unionLayoutDiscriminator=((v,l)=>new P(v,l)),T.blob=((v,l)=>new se(v,l)),T.cstr=(v=>new ee(v)),T.utf8=((v,l)=>new te(v,l)),T.constant=((v,l)=>new G(v,l)),T}var y=ju(),zu=8078e3,$u=8078001,qu=8078004,Zu=8078005,Vu=8078006,Ku=8078011;function lo(t){return Array.isArray(t)?"%5B"+t.map(lo).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function Wu([t,e]){return`${t}=${lo(e)}`}function Ju(t){const e=Object.entries(t).map(Wu).join("&");return btoa(e)}function Gu(t,e={}){{let r=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(r+=` '${Ju(e)}'`),`${r}\``}}var Yt=class extends Error{cause=this.cause;context;constructor(...[t,e]){let r,n;if(e){const{cause:i,...o}=e;i&&(n={cause:i}),Object.keys(o).length>0&&(r=o)}const s=Gu(t,r);super(s,n),this.context={__code:t,...r},this.name="SolanaError"}};function Yu(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function Hu(t){return Object.freeze({...t,encode:e=>{const r=new Uint8Array(Yu(e,t));return t.write(e,r,0),r}})}function Xu(t){return Object.freeze({...t,decode:(e,r=0)=>t.read(e,r)[0]})}function Zt(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function Qu(t,e){if(Zt(t)!==Zt(e))throw new Yt(qu);if(Zt(t)&&Zt(e)&&t.fixedSize!==e.fixedSize)throw new Yt(Zu,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Zt(t)&&!Zt(e)&&t.maxSize!==e.maxSize)throw new Yt(Vu,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function ed(t,e,r=0){if(e.length-r<=0)throw new Yt(zu,{codecDescription:t})}function td(t,e,r,n=0){const s=r.length-n;if(s<e)throw new Yt($u,{bytesLength:s,codecDescription:t,expected:e})}function rd(t,e,r,n){if(n<e||n>r)throw new Yt(Ku,{codecDescription:t,max:r,min:e,value:n})}function fo(t){return t?.endian!==1}function nd(t){return Hu({fixedSize:t.size,write(e,r,n){t.range&&rd(t.name,t.range[0],t.range[1],e);const s=new ArrayBuffer(t.size);return t.set(new DataView(s),e,fo(t.config)),r.set(new Uint8Array(s),n),n+t.size}})}function sd(t){return Xu({fixedSize:t.size,read(e,r=0){ed(t.name,e,r),td(t.name,t.size,e,r);const n=new DataView(id(e,r,t.size));return[t.get(n,fo(t.config)),r+t.size]}})}function id(t,e,r){const n=t.byteOffset+(e??0),s=r??t.byteLength;return t.buffer.slice(n,n+s)}var od=(t={})=>nd({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,r,n)=>e.setBigUint64(0,BigInt(r),n),size:8}),ad=(t={})=>sd({config:t,get:(e,r)=>e.getBigUint64(0,r),name:"u64",size:8}),cd=(t={})=>Qu(od(t),ad(t));class ud extends TypeError{constructor(e,r){let n;const{message:s,explanation:i,...o}=e,{path:u}=e,d=u.length===0?s:`At path: ${u.join(".")} -- ${s}`;super(i??d),i!=null&&(this.cause=d),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...r()])}}function dd(t){return Ur(t)&&typeof t[Symbol.iterator]=="function"}function Ur(t){return typeof t=="object"&&t!=null}function an(t){return Ur(t)&&!Array.isArray(t)}function nt(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function ld(t){const{done:e,value:r}=t.next();return e?void 0:r}function fd(t,e,r,n){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:s,branch:i}=e,{type:o}=r,{refinement:u,message:d=`Expected a value of type \`${o}\`${u?` with refinement \`${u}\``:""}, but received: \`${nt(n)}\``}=t;return{value:n,type:o,refinement:u,key:s[s.length-1],path:s,branch:i,...t,message:d}}function*li(t,e,r,n){dd(t)||(t=[t]);for(const s of t){const i=fd(s,e,r,n);i&&(yield i)}}function*vs(t,e,r={}){const{path:n=[],branch:s=[t],coerce:i=!1,mask:o=!1}=r,u={path:n,branch:s,mask:o};i&&(t=e.coercer(t,u));let d="valid";for(const m of e.validator(t,u))m.explanation=r.message,d="not_valid",yield[m,void 0];for(let[m,b,N]of e.entries(t,u)){const x=vs(b,N,{path:m===void 0?n:[...n,m],branch:m===void 0?s:[...s,b],coerce:i,mask:o,message:r.message});for(const w of x)w[0]?(d=w[0].refinement!=null?"not_refined":"not_valid",yield[w[0],void 0]):i&&(b=w[1],m===void 0?t=b:t instanceof Map?t.set(m,b):t instanceof Set?t.add(b):Ur(t)&&(b!==void 0||m in t)&&(t[m]=b))}if(d!=="not_valid")for(const m of e.refiner(t,u))m.explanation=r.message,d="not_refined",yield[m,void 0];d==="valid"&&(yield[void 0,t])}let ut=class{constructor(e){const{type:r,schema:n,validator:s,refiner:i,coercer:o=d=>d,entries:u=function*(){}}=e;this.type=r,this.schema=n,this.entries=u,this.coercer=o,s?this.validator=(d,m)=>{const b=s(d,m);return li(b,m,this,d)}:this.validator=()=>[],i?this.refiner=(d,m)=>{const b=i(d,m);return li(b,m,this,d)}:this.refiner=()=>[]}assert(e,r){return hd(e,this,r)}create(e,r){return gr(e,this,r)}is(e){return ho(e,this)}mask(e,r){return pd(e,this,r)}validate(e,r={}){return Cr(e,this,r)}};function hd(t,e,r){const n=Cr(t,e,{message:r});if(n[0])throw n[0]}function gr(t,e,r){const n=Cr(t,e,{coerce:!0,message:r});if(n[0])throw n[0];return n[1]}function pd(t,e,r){const n=Cr(t,e,{coerce:!0,mask:!0,message:r});if(n[0])throw n[0];return n[1]}function ho(t,e){return!Cr(t,e)[0]}function Cr(t,e,r={}){const n=vs(t,e,r),s=ld(n);return s[0]?[new ud(s[0],function*(){for(const o of n)o[0]&&(yield o[0])}),void 0]:[void 0,s[1]]}function jt(t,e){return new ut({type:t,schema:null,validator:e})}function md(){return jt("any",()=>!0)}function H(t){return new ut({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[r,n]of e.entries())yield[r,n,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${nt(e)}`}})}function ct(){return jt("boolean",t=>typeof t=="boolean")}function xs(t){return jt("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${nt(e)}`)}function Ae(t){const e=nt(t),r=typeof t;return new ut({type:"literal",schema:r==="string"||r==="number"||r==="boolean"?t:null,validator(n){return n===t||`Expected the literal \`${e}\`, but received: ${nt(n)}`}})}function gd(){return jt("never",()=>!1)}function X(t){return new ut({...t,validator:(e,r)=>e===null||t.validator(e,r),refiner:(e,r)=>e===null||t.refiner(e,r)})}function R(){return jt("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${nt(t)}`)}function ie(t){return new ut({...t,validator:(e,r)=>e===void 0||t.validator(e,r),refiner:(e,r)=>e===void 0||t.refiner(e,r)})}function po(t,e){return new ut({type:"record",schema:null,*entries(r){if(Ur(r))for(const n in r){const s=r[n];yield[n,n,t],yield[n,s,e]}},validator(r){return an(r)||`Expected an object, but received: ${nt(r)}`},coercer(r){return an(r)?{...r}:r}})}function K(){return jt("string",t=>typeof t=="string"||`Expected a string, but received: ${nt(t)}`)}function Es(t){const e=gd();return new ut({type:"tuple",schema:null,*entries(r){if(Array.isArray(r)){const n=Math.max(t.length,r.length);for(let s=0;s<n;s++)yield[s,r[s],t[s]||e]}},validator(r){return Array.isArray(r)||`Expected an array, but received: ${nt(r)}`},coercer(r){return Array.isArray(r)?r.slice():r}})}function q(t){const e=Object.keys(t);return new ut({type:"type",schema:t,*entries(r){if(Ur(r))for(const n of e)yield[n,r[n],t[n]]},validator(r){return an(r)||`Expected an object, but received: ${nt(r)}`},coercer(r){return an(r)?{...r}:r}})}function We(t){const e=t.map(r=>r.type).join(" | ");return new ut({type:"union",schema:null,coercer(r,n){for(const s of t){const[i,o]=s.validate(r,{coerce:!0,mask:n.mask});if(!i)return o}return r},validator(r,n){const s=[];for(const i of t){const[...o]=vs(r,i,n),[u]=o;if(u[0])for(const[d]of o)d&&s.push(d);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${nt(r)}`,...s]}})}function ar(){return jt("unknown",()=>!0)}function Lr(t,e,r){return new ut({...t,coercer:(n,s)=>ho(n,e)?t.coercer(r(n,s),s):t.coercer(n,s)})}const mo=Ai(Qa);var $n,fi;function yd(){if(fi)return $n;fi=1;const t=mo.v4;return $n=function(r,n,s,i){if(typeof r!="string")throw new TypeError(r+" must be a string");i=i||{};const o=typeof i.version=="number"?i.version:2;if(o!==1&&o!==2)throw new TypeError(o+" must be 1 or 2");const u={method:r};if(o===2&&(u.jsonrpc="2.0"),n){if(typeof n!="object"&&!Array.isArray(n))throw new TypeError(n+" must be an object, array or omitted");u.params=n}if(typeof s>"u"){const d=typeof i.generator=="function"?i.generator:function(){return t()};u.id=d(u,i)}else o===2&&s===null?i.notificationIdNull&&(u.id=null):u.id=s;return u},$n}var qn,hi;function wd(){if(hi)return qn;hi=1;const t=mo.v4,e=yd(),r=function(n,s){if(!(this instanceof r))return new r(n,s);s||(s={}),this.options={reviver:typeof s.reviver<"u"?s.reviver:null,replacer:typeof s.replacer<"u"?s.replacer:null,generator:typeof s.generator<"u"?s.generator:function(){return t()},version:typeof s.version<"u"?s.version:2,notificationIdNull:typeof s.notificationIdNull=="boolean"?s.notificationIdNull:!1},this.callServer=n};return qn=r,r.prototype.request=function(n,s,i,o){const u=this;let d=null;const m=Array.isArray(n)&&typeof s=="function";if(this.options.version===1&&m)throw new TypeError("JSON-RPC 1.0 does not support batching");if(m||!m&&n&&typeof n=="object"&&typeof s=="function")o=s,d=n;else{typeof i=="function"&&(o=i,i=void 0);const x=typeof o=="function";try{d=e(n,s,i,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(w){if(x)return o(w);throw w}if(!x)return d}let N;try{N=JSON.stringify(d,this.options.replacer)}catch(x){return o(x)}return this.callServer(N,function(x,w){u._parseResponse(x,w,o)}),d},r.prototype._parseResponse=function(n,s,i){if(n){i(n);return}if(!s)return i();let o;try{o=JSON.parse(s,this.options.reviver)}catch(u){return i(u)}if(i.length===3)if(Array.isArray(o)){const u=function(m){return typeof m.error<"u"},d=function(m){return!u(m)};return i(null,o.filter(u),o.filter(d))}else return i(null,o.error,o.result);i(null,o)},qn}wd();Or.utils.randomPrivateKey;Or.getPublicKey;function pi(t){try{return Or.ExtendedPoint.fromHex(t),!0}catch{return!1}}const go=(t,e)=>Or.sign(t,e.slice(0,32)),bd=Or.verify,_s=t=>ye.Buffer.isBuffer(t)?t:t instanceof Uint8Array?ye.Buffer.from(t.buffer,t.byteOffset,t.byteLength):ye.Buffer.from(t);class vd{constructor(e){Object.assign(this,e)}encode(){return ye.Buffer.from(zn.serialize(zr,this))}static decode(e){return zn.deserialize(zr,this,e)}static decodeUnchecked(e){return zn.deserializeUnchecked(zr,this,e)}}const zr=new Map;var yo;const xd=32,It=32;function Ed(t){return t._bn!==void 0}let mi=1;class he extends vd{constructor(e){if(super({}),this._bn=void 0,Ed(e))this._bn=e._bn;else{if(typeof e=="string"){const r=Ke.decode(e);if(r.length!=It)throw new Error("Invalid public key input");this._bn=new Cs(r)}else this._bn=new Cs(e);if(this._bn.byteLength()>It)throw new Error("Invalid public key input")}}static unique(){const e=new he(mi);return mi+=1,new he(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return Ke.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(ye.Buffer);if(e.length===It)return e;const r=ye.Buffer.alloc(32);return e.copy(r,32-e.length),r}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,r,n){const s=ye.Buffer.concat([e.toBuffer(),ye.Buffer.from(r),n.toBuffer()]),i=Ls(s);return new he(i)}static createProgramAddressSync(e,r){let n=ye.Buffer.alloc(0);e.forEach(function(i){if(i.length>xd)throw new TypeError("Max seed length exceeded");n=ye.Buffer.concat([n,_s(i)])}),n=ye.Buffer.concat([n,r.toBuffer(),ye.Buffer.from("ProgramDerivedAddress")]);const s=Ls(n);if(pi(s))throw new Error("Invalid seeds, address must fall off the curve");return new he(s)}static async createProgramAddress(e,r){return this.createProgramAddressSync(e,r)}static findProgramAddressSync(e,r){let n=255,s;for(;n!=0;){try{const i=e.concat(ye.Buffer.from([n]));s=this.createProgramAddressSync(i,r)}catch(i){if(i instanceof TypeError)throw i;n--;continue}return[s,n]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,r){return this.findProgramAddressSync(e,r)}static isOnCurve(e){const r=new he(e);return pi(r.toBytes())}}yo=he;he.default=new yo("11111111111111111111111111111111");zr.set(he,{kind:"struct",fields:[["_bn","u256"]]});new he("BPFLoader1111111111111111111111111111111111");const Ht=1232,Ss=127,cn=64;class un{constructor(e,r){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=r}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const r of this.keySegments()){if(e<r.length)return r[e];e-=r.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const n=new Map;this.keySegments().flat().forEach((i,o)=>{n.set(i.toBase58(),o)});const s=i=>{const o=n.get(i.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(i=>({programIdIndex:s(i.programId),accountKeyIndexes:i.keys.map(o=>s(o.pubkey)),data:i.data}))}}const we=(t="publicKey")=>y.blob(32,t),_d=(t="signature")=>y.blob(64,t),Jt=(t="string")=>{const e=y.struct([y.u32("length"),y.u32("lengthPadding"),y.blob(y.offset(y.u32(),-8),"chars")],t),r=e.decode.bind(e),n=e.encode.bind(e),s=e;return s.decode=(i,o)=>r(i,o).chars.toString(),s.encode=(i,o,u)=>{const d={chars:ye.Buffer.from(i,"utf8")};return n(d,o,u)},s.alloc=i=>y.u32().span+y.u32().span+ye.Buffer.from(i,"utf8").length,s},Sd=(t="authorized")=>y.struct([we("staker"),we("withdrawer")],t),Id=(t="lockup")=>y.struct([y.ns64("unixTimestamp"),y.ns64("epoch"),we("custodian")],t),Ad=(t="voteInit")=>y.struct([we("nodePubkey"),we("authorizedVoter"),we("authorizedWithdrawer"),y.u8("commission")],t),Bd=(t="voteAuthorizeWithSeedArgs")=>y.struct([y.u32("voteAuthorizationType"),we("currentAuthorityDerivedKeyOwnerPubkey"),Jt("currentAuthorityDerivedKeySeed"),we("newAuthorized")],t);function He(t){let e=0,r=0;for(;;){let n=t.shift();if(e|=(n&127)<<r*7,r+=1,(n&128)===0)break}return e}function Xe(t,e){let r=e;for(;;){let n=r&127;if(r>>=7,r==0){t.push(n);break}else n|=128,t.push(n)}}function Ne(t,e){if(!t)throw new Error(e||"Assertion failed")}class vn{constructor(e,r){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=r}static compile(e,r){const n=new Map,s=o=>{const u=o.toBase58();let d=n.get(u);return d===void 0&&(d={isSigner:!1,isWritable:!1,isInvoked:!1},n.set(u,d)),d},i=s(r);i.isSigner=!0,i.isWritable=!0;for(const o of e){s(o.programId).isInvoked=!0;for(const u of o.keys){const d=s(u.pubkey);d.isSigner||=u.isSigner,d.isWritable||=u.isWritable}}return new vn(r,n)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];Ne(e.length<=256,"Max static account keys length exceeded");const r=e.filter(([,d])=>d.isSigner&&d.isWritable),n=e.filter(([,d])=>d.isSigner&&!d.isWritable),s=e.filter(([,d])=>!d.isSigner&&d.isWritable),i=e.filter(([,d])=>!d.isSigner&&!d.isWritable),o={numRequiredSignatures:r.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};{Ne(r.length>0,"Expected at least one writable signer key");const[d]=r[0];Ne(d===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const u=[...r.map(([d])=>new he(d)),...n.map(([d])=>new he(d)),...s.map(([d])=>new he(d)),...i.map(([d])=>new he(d))];return[o,u]}extractTableLookup(e){const[r,n]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[s,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(r.length===0&&s.length===0))return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:s},{writable:n,readonly:i}]}drainKeysFoundInLookupTable(e,r){const n=new Array,s=new Array;for(const[i,o]of this.keyMetaMap.entries())if(r(o)){const u=new he(i),d=e.findIndex(m=>m.equals(u));d>=0&&(Ne(d<256,"Max lookup table index exceeded"),n.push(d),s.push(u),this.keyMetaMap.delete(i))}return[n,s]}}const wo="Reached end of buffer unexpectedly";function mt(t){if(t.length===0)throw new Error(wo);return t.shift()}function Qe(t,...e){const[r]=e;if(e.length===2?r+(e[1]??0)>t.length:r>=t.length)throw new Error(wo);return t.splice(...e)}class rr{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(r=>new he(r)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(r=>this.indexToProgramIds.set(r.programIdIndex,this.accountKeys[r.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ke.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new un(this.staticAccountKeys)}static compile(e){const r=vn.compile(e.instructions,e.payerKey),[n,s]=r.getMessageComponents(),o=new un(s).compileInstructions(e.instructions).map(u=>({programIdIndex:u.programIdIndex,accounts:u.accountKeyIndexes,data:Ke.encode(u.data)}));return new rr({header:n,accountKeys:s,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const n=e-r,i=this.accountKeys.length-r-this.header.numReadonlyUnsignedAccounts;return n<i}else{const n=r-this.header.numReadonlySignedAccounts;return e<n}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,r)=>!this.isProgramId(r))}serialize(){const e=this.accountKeys.length;let r=[];Xe(r,e);const n=this.instructions.map(N=>{const{accounts:x,programIdIndex:w}=N,k=Array.from(Ke.decode(N.data));let A=[];Xe(A,x.length);let M=[];return Xe(M,k.length),{programIdIndex:w,keyIndicesCount:ye.Buffer.from(A),keyIndices:x,dataLength:ye.Buffer.from(M),data:k}});let s=[];Xe(s,n.length);let i=ye.Buffer.alloc(Ht);ye.Buffer.from(s).copy(i);let o=s.length;n.forEach(N=>{const w=y.struct([y.u8("programIdIndex"),y.blob(N.keyIndicesCount.length,"keyIndicesCount"),y.seq(y.u8("keyIndex"),N.keyIndices.length,"keyIndices"),y.blob(N.dataLength.length,"dataLength"),y.seq(y.u8("userdatum"),N.data.length,"data")]).encode(N,i,o);o+=w}),i=i.slice(0,o);const u=y.struct([y.blob(1,"numRequiredSignatures"),y.blob(1,"numReadonlySignedAccounts"),y.blob(1,"numReadonlyUnsignedAccounts"),y.blob(r.length,"keyCount"),y.seq(we("key"),e,"keys"),we("recentBlockhash")]),d={numRequiredSignatures:ye.Buffer.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:ye.Buffer.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:ye.Buffer.from([this.header.numReadonlyUnsignedAccounts]),keyCount:ye.Buffer.from(r),keys:this.accountKeys.map(N=>_s(N.toBytes())),recentBlockhash:Ke.decode(this.recentBlockhash)};let m=ye.Buffer.alloc(2048);const b=u.encode(d,m);return i.copy(m,b),m.slice(0,b+i.length)}static from(e){let r=[...e];const n=mt(r);if(n!==(n&Ss))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const s=mt(r),i=mt(r),o=He(r);let u=[];for(let x=0;x<o;x++){const w=Qe(r,0,It);u.push(new he(ye.Buffer.from(w)))}const d=Qe(r,0,It),m=He(r);let b=[];for(let x=0;x<m;x++){const w=mt(r),k=He(r),A=Qe(r,0,k),M=He(r),C=Qe(r,0,M),z=Ke.encode(ye.Buffer.from(C));b.push({programIdIndex:w,accounts:A,data:z})}const N={header:{numRequiredSignatures:n,numReadonlySignedAccounts:s,numReadonlyUnsignedAccounts:i},recentBlockhash:Ke.encode(ye.Buffer.from(d)),accountKeys:u,instructions:b};return new rr(N)}}class dn{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const r of this.addressTableLookups)e+=r.readonlyIndexes.length+r.writableIndexes.length;return e}getAccountKeys(e){let r;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");r=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)r=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new un(this.staticAccountKeys,r)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const r=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;if(e>=n){const s=e-n,i=this.addressTableLookups.reduce((o,u)=>o+u.writableIndexes.length,0);return s<i}else if(e>=this.header.numRequiredSignatures){const s=e-r,o=n-r-this.header.numReadonlyUnsignedAccounts;return s<o}else{const s=r-this.header.numReadonlySignedAccounts;return e<s}}resolveAddressTableLookups(e){const r={writable:[],readonly:[]};for(const n of this.addressTableLookups){const s=e.find(i=>i.key.equals(n.accountKey));if(!s)throw new Error(`Failed to find address lookup table account for table key ${n.accountKey.toBase58()}`);for(const i of n.writableIndexes)if(i<s.state.addresses.length)r.writable.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`);for(const i of n.readonlyIndexes)if(i<s.state.addresses.length)r.readonly.push(s.state.addresses[i]);else throw new Error(`Failed to find address for index ${i} in address lookup table ${n.accountKey.toBase58()}`)}return r}static compile(e){const r=vn.compile(e.instructions,e.payerKey),n=new Array,s={writable:new Array,readonly:new Array},i=e.addressLookupTableAccounts||[];for(const b of i){const N=r.extractTableLookup(b);if(N!==void 0){const[x,{writable:w,readonly:k}]=N;n.push(x),s.writable.push(...w),s.readonly.push(...k)}}const[o,u]=r.getMessageComponents(),m=new un(u,s).compileInstructions(e.instructions);return new dn({header:o,staticAccountKeys:u,recentBlockhash:e.recentBlockhash,compiledInstructions:m,addressTableLookups:n})}serialize(){const e=Array();Xe(e,this.staticAccountKeys.length);const r=this.serializeInstructions(),n=Array();Xe(n,this.compiledInstructions.length);const s=this.serializeAddressTableLookups(),i=Array();Xe(i,this.addressTableLookups.length);const o=y.struct([y.u8("prefix"),y.struct([y.u8("numRequiredSignatures"),y.u8("numReadonlySignedAccounts"),y.u8("numReadonlyUnsignedAccounts")],"header"),y.blob(e.length,"staticAccountKeysLength"),y.seq(we(),this.staticAccountKeys.length,"staticAccountKeys"),we("recentBlockhash"),y.blob(n.length,"instructionsLength"),y.blob(r.length,"serializedInstructions"),y.blob(i.length,"addressTableLookupsLength"),y.blob(s.length,"serializedAddressTableLookups")]),u=new Uint8Array(Ht),m=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(b=>b.toBytes()),recentBlockhash:Ke.decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:r,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:s},u);return u.slice(0,m)}serializeInstructions(){let e=0;const r=new Uint8Array(Ht);for(const n of this.compiledInstructions){const s=Array();Xe(s,n.accountKeyIndexes.length);const i=Array();Xe(i,n.data.length);const o=y.struct([y.u8("programIdIndex"),y.blob(s.length,"encodedAccountKeyIndexesLength"),y.seq(y.u8(),n.accountKeyIndexes.length,"accountKeyIndexes"),y.blob(i.length,"encodedDataLength"),y.blob(n.data.length,"data")]);e+=o.encode({programIdIndex:n.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(s),accountKeyIndexes:n.accountKeyIndexes,encodedDataLength:new Uint8Array(i),data:n.data},r,e)}return r.slice(0,e)}serializeAddressTableLookups(){let e=0;const r=new Uint8Array(Ht);for(const n of this.addressTableLookups){const s=Array();Xe(s,n.writableIndexes.length);const i=Array();Xe(i,n.readonlyIndexes.length);const o=y.struct([we("accountKey"),y.blob(s.length,"encodedWritableIndexesLength"),y.seq(y.u8(),n.writableIndexes.length,"writableIndexes"),y.blob(i.length,"encodedReadonlyIndexesLength"),y.seq(y.u8(),n.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:n.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(s),writableIndexes:n.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(i),readonlyIndexes:n.readonlyIndexes},r,e)}return r.slice(0,e)}static deserialize(e){let r=[...e];const n=mt(r),s=n&Ss;Ne(n!==s,"Expected versioned message but received legacy message");const i=s;Ne(i===0,`Expected versioned message with version 0 but found version ${i}`);const o={numRequiredSignatures:mt(r),numReadonlySignedAccounts:mt(r),numReadonlyUnsignedAccounts:mt(r)},u=[],d=He(r);for(let k=0;k<d;k++)u.push(new he(Qe(r,0,It)));const m=Ke.encode(Qe(r,0,It)),b=He(r),N=[];for(let k=0;k<b;k++){const A=mt(r),M=He(r),C=Qe(r,0,M),z=He(r),$=new Uint8Array(Qe(r,0,z));N.push({programIdIndex:A,accountKeyIndexes:C,data:$})}const x=He(r),w=[];for(let k=0;k<x;k++){const A=new he(Qe(r,0,It)),M=He(r),C=Qe(r,0,M),z=He(r),$=Qe(r,0,z);w.push({accountKey:A,writableIndexes:C,readonlyIndexes:$})}return new dn({header:o,staticAccountKeys:u,recentBlockhash:m,compiledInstructions:N,addressTableLookups:w})}}const Is={deserializeMessageVersion(t){const e=t[0],r=e&Ss;return r===e?"legacy":r},deserialize:t=>{const e=Is.deserializeMessageVersion(t);if(e==="legacy")return rr.from(t);if(e===0)return dn.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}},kd=ye.Buffer.alloc(cn).fill(0);class gi{constructor(e){this.keys=void 0,this.programId=void 0,this.data=ye.Buffer.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:r,isWritable:n})=>({pubkey:e.toJSON(),isSigner:r,isWritable:n})),programId:this.programId.toJSON(),data:[...this.data]}}}class ln{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:r,nonceInfo:n}=e;this.minNonceContextSlot=r,this.nonceInfo=n}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:r,lastValidBlockHeight:n}=e;this.recentBlockhash=r,this.lastValidBlockHeight=n}else{const{recentBlockhash:r,nonceInfo:n}=e;n&&(this.nonceInfo=n),this.recentBlockhash=r}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(r=>{"instructions"in r?this.instructions=this.instructions.concat(r.instructions):"data"in r&&"programId"in r&&"keys"in r?this.instructions.push(r):this.instructions.push(new gi(r))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,r;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?r=[this.nonceInfo.nonceInstruction,...this.instructions]:r=this.instructions):(e=this.recentBlockhash,r=this.instructions),!e)throw new Error("Transaction recentBlockhash required");r.length<1&&console.warn("No instructions provided");let n;if(this.feePayer)n=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)n=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let A=0;A<r.length;A++)if(r[A].programId===void 0)throw new Error(`Transaction instruction index ${A} has undefined program id`);const s=[],i=[];r.forEach(A=>{A.keys.forEach(C=>{i.push({...C})});const M=A.programId.toString();s.includes(M)||s.push(M)}),s.forEach(A=>{i.push({pubkey:new he(A),isSigner:!1,isWritable:!1})});const o=[];i.forEach(A=>{const M=A.pubkey.toString(),C=o.findIndex(z=>z.pubkey.toString()===M);C>-1?(o[C].isWritable=o[C].isWritable||A.isWritable,o[C].isSigner=o[C].isSigner||A.isSigner):o.push(A)}),o.sort(function(A,M){if(A.isSigner!==M.isSigner)return A.isSigner?-1:1;if(A.isWritable!==M.isWritable)return A.isWritable?-1:1;const C={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return A.pubkey.toBase58().localeCompare(M.pubkey.toBase58(),"en",C)});const u=o.findIndex(A=>A.pubkey.equals(n));if(u>-1){const[A]=o.splice(u,1);A.isSigner=!0,A.isWritable=!0,o.unshift(A)}else o.unshift({pubkey:n,isSigner:!0,isWritable:!0});for(const A of this.signatures){const M=o.findIndex(C=>C.pubkey.equals(A.publicKey));if(M>-1)o[M].isSigner||(o[M].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${A.publicKey.toString()}`)}let d=0,m=0,b=0;const N=[],x=[];o.forEach(({pubkey:A,isSigner:M,isWritable:C})=>{M?(N.push(A.toString()),d+=1,C||(m+=1)):(x.push(A.toString()),C||(b+=1))});const w=N.concat(x),k=r.map(A=>{const{data:M,programId:C}=A;return{programIdIndex:w.indexOf(C.toString()),accounts:A.keys.map(z=>w.indexOf(z.pubkey.toString())),data:Ke.encode(M)}});return k.forEach(A=>{Ne(A.programIdIndex>=0),A.accounts.forEach(M=>Ne(M>=0))}),new rr({header:{numRequiredSignatures:d,numReadonlySignedAccounts:m,numReadonlyUnsignedAccounts:b},accountKeys:w,recentBlockhash:e,instructions:k})}_compile(){const e=this.compileMessage(),r=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===r.length&&this.signatures.every((s,i)=>r[i].equals(s.publicKey))||(this.signatures=r.map(n=>({signature:null,publicKey:n}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const r=new Set;this.signatures=e.filter(n=>{const s=n.toString();return r.has(s)?!1:(r.add(s),!0)}).map(n=>({signature:null,publicKey:n}))}sign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}this.signatures=n.map(i=>({signature:null,publicKey:i.publicKey}));const s=this._compile();this._partialSign(s,...n)}partialSign(...e){if(e.length===0)throw new Error("No signers");const r=new Set,n=[];for(const i of e){const o=i.publicKey.toString();r.has(o)||(r.add(o),n.push(i))}const s=this._compile();this._partialSign(s,...n)}_partialSign(e,...r){const n=e.serialize();r.forEach(s=>{const i=go(n,s.secretKey);this._addSignature(s.publicKey,_s(i))})}addSignature(e,r){this._compile(),this._addSignature(e,r)}_addSignature(e,r){Ne(r.length===64);const n=this.signatures.findIndex(s=>e.equals(s.publicKey));if(n<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[n].signature=ye.Buffer.from(r)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,r){const n={};for(const{signature:s,publicKey:i}of this.signatures)s===null?r&&(n.missing||=[]).push(i):bd(s,e,i.toBytes())||(n.invalid||=[]).push(i);return n.invalid||n.missing?n:void 0}serialize(e){const{requireAllSignatures:r,verifySignatures:n}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),s=this.serializeMessage();if(n){const i=this._getMessageSignednessErrors(s,r);if(i){let o="Signature verification failed.";throw i.invalid&&(o+=`
Invalid signature for public key${i.invalid.length===1?"":"(s)"} [\`${i.invalid.map(u=>u.toBase58()).join("`, `")}\`].`),i.missing&&(o+=`
Missing signature for public key${i.missing.length===1?"":"(s)"} [\`${i.missing.map(u=>u.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(s)}_serialize(e){const{signatures:r}=this,n=[];Xe(n,r.length);const s=n.length+r.length*64+e.length,i=ye.Buffer.alloc(s);return Ne(r.length<256),ye.Buffer.from(n).copy(i,0),r.forEach(({signature:o},u)=>{o!==null&&(Ne(o.length===64,"signature has invalid length"),ye.Buffer.from(o).copy(i,n.length+u*64))}),e.copy(i,n.length+r.length*64),Ne(i.length<=Ht,`Transaction too large: ${i.length} > ${Ht}`),i}get keys(){return Ne(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return Ne(this.instructions.length===1),this.instructions[0].programId}get data(){return Ne(this.instructions.length===1),this.instructions[0].data}static from(e){let r=[...e];const n=He(r);let s=[];for(let i=0;i<n;i++){const o=Qe(r,0,cn);s.push(Ke.encode(ye.Buffer.from(o)))}return ln.populate(rr.from(r),s)}static populate(e,r=[]){const n=new ln;return n.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(n.feePayer=e.accountKeys[0]),r.forEach((s,i)=>{const o={signature:s==Ke.encode(kd)?null:Ke.decode(s),publicKey:e.accountKeys[i]};n.signatures.push(o)}),e.instructions.forEach(s=>{const i=s.accounts.map(o=>{const u=e.accountKeys[o];return{pubkey:u,isSigner:n.signatures.some(d=>d.publicKey.toString()===u.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});n.instructions.push(new gi({keys:i,programId:e.accountKeys[s.programIdIndex],data:Ke.decode(s.data)}))}),n._message=e,n._json=n.toJSON(),n}}class As{get version(){return this.message.version}constructor(e,r){if(this.signatures=void 0,this.message=void 0,r!==void 0)Ne(r.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=r;else{const n=[];for(let s=0;s<e.header.numRequiredSignatures;s++)n.push(new Uint8Array(cn));this.signatures=n}this.message=e}serialize(){const e=this.message.serialize(),r=Array();Xe(r,this.signatures.length);const n=y.struct([y.blob(r.length,"encodedSignaturesLength"),y.seq(_d(),this.signatures.length,"signatures"),y.blob(e.length,"serializedMessage")]),s=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(r),signatures:this.signatures,serializedMessage:e},s);return s.slice(0,i)}static deserialize(e){let r=[...e];const n=[],s=He(r);for(let o=0;o<s;o++)n.push(new Uint8Array(Qe(r,0,cn)));const i=Is.deserialize(new Uint8Array(r));return new As(i,n)}sign(e){const r=this.message.serialize(),n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const s of e){const i=n.findIndex(o=>o.equals(s.publicKey));Ne(i>=0,`Cannot sign with non signer key ${s.publicKey.toBase58()}`),this.signatures[i]=go(r,s.secretKey)}}addSignature(e,r){Ne(r.byteLength===64,"Signature must be 64 bytes long");const s=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(i=>i.equals(e));Ne(s>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[s]=r}}new he("SysvarC1ock11111111111111111111111111111111");new he("SysvarEpochSchedu1e111111111111111111111111");new he("Sysvar1nstructions1111111111111111111111111");new he("SysvarRecentB1ockHashes11111111111111111111");new he("SysvarRent111111111111111111111111111111111");new he("SysvarRewards111111111111111111111111111111");new he("SysvarS1otHashes111111111111111111111111111");new he("SysvarS1otHistory11111111111111111111111111");new he("SysvarStakeHistory1111111111111111111111111");const Rd=y.nu64("lamportsPerSignature"),Td=y.struct([y.u32("version"),y.u32("state"),we("authorizedPubkey"),we("nonce"),y.struct([Rd],"feeCalculator")]);Td.span;function nr(t){const e=y.blob(8,t),r=e.decode.bind(e),n=e.encode.bind(e),s=e,i=cd();return s.decode=(o,u)=>{const d=r(o,u);return i.decode(d)},s.encode=(o,u,d)=>{const m=i.encode(o);return n(m,u,d)},s}Object.freeze({Create:{index:0,layout:y.struct([y.u32("instruction"),y.ns64("lamports"),y.ns64("space"),we("programId")])},Assign:{index:1,layout:y.struct([y.u32("instruction"),we("programId")])},Transfer:{index:2,layout:y.struct([y.u32("instruction"),nr("lamports")])},CreateWithSeed:{index:3,layout:y.struct([y.u32("instruction"),we("base"),Jt("seed"),y.ns64("lamports"),y.ns64("space"),we("programId")])},AdvanceNonceAccount:{index:4,layout:y.struct([y.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:y.struct([y.u32("instruction"),we("authorized")])},AuthorizeNonceAccount:{index:7,layout:y.struct([y.u32("instruction"),we("authorized")])},Allocate:{index:8,layout:y.struct([y.u32("instruction"),y.ns64("space")])},AllocateWithSeed:{index:9,layout:y.struct([y.u32("instruction"),we("base"),Jt("seed"),y.ns64("space"),we("programId")])},AssignWithSeed:{index:10,layout:y.struct([y.u32("instruction"),we("base"),Jt("seed"),we("programId")])},TransferWithSeed:{index:11,layout:y.struct([y.u32("instruction"),nr("lamports"),Jt("seed"),we("programId")])},UpgradeNonceAccount:{index:12,layout:y.struct([y.u32("instruction")])}});new he("11111111111111111111111111111111");new he("BPFLoader2111111111111111111111111111111111");y.struct([y.u32("typeIndex"),nr("deactivationSlot"),y.nu64("lastExtendedSlot"),y.u8("lastExtendedStartIndex"),y.u8(),y.seq(we(),y.offset(y.u8(),-1),"authority")]);const Ue=Lr(xs(he),K(),t=>new he(t)),bo=Es([K(),Ae("base64")]),Bs=Lr(xs(ye.Buffer),bo,t=>ye.Buffer.from(t[0],"base64"));function vo(t){return We([q({jsonrpc:Ae("2.0"),id:K(),result:t}),q({jsonrpc:Ae("2.0"),id:K(),error:q({code:ar(),message:K(),data:ie(md())})})])}const Od=vo(ar());function Se(t){return Lr(vo(t),Od,e=>"error"in e?e:{...e,result:gr(e.result,t)})}function st(t){return Se(q({context:q({slot:R()}),value:t}))}function xn(t){return q({context:q({slot:R()}),value:t})}const Ud=q({foundation:R(),foundationTerm:R(),initial:R(),taper:R(),terminal:R()});Se(H(X(q({epoch:R(),effectiveSlot:R(),amount:R(),postBalance:R(),commission:ie(X(R()))}))));const Cd=H(q({slot:R(),prioritizationFee:R()})),Ld=q({total:R(),validator:R(),foundation:R(),epoch:R()}),Nd=q({epoch:R(),slotIndex:R(),slotsInEpoch:R(),absoluteSlot:R(),blockHeight:ie(R()),transactionCount:ie(R())}),Fd=q({slotsPerEpoch:R(),leaderScheduleSlotOffset:R(),warmup:ct(),firstNormalEpoch:R(),firstNormalSlot:R()}),Pd=po(K(),H(R())),zt=X(We([q({}),K()])),Md=q({err:zt}),Dd=Ae("receivedSignature");q({"solana-core":K(),"feature-set":ie(R())});const jd=q({program:K(),programId:Ue,parsed:ar()}),zd=q({programId:Ue,accounts:H(Ue),data:K()});st(q({err:X(We([q({}),K()])),logs:X(H(K())),accounts:ie(X(H(X(q({executable:ct(),owner:K(),lamports:R(),data:H(K()),rentEpoch:ie(R())}))))),unitsConsumed:ie(R()),returnData:ie(X(q({programId:K(),data:Es([K(),Ae("base64")])}))),innerInstructions:ie(X(H(q({index:R(),instructions:H(We([jd,zd]))}))))}));st(q({byIdentity:po(K(),H(R())),range:q({firstSlot:R(),lastSlot:R()})}));Se(Ud);Se(Ld);Se(Cd);Se(Nd);Se(Fd);Se(Pd);Se(R());st(q({total:R(),circulating:R(),nonCirculating:R(),nonCirculatingAccounts:H(Ue)}));const $d=q({amount:K(),uiAmount:X(R()),decimals:R(),uiAmountString:ie(K())});st(H(q({address:Ue,amount:K(),uiAmount:X(R()),decimals:R(),uiAmountString:ie(K())})));st(H(q({pubkey:Ue,account:q({executable:ct(),owner:Ue,lamports:R(),data:Bs,rentEpoch:R()})})));const rs=q({program:K(),parsed:ar(),space:R()});st(H(q({pubkey:Ue,account:q({executable:ct(),owner:Ue,lamports:R(),data:rs,rentEpoch:R()})})));st(H(q({lamports:R(),address:Ue})));const ks=q({executable:ct(),owner:Ue,lamports:R(),data:Bs,rentEpoch:R()});q({pubkey:Ue,account:ks});const qd=Lr(We([xs(ye.Buffer),rs]),We([bo,rs]),t=>Array.isArray(t)?gr(t,Bs):t),Zd=q({executable:ct(),owner:Ue,lamports:R(),data:qd,rentEpoch:R()});q({pubkey:Ue,account:Zd});q({state:We([Ae("active"),Ae("inactive"),Ae("activating"),Ae("deactivating")]),active:R(),inactive:R()});Se(H(q({signature:K(),slot:R(),err:zt,memo:X(K()),blockTime:ie(X(R()))})));Se(H(q({signature:K(),slot:R(),err:zt,memo:X(K()),blockTime:ie(X(R()))})));q({subscription:R(),result:xn(ks)});const Vd=q({pubkey:Ue,account:ks});q({subscription:R(),result:xn(Vd)});const Kd=q({parent:R(),slot:R(),root:R()});q({subscription:R(),result:Kd});const Wd=We([q({type:We([Ae("firstShredReceived"),Ae("completed"),Ae("optimisticConfirmation"),Ae("root")]),slot:R(),timestamp:R()}),q({type:Ae("createdBank"),parent:R(),slot:R(),timestamp:R()}),q({type:Ae("frozen"),slot:R(),timestamp:R(),stats:q({numTransactionEntries:R(),numSuccessfulTransactions:R(),numFailedTransactions:R(),maxTransactionsPerEntry:R()})}),q({type:Ae("dead"),slot:R(),timestamp:R(),err:K()})]);q({subscription:R(),result:Wd});q({subscription:R(),result:xn(We([Md,Dd]))});q({subscription:R(),result:R()});q({pubkey:K(),gossip:X(K()),tpu:X(K()),rpc:X(K()),version:X(K())});const yi=q({votePubkey:K(),nodePubkey:K(),activatedStake:R(),epochVoteAccount:ct(),epochCredits:H(Es([R(),R(),R()])),commission:R(),lastVote:R(),rootSlot:X(R())});Se(q({current:H(yi),delinquent:H(yi)}));const Jd=We([Ae("processed"),Ae("confirmed"),Ae("finalized")]),Gd=q({slot:R(),confirmations:X(R()),err:zt,confirmationStatus:ie(Jd)});st(H(X(Gd)));Se(R());const xo=q({accountKey:Ue,writableIndexes:H(R()),readonlyIndexes:H(R())}),Rs=q({signatures:H(K()),message:q({accountKeys:H(K()),header:q({numRequiredSignatures:R(),numReadonlySignedAccounts:R(),numReadonlyUnsignedAccounts:R()}),instructions:H(q({accounts:H(R()),data:K(),programIdIndex:R()})),recentBlockhash:K(),addressTableLookups:ie(H(xo))})}),Eo=q({pubkey:Ue,signer:ct(),writable:ct(),source:ie(We([Ae("transaction"),Ae("lookupTable")]))}),_o=q({accountKeys:H(Eo),signatures:H(K())}),So=q({parsed:ar(),program:K(),programId:Ue}),Io=q({accounts:H(Ue),data:K(),programId:Ue}),Yd=We([Io,So]),Hd=We([q({parsed:ar(),program:K(),programId:K()}),q({accounts:H(K()),data:K(),programId:K()})]),Ao=Lr(Yd,Hd,t=>"accounts"in t?gr(t,Io):gr(t,So)),Bo=q({signatures:H(K()),message:q({accountKeys:H(Eo),instructions:H(Ao),recentBlockhash:K(),addressTableLookups:ie(X(H(xo)))})}),fn=q({accountIndex:R(),mint:K(),owner:ie(K()),programId:ie(K()),uiTokenAmount:$d}),ko=q({writable:H(Ue),readonly:H(Ue)}),En=q({err:zt,fee:R(),innerInstructions:ie(X(H(q({index:R(),instructions:H(q({accounts:H(R()),data:K(),programIdIndex:R()}))})))),preBalances:H(R()),postBalances:H(R()),logMessages:ie(X(H(K()))),preTokenBalances:ie(X(H(fn))),postTokenBalances:ie(X(H(fn))),loadedAddresses:ie(ko),computeUnitsConsumed:ie(R()),costUnits:ie(R())}),Ts=q({err:zt,fee:R(),innerInstructions:ie(X(H(q({index:R(),instructions:H(Ao)})))),preBalances:H(R()),postBalances:H(R()),logMessages:ie(X(H(K()))),preTokenBalances:ie(X(H(fn))),postTokenBalances:ie(X(H(fn))),loadedAddresses:ie(ko),computeUnitsConsumed:ie(R()),costUnits:ie(R())}),cr=We([Ae(0),Ae("legacy")]),$t=q({pubkey:K(),lamports:R(),postBalance:X(R()),rewardType:X(K()),commission:ie(X(R()))});Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),transactions:H(q({transaction:Rs,meta:X(En),version:ie(cr)})),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),transactions:H(q({transaction:_o,meta:X(En),version:ie(cr)})),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),transactions:H(q({transaction:Bo,meta:X(Ts),version:ie(cr)})),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),transactions:H(q({transaction:_o,meta:X(Ts),version:ie(cr)})),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),rewards:ie(H($t)),blockTime:X(R()),blockHeight:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),transactions:H(q({transaction:Rs,meta:X(En)})),rewards:ie(H($t)),blockTime:X(R())})));Se(X(q({blockhash:K(),previousBlockhash:K(),parentSlot:R(),signatures:H(K()),blockTime:X(R())})));Se(X(q({slot:R(),meta:X(En),blockTime:ie(X(R())),transaction:Rs,version:ie(cr)})));Se(X(q({slot:R(),transaction:Bo,meta:X(Ts),blockTime:ie(X(R())),version:ie(cr)})));st(q({blockhash:K(),lastValidBlockHeight:R()}));st(ct());const Xd=q({slot:R(),numTransactions:R(),numSlots:R(),samplePeriodSecs:R()});Se(H(Xd));st(X(q({feeCalculator:q({lamportsPerSignature:R()})})));Se(K());Se(K());const Qd=q({err:zt,logs:H(K()),signature:K()});q({result:xn(Qd),subscription:R()});Object.freeze({CreateLookupTable:{index:0,layout:y.struct([y.u32("instruction"),nr("recentSlot"),y.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:y.struct([y.u32("instruction")])},ExtendLookupTable:{index:2,layout:y.struct([y.u32("instruction"),nr(),y.seq(we(),y.offset(y.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:y.struct([y.u32("instruction")])},CloseLookupTable:{index:4,layout:y.struct([y.u32("instruction")])}});new he("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:y.struct([y.u8("instruction"),y.u32("units"),y.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:y.struct([y.u8("instruction"),y.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:y.struct([y.u8("instruction"),y.u32("units")])},SetComputeUnitPrice:{index:3,layout:y.struct([y.u8("instruction"),nr("microLamports")])}});new he("ComputeBudget111111111111111111111111111111");y.struct([y.u8("numSignatures"),y.u8("padding"),y.u16("signatureOffset"),y.u16("signatureInstructionIndex"),y.u16("publicKeyOffset"),y.u16("publicKeyInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u16("messageInstructionIndex")]);new he("Ed25519SigVerify111111111111111111111111111");kc.utils.isValidPrivateKey;y.struct([y.u8("numSignatures"),y.u16("signatureOffset"),y.u8("signatureInstructionIndex"),y.u16("ethAddressOffset"),y.u8("ethAddressInstructionIndex"),y.u16("messageDataOffset"),y.u16("messageDataSize"),y.u8("messageInstructionIndex"),y.blob(20,"ethAddress"),y.blob(64,"signature"),y.u8("recoveryId")]);new he("KeccakSecp256k11111111111111111111111111111");var Ro;new he("StakeConfig11111111111111111111111111111111");class To{constructor(e,r,n){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=r,this.custodian=n}}Ro=To;To.default=new Ro(0,0,he.default);Object.freeze({Initialize:{index:0,layout:y.struct([y.u32("instruction"),Sd(),Id()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),we("newAuthorized"),y.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:y.struct([y.u32("instruction")])},Split:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Withdraw:{index:4,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},Deactivate:{index:5,layout:y.struct([y.u32("instruction")])},Merge:{index:7,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:y.struct([y.u32("instruction"),we("newAuthorized"),y.u32("stakeAuthorizationType"),Jt("authoritySeed"),we("authorityOwner")])}});new he("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:y.struct([y.u32("instruction"),Ad()])},Authorize:{index:1,layout:y.struct([y.u32("instruction"),we("newAuthorized"),y.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:y.struct([y.u32("instruction"),y.ns64("lamports")])},UpdateValidatorIdentity:{index:4,layout:y.struct([y.u32("instruction")])},AuthorizeWithSeed:{index:10,layout:y.struct([y.u32("instruction"),Bd()])}});new he("Vote111111111111111111111111111111111111111");new he("Va1idator1nfo111111111111111111111111111111");q({name:K(),website:ie(K()),details:ie(K()),iconUrl:ie(K()),keybaseUsername:ie(K())});new he("Vote111111111111111111111111111111111111111");y.struct([we("nodePubkey"),we("authorizedWithdrawer"),y.u8("commission"),y.nu64(),y.seq(y.struct([y.nu64("slot"),y.u32("confirmationCount")]),y.offset(y.u32(),-8),"votes"),y.u8("rootSlotValid"),y.nu64("rootSlot"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),we("authorizedVoter")]),y.offset(y.u32(),-8),"authorizedVoters"),y.struct([y.seq(y.struct([we("authorizedPubkey"),y.nu64("epochOfLastAuthorizedSwitch"),y.nu64("targetEpoch")]),32,"buf"),y.nu64("idx"),y.u8("isEmpty")],"priorVoters"),y.nu64(),y.seq(y.struct([y.nu64("epoch"),y.nu64("credits"),y.nu64("prevCredits")]),y.offset(y.u32(),-8),"epochCredits"),y.struct([y.nu64("slot"),y.nu64("timestamp")],"lastTimestamp")]);const el=t=>({request:t,signMessage:e=>t({method:"signMessage",params:{message:e}}),signTransaction:e=>t({method:"signTransaction",params:{transaction:e}}),signAndSendTransaction:e=>t({method:"signAndSendTransaction",params:e})});function wi(t){return Buffer.from(t.serialize({verifySignatures:!1})).toString("base64")}function tl(t){const e=Buffer.from(t,"base64");return Is.deserializeMessageVersion(e)==="legacy"?As.deserialize(e):ln.from(e)}function rl(t){return async r=>{if(r.method==="connect")return await t(r);if(r.method==="signMessage")return await t(r);if(r.method==="signAndSendTransaction"){const{transaction:n}=r.params,s={transaction:wi(n)};return await t({method:"signAndSendTransaction",params:s})}if(r.method==="signTransaction"){const{transaction:n}=r.params,s={transaction:wi(n)},{signedTransaction:i}=await t({method:"signTransaction",params:s});return{signedTransaction:tl(i)}}}}const nl=({miniAppHost:t,emitter:e})=>{let r,n=null;return{visible:!1,get onback(){return n},set onback(s){n&&e.removeListener("backNavigationTriggered",n),n=s,s&&e.addListener("backNavigationTriggered",s)},async show(){await t.updateBackState({visible:!0}),this.visible=!0},async hide(){await t.updateBackState({visible:!1}),this.visible=!1},async enableWebNavigation(){r=sl({back:this,emitter:e})},async disableWebNavigation(){r?.(),r=void 0}}};function sl({emitter:t,back:e}){const r=il();if(r)return ol({emitter:t,back:e,navigation:r});if(typeof window<"u")return al({emitter:t,back:e,window})}function il(){if(typeof window<"u"&&window.navigation!==void 0)return window.navigation}function ol({emitter:t,back:e,navigation:r}){function n(){r.canGoBack?e.show():e.hide()}function s(){e.visible&&r.canGoBack&&r.back()}return r.addEventListener("navigatesuccess",n),t.addListener("backNavigationTriggered",s),()=>{r.removeEventListener("navigatesuccess",n),t.removeListener("backNavigationTriggered",s)}}function al({emitter:t,back:e,window:r}){e.show();function n(){e.visible&&r.history.back()}return t.addListener("backNavigationTriggered",n),()=>{t.removeListener("backNavigationTriggered",n)}}const cl="0.1.1";function ul(){return cl}let dl=class ns extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof ns){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause?.message?r.cause.message:r.details})(),s=r.cause instanceof ns&&r.cause.docsPath||r.docsPath,o=`https://oxlib.sh${s??""}`,u=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n||s?["",n?`Details: ${n}`:void 0,s?`See: ${o}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(u,r.cause?{cause:r.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${ul()}`}),this.cause=r.cause,this.details=n,this.docs=o,this.docsPath=s,this.shortMessage=e}walk(e){return Oo(this,e)}};function Oo(t,e){return e?.(t)?t:t&&typeof t=="object"&&"cause"in t&&t.cause?Oo(t.cause,e):e?null:t}function Uo(t,e={}){const{raw:r=!1}=e,n=t;if(r)return t;if(n.error){const{code:s}=n.error,i=s===sr.code?sr:s===yr.code?yr:s===Ar.code?Ar:s===Sr.code?Sr:s===Er.code?Er:s===Ir.code?Ir:s===xr.code?xr:s===Br.code?Br:s===wr.code?wr:s===br.code?br:s===vr.code?vr:s===_r.code?_r:Ye;throw new i(n.error)}return n.result}let Ye=class extends Error{constructor(e){const{code:r,message:n,data:s}=e;super(n),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.BaseError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=r,this.data=s}};class yr extends Ye{constructor(e={}){super({message:"Missing or invalid parameters.",...e,code:yr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidInputError"})}}Object.defineProperty(yr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class wr extends Ye{constructor(e={}){super({message:"Requested resource not found.",...e,code:wr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceNotFoundError"})}}Object.defineProperty(wr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class br extends Ye{constructor(e={}){super({message:"Requested resource not available.",...e,code:br.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ResourceUnavailableError"})}}Object.defineProperty(br,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class vr extends Ye{constructor(e={}){super({message:"Transaction creation failed.",...e,code:vr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.TransactionRejectedError"})}}Object.defineProperty(vr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class xr extends Ye{constructor(e={}){super({message:"Method is not implemented.",...e,code:xr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotSupportedError"})}}Object.defineProperty(xr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class Er extends Ye{constructor(e={}){super({message:"Rate limit exceeded.",...e,code:Er.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.LimitExceededError"})}}Object.defineProperty(Er,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class _r extends Ye{constructor(e={}){super({message:"JSON-RPC version not supported.",...e,code:_r.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.VersionNotSupportedError"})}}Object.defineProperty(_r,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Sr extends Ye{constructor(e={}){super({message:"Input is not a valid JSON-RPC request.",...e,code:Sr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidRequestError"})}}Object.defineProperty(Sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Ir extends Ye{constructor(e={}){super({message:"Method does not exist.",...e,code:Ir.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.MethodNotFoundError"})}}Object.defineProperty(Ir,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Ar extends Ye{constructor(e={}){super({message:"Invalid method parameters.",...e,code:Ar.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InvalidParamsError"})}}Object.defineProperty(Ar,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class sr extends Ye{constructor(e={}){super({message:"Internal JSON-RPC error.",...e,code:sr.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.InternalErrorError"})}}Object.defineProperty(sr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Br extends Ye{constructor(e={}){super({message:"Failed to parse JSON-RPC response.",...e,code:Br.code}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RpcResponse.ParseError"})}}Object.defineProperty(Br,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class qt extends Error{constructor(e,r){super(r),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderRpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=e,this.details=r}}class Co extends qt{constructor({message:e="The user rejected the request."}={}){super(4001,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UserRejectedRequestError"})}}Object.defineProperty(Co,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Lo extends qt{constructor({message:e="The requested method and/or account has not been authorized by the user."}={}){super(4100,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnauthorizedError"})}}Object.defineProperty(Lo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class No extends qt{constructor({message:e="The provider does not support the requested method."}={}){super(4200,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.UnsupportedMethodError"})}}Object.defineProperty(No,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Fo extends qt{constructor({message:e="The provider is disconnected from all chains."}={}){super(4900,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.DisconnectedError"})}}Object.defineProperty(Fo,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Po extends qt{constructor({message:e="The provider is not connected to the requested chain."}={}){super(4901,e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.ChainDisconnectedError"})}}Object.defineProperty(Po,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});function ll(){const t=new Ii;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}function fl(t,e={}){const{includeEvents:r=!0}=e;if(!t)throw new hl;return{...r?{on:t.on?.bind(t),removeListener:t.removeListener?.bind(t)}:{},async request(n){const s=await t.request(n);return s&&typeof s=="object"&&"jsonrpc"in s?Uo(s):s}}}class hl extends dl{constructor(){super("`provider` is undefined."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Provider.IsUndefinedError"})}}function pl(t={}){let e=t.id??0;return{prepare(r){return ml({id:e++,...r})},get id(){return e}}}function ml(t){return{...t,jsonrpc:"2.0"}}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mo=Symbol("Comlink.proxy"),gl=Symbol("Comlink.endpoint"),yl=Symbol("Comlink.releaseProxy"),Zn=Symbol("Comlink.finalizer"),$r=Symbol("Comlink.thrown"),Do=t=>typeof t=="object"&&t!==null||typeof t=="function",wl={canHandle:t=>Do(t)&&t[Mo],serialize(t){const{port1:e,port2:r}=new MessageChannel;return zo(t,e),[r,[r]]},deserialize(t){return t.start(),qo(t)}},bl={canHandle:t=>Do(t)&&$r in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},jo=new Map([["proxy",wl],["throw",bl]]);function vl(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}function zo(t,e=globalThis,r=["*"]){e.addEventListener("message",function n(s){if(!s||!s.data)return;if(!vl(r,s.origin)){console.warn(`Invalid origin '${s.origin}' for comlink proxy`);return}const{id:i,type:o,path:u}=Object.assign({path:[]},s.data),d=(s.data.argumentList||[]).map(kt);let m;try{const b=u.slice(0,-1).reduce((x,w)=>x[w],t),N=u.reduce((x,w)=>x[w],t);switch(o){case"GET":m=N;break;case"SET":b[u.slice(-1)[0]]=kt(s.data.value),m=!0;break;case"APPLY":m=N.apply(b,d);break;case"CONSTRUCT":{const x=new N(...d);m=Al(x)}break;case"ENDPOINT":{const{port1:x,port2:w}=new MessageChannel;zo(t,w),m=Il(x,[x])}break;case"RELEASE":m=void 0;break;default:return}}catch(b){m={value:b,[$r]:0}}Promise.resolve(m).catch(b=>({value:b,[$r]:0})).then(b=>{const[N,x]=mn(b);e.postMessage(Object.assign(Object.assign({},N),{id:i}),x),o==="RELEASE"&&(e.removeEventListener("message",n),$o(e),Zn in t&&typeof t[Zn]=="function"&&t[Zn]())}).catch(b=>{const[N,x]=mn({value:new TypeError("Unserializable return value"),[$r]:0});e.postMessage(Object.assign(Object.assign({},N),{id:i}),x)})}),e.start&&e.start()}function xl(t){return t.constructor.name==="MessagePort"}function $o(t){xl(t)&&t.close()}function qo(t,e){const r=new Map;return t.addEventListener("message",function(s){const{data:i}=s;if(!i||!i.id)return;const o=r.get(i.id);if(o)try{o(i)}finally{r.delete(i.id)}}),ss(t,r,[],e)}function jr(t){if(t)throw new Error("Proxy has been released and is not useable")}function Zo(t){return Kt(t,new Map,{type:"RELEASE"}).then(()=>{$o(t)})}const hn=new WeakMap,pn="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(hn.get(t)||0)-1;hn.set(t,e),e===0&&Zo(t)});function El(t,e){const r=(hn.get(e)||0)+1;hn.set(e,r),pn&&pn.register(t,e,t)}function _l(t){pn&&pn.unregister(t)}function ss(t,e,r=[],n=function(){}){let s=!1;const i=new Proxy(n,{get(o,u){if(jr(s),u===yl)return()=>{_l(i),Zo(t),e.clear(),s=!0};if(u==="then"){if(r.length===0)return{then:()=>i};const d=Kt(t,e,{type:"GET",path:r.map(m=>m.toString())}).then(kt);return d.then.bind(d)}return ss(t,e,[...r,u])},set(o,u,d){jr(s);const[m,b]=mn(d);return Kt(t,e,{type:"SET",path:[...r,u].map(N=>N.toString()),value:m},b).then(kt)},apply(o,u,d){jr(s);const m=r[r.length-1];if(m===gl)return Kt(t,e,{type:"ENDPOINT"}).then(kt);if(m==="bind")return ss(t,e,r.slice(0,-1));const[b,N]=bi(d);return Kt(t,e,{type:"APPLY",path:r.map(x=>x.toString()),argumentList:b},N).then(kt)},construct(o,u){jr(s);const[d,m]=bi(u);return Kt(t,e,{type:"CONSTRUCT",path:r.map(b=>b.toString()),argumentList:d},m).then(kt)}});return El(i,t),i}function Sl(t){return Array.prototype.concat.apply([],t)}function bi(t){const e=t.map(mn);return[e.map(r=>r[0]),Sl(e.map(r=>r[1]))]}const Vo=new WeakMap;function Il(t,e){return Vo.set(t,e),t}function Al(t){return Object.assign(t,{[Mo]:!0})}function Bl(t,e=globalThis,r="*"){return{postMessage:(n,s)=>t.postMessage(n,r,s),addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e)}}function mn(t){for(const[e,r]of jo)if(r.canHandle(t)){const[n,s]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},Vo.get(t)||[]]}function kt(t){switch(t.type){case"HANDLER":return jo.get(t.name).deserialize(t.value);case"RAW":return t.value}}function Kt(t,e,r,n){return new Promise(s=>{const i=kl();e.set(i,s),t.start&&t.start(),t.postMessage(Object.assign({id:i},r),n)})}function kl(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const Rl={postMessage(){},addEventListener:()=>{},removeEventListener:()=>{}},Tl={postMessage:t=>{window.ReactNativeWebView.postMessage(JSON.stringify(t))},addEventListener:(t,e,...r)=>{document.addEventListener("FarcasterFrameCallback",e,...r)},removeEventListener:(t,e)=>{document.removeEventListener("FarcasterFrameCallback",e)}},Ol=typeof window>"u"?Rl:window?.ReactNativeWebView?Tl:Bl(window?.parent??window),fe=qo(Ol),Os=ll(),Ul=pl();function Cl({code:t,details:e}){switch(t){case 4001:return new Co;case 4100:return new Lo;case 4200:return new No;case 4900:return new Fo;case 4901:return new Po;default:return new qt(t,e??"Unknown provider RPC error")}}const kr=fl({...Os,async request(t){const e=Ul.prepare(t);try{const r=await fe.ethProviderRequestV2(e).then(n=>Uo(n,{request:e,raw:!0}));if(r.error)throw Cl(r.error);return r.result}catch(r){if(r instanceof Error&&r.message.match(/cannot read property 'apply'/i))return await fe.ethProviderRequest(e);throw r instanceof qt||r instanceof Ye?r:new sr({message:r instanceof Error?r.message:void 0})}}});async function Ll(){try{const t=await fe.getCapabilities();return!t.includes("wallet.getEthereumProvider")&&!t.includes("wallet.getEvmProvider")?void 0:kr}catch{return kr}}function Ko(t){const e=new CustomEvent("eip6963:announceProvider",{detail:Object.freeze(t)});window.dispatchEvent(e);const r=()=>window.dispatchEvent(e);return window.addEventListener("eip6963:requestProvider",r),()=>window.removeEventListener("eip6963:requestProvider",r)}typeof document<"u"&&(document.addEventListener("eip6963:requestProvider",()=>{fe.eip6963RequestProvider()}),document.addEventListener("FarcasterFrameEthProviderEvent",t=>{if(t instanceof MessageEvent){const e=t.data;Os.emit(e.event,...e.params)}}),document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="eip6963:announceProvider"&&Ko({info:e.info,provider:kr})}}));typeof window<"u"&&(window.addEventListener("eip6963:requestProvider",()=>{fe.eip6963RequestProvider()}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEthProviderEvent"){const e=t.data;Os.emit(e.event,...e.params)}}),window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="eip6963:announceProvider"&&Ko({info:e.info,provider:kr})}}));new TextEncoder;const Wo=new TextDecoder,Nl=t=>{const e=atob(t),r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return r},Fl=t=>{let e=t;e instanceof Uint8Array&&(e=Wo.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Nl(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}},Pl=Fl;function Ml(t){return typeof t=="object"&&t!==null}function Dl(t){if(!Ml(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}class Je extends Error{constructor(e,r){super(e,r),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}Je.code="ERR_JOSE_GENERIC";class jl extends Je{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=n,this.reason=s,this.payload=r}}jl.code="ERR_JWT_CLAIM_VALIDATION_FAILED";class zl extends Je{constructor(e,r,n="unspecified",s="unspecified"){super(e,{cause:{claim:n,reason:s,payload:r}}),this.code="ERR_JWT_EXPIRED",this.claim=n,this.reason=s,this.payload=r}}zl.code="ERR_JWT_EXPIRED";class $l extends Je{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}}$l.code="ERR_JOSE_ALG_NOT_ALLOWED";class ql extends Je{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}}ql.code="ERR_JOSE_NOT_SUPPORTED";class Zl extends Je{constructor(e="decryption operation failed",r){super(e,r),this.code="ERR_JWE_DECRYPTION_FAILED"}}Zl.code="ERR_JWE_DECRYPTION_FAILED";class Vl extends Je{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}}Vl.code="ERR_JWE_INVALID";class Kl extends Je{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}}Kl.code="ERR_JWS_INVALID";class xt extends Je{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}}xt.code="ERR_JWT_INVALID";class Wl extends Je{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}}Wl.code="ERR_JWK_INVALID";class Jl extends Je{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}}Jl.code="ERR_JWKS_INVALID";class Gl extends Je{constructor(e="no applicable key found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_NO_MATCHING_KEY"}}Gl.code="ERR_JWKS_NO_MATCHING_KEY";class Yl extends Je{constructor(e="multiple matching keys found in the JSON Web Key Set",r){super(e,r),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}Yl.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS";class Hl extends Je{constructor(e="request timed out",r){super(e,r),this.code="ERR_JWKS_TIMEOUT"}}Hl.code="ERR_JWKS_TIMEOUT";class Xl extends Je{constructor(e="signature verification failed",r){super(e,r),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}Xl.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";function Ql(t){if(typeof t!="string")throw new xt("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:r}=t.split(".");if(r===5)throw new xt("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new xt("Invalid JWT");if(!e)throw new xt("JWTs must contain a payload");let n;try{n=Pl(e)}catch{throw new xt("Failed to base64url decode the payload")}let s;try{s=JSON.parse(Wo.decode(n))}catch{throw new xt("Failed to parse the decoded payload as JSON")}if(!Dl(s))throw new xt("Invalid JWT Claims Set");return s}function ef(t){return Ql(t)}class _n extends Error{constructor(e,r={}){const n=(()=>{if(r.cause instanceof _n){if(r.cause.details)return r.cause.details;if(r.cause.shortMessage)return r.cause.shortMessage}return r.cause&&"details"in r.cause&&typeof r.cause.details=="string"?r.cause.details:r.cause?.message?r.cause.message:r.details})(),s=[e||"An error occurred.",...r.metaMessages?["",...r.metaMessages]:[],...n?["",n?`Details: ${n}`:void 0]:[]].filter(i=>typeof i=="string").join(`
`);super(s,r.cause?{cause:r.cause}:void 0),this.name="BaseError",this.cause=r.cause,this.details=n,this.shortMessage=e}}class Jo extends _n{constructor({status:e}){super(`Request failed with status ${e}`),this.name="RequestFailedError"}}class tf extends _n{constructor(e){super(e),this.name="InvalidToken"}}async function rf({origin:t}){const e=await fetch(`${t}/nonce`,{method:"POST"});if(!e.ok)throw new Jo({status:e.status});return await e.json()}async function nf({origin:t},e){const r=await fetch(`${t}/verify-siwf`,{method:"POST",headers:new Headers({"Content-Type":"application/json"}),body:JSON.stringify(e)});if(!r.ok)throw new Jo({status:r.status});const n=await r.json();if(n.valid===!1)throw new tf(n.message??"unknown");return{token:n.token}}function sf(t={}){return{origin:t.origin??"https://auth.farcaster.xyz"}}function of(t={}){const e=sf(t);return{generateNonce:()=>rf(e),verifySiwf:r=>nf(e,r)}}const af=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,cf=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function uf(t){const{scheme:e,statement:r,...n}=t.match(af)?.groups??{},{chainId:s,expirationTime:i,issuedAt:o,notBefore:u,requestId:d,...m}=t.match(cf)?.groups??{},b=t.split("Resources:")[1]?.split(`
- `).slice(1);return{...n,...m,...s?{chainId:Number(s)}:{},...i?{expirationTime:new Date(i)}:{},...o?{issuedAt:new Date(o)}:{},...u?{notBefore:new Date(u)}:{},...d?{requestId:d}:{},...b?{resources:b}:{},...e?{scheme:e}:{},...r?{statement:r}:{}}}const vi=(()=>{let t,e;async function r(n){const s=of({origin:n.quickAuthServerOrigin}),{nonce:i}=await s.generateNonce(),o=await fe.signIn({nonce:i,acceptAuthAddress:!0});if(o.result){const u=uf(o.result.message);if(!u.domain)throw new Error("Missing domain on SIWE message");const d=await s.verifySiwf({domain:u.domain,message:o.result.message,signature:o.result.signature});return t={token:d.token,payload:ef(d.token)},d}throw o.error.type==="rejected_by_user"?new so:new Error("Unreachable")}return{get token(){if(t&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3))return t.token},async getToken(n={}){const s=n.force??!1;return t&&!s&&new Date(t.payload.exp*1e3)>new Date(Date.now()+15e3)?{token:t.token}:(e||(e=r(n)),e.finally(()=>{e=void 0}),e)},async fetch(n,s){const{token:i}=await this.getToken(),o=new Headers(s?.headers);return o.set("Authorization",`Bearer ${i}`),fetch(n,{...s,headers:o})}}})();function df(){const t=new Ii;return{get eventNames(){return t.eventNames.bind(t)},get listenerCount(){return t.listenerCount.bind(t)},get listeners(){return t.listeners.bind(t)},addListener:t.addListener.bind(t),emit:t.emit.bind(t),off:t.off.bind(t),on:t.on.bind(t),once:t.once.bind(t),removeAllListeners:t.removeAllListeners.bind(t),removeListener:t.removeListener.bind(t)}}const qe=df(),{solanaProviderRequest:xi}=fe;let Go;xi&&(Go=el(rl(xi)));async function Ei(){let t;try{t=await fe.getCapabilities()}catch{}if(t?.includes("wallet.getSolanaProvider"))return Go}let _i=null;async function lf(t=1e3){if(_i===!0)return!0;if(typeof window>"u"||!window.ReactNativeWebView&&window===window.parent)return!1;const e=await Promise.race([fe.context.then(r=>!!r),new Promise(r=>{setTimeout(()=>r(!1),t)})]).catch(()=>!1);return e&&(_i=!0),e}const Si=async()=>{const t=await fe.addFrame();if(t.result)return t.result;throw t.error.type==="invalid_domain_manifest"?new Rc:t.error.type==="rejected_by_user"?new Tc:new Error("Unreachable")},xf={...qe,getCapabilities:fe.getCapabilities,getChains:fe.getChains,isInMiniApp:lf,context:fe.context,back:nl({miniAppHost:fe,emitter:qe}),quickAuth:vi,actions:{setPrimaryButton:fe.setPrimaryButton.bind(fe),ready:async(t={})=>await fe.ready(t),close:fe.close.bind(fe),viewCast:fe.viewCast.bind(fe),viewProfile:fe.viewProfile.bind(fe),openMiniApp:fe.openMiniApp.bind(fe),signIn:async t=>{const e=await fe.signIn({...t,acceptAuthAddress:t.acceptAuthAddress??!0});if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new so:new Error("Unreachable")},openUrl:t=>{const e=typeof t=="string"?t:t.url;return fe.openUrl(e.trim())},addFrame:Si,addMiniApp:Si,composeCast(t={}){return fe.composeCast(t)},viewToken:fe.viewToken.bind(fe),sendToken:fe.sendToken.bind(fe),swapToken:fe.swapToken.bind(fe),requestCameraAndMicrophoneAccess:fe.requestCameraAndMicrophoneAccess.bind(fe)},experimental:{getSolanaProvider:Ei,signManifest:async t=>{const e=await fe.signManifest(t);if(e.result)return e.result;throw e.error.type==="rejected_by_user"?new Oc:e.error.type==="invalid_domain"?new Uc:e.error.type==="generic_error"?new Cc(e.error.message):new Error("Unreachable")},quickAuth(t){return vi.getToken(t)}},wallet:{ethProvider:kr,getEthereumProvider:Ll,getSolanaProvider:Ei},haptics:{impactOccurred:fe.impactOccurred.bind(fe),notificationOccurred:fe.notificationOccurred.bind(fe),selectionChanged:fe.selectionChanged.bind(fe)}};typeof document<"u"&&document.addEventListener("FarcasterFrameEvent",t=>{if(t instanceof MessageEvent){const e=t.data;e.event==="primary_button_clicked"?qe.emit("primaryButtonClicked"):e.event==="miniapp_added"?qe.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?qe.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?qe.emit("miniAppRemoved"):e.event==="notifications_enabled"?qe.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?qe.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&qe.emit("backNavigationTriggered")}});typeof window<"u"&&window.addEventListener("message",t=>{if(t instanceof MessageEvent&&t.data.type==="frameEvent"){const e=t.data.event;e.event==="primary_button_clicked"?qe.emit("primaryButtonClicked"):e.event==="miniapp_added"?qe.emit("miniAppAdded",{notificationDetails:e.notificationDetails}):e.event==="miniapp_add_rejected"?qe.emit("miniAppAddRejected",{reason:e.reason}):e.event==="miniapp_removed"?qe.emit("miniAppRemoved"):e.event==="notifications_enabled"?qe.emit("notificationsEnabled",{notificationDetails:e.notificationDetails}):e.event==="notifications_disabled"?qe.emit("notificationsDisabled"):e.event==="back_navigation_triggered"&&qe.emit("backNavigationTriggered")}});export{qc as actionLaunchFrameSchema,Zc as actionLaunchMiniAppSchema,Kc as actionSchema,Vc as actionViewTokenSchema,zc as aspectRatioSchema,Wc as buttonSchema,io as buttonTitleSchema,Mc as caip19TokenSchema,du as chains,or as createSimpleStringSchema,el as createSolanaWalletProvider,xf as default,nu as descriptionSchema,ei as domainMiniAppConfigSchema,jc as domainSchema,$c as encodedJsonFarcasterSignatureSchema,Jc as eventMiniAppAddedSchema,Gc as eventMiniAppRemovedSchema,Yc as eventNotificationsEnabledSchema,gs as hexColorSchema,fe as miniAppHost,Xc as miniAppHostCapabilityList,ms as miniAppNameSchema,uu as noindexSchema,oo as notificationDetailsSchema,Hc as notificationsDisabledSchema,cu as ogDescriptionSchema,au as ogTitleSchema,Qc as primaryCategories,eu as primaryCategorySchema,vi as quickAuth,fu as requiredCapabilitiesSchema,lu as requiredChainsSchema,su as screenshotUrlsSchema,xf as sdk,Ve as secureUrlSchema,ru as subtitleSchema,ou as taglineSchema,iu as tagsSchema,rl as unwrapSolanaProviderRequest,tu as versionSchema};
